<!DOCTYPE html>
<html><head>
<title>Golang 学习笔记 （1）</title>

<meta charset="utf-8">
<meta name="X-UA-Compatible" content="IE=edge">
<meta name="google-site-verification" content="">
<meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport">
<meta content="telephone=no" name="format-detection">
<meta name="renderer" content="webkit">
<meta name="theme-color" content="#ffffff">




<script type="application/javascript">
var doNotTrack = false;
if (!doNotTrack) {
	(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
	(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
	m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
	})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
	ga('create', 'UA-111347233-1', 'auto');
	
	ga('send', 'pageview');
}
</script>



<script src="/vendor/js/jquery.min.js" ></script>
<script src="/vendor/js/popper.min.js" ></script>
<script src="/vendor/js/bootstrap.min.js" ></script>
<script src="/vendor/js/smooth-scroll.polyfills.min.js" ></script>
<link type="text/css" rel="stylesheet" href="/vendor/css/bootstrap.min.css">
<script src="/vendor/js/vue.min.js" ></script>




<link rel="stylesheet" href="https://kirainmoe.com/scss/journal.min.d1b323a5bdb0e7b05730834eb664c761432cfb57d618b4efeb5a9417a66a4b44.css" integrity="sha256-0bMjpb2w57BXMINOtmTHYUMs&#43;1fWGLTv61qUF6ZqS0Q=" media="screen">

<script src="https://kirainmoe.com//js/loadCSS.js"></script>
<script src="https://kirainmoe.com//js/table.js"></script>


<script src="https://kirainmoe.com//js/toc.js"></script>


<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
      showProcessingMessages: false,
      messageStyle: "none", 
      jax: ["input/TeX", "output/HTML-CSS"],
      tex2jax: {
        inlineMath: [["$", "$"], ["\\(", "\\)"]],
        displayMath: [["$$", "$$"], ["\\[", "\\]"]],
        skipTags: ["script", "noscript", "style", "textarea", "pre", "code", "a"]
      },
      "HTML-CSS": {
        availableFonts: ["STIX", "TeX"], 
        showMathMenu: false
      }
  });
</script>
<script type="text/javascript" async src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML"></script>

<script src="https://unpkg.com/muse-player/dist/assets/muse-player.js"></script>

<script>
    loadCSS("https://fonts.googleapis.com/css?family=Lora|Montserrat|Fira+Mono|Noto+Serif+SC|Material+Icons");
</script>

</head><body>
    	<div id="app"><div ref="sideContainer" class="side-container">
    
    <a class="a-block nav-head false" href="https://kirainmoe.com/">
    
        <div class="nav-title">
            宇宙よりも遠い場所
        </div>
        
    </a>

    <div class="nav-link-list">
        
        
            
                
                
                <a class="a-block nav-link-item false" href="/pages/guestbook">
                    留言板
                </a>
        
            
                
                
                <a class="a-block nav-link-item false" href="/pages/friends">
                    友情链接
                </a>
        
            
                
                
                <a class="a-block nav-link-item false" href="/tags">
                    标签
                </a>
        
            
                
                
                <a class="a-block nav-link-item false" href="/pages/about">
                    关于
                </a>
        
    </div>

    

    <div class="nav-footer">
        &copy;
	
	2016-2020 宇宙よりも遠い場所
	

/

<a href="https://creativecommons.org/licenses/by-sa/4.0/deed.zh">CC-BY-SA 4.0</a>

<br>

Published with <a href="https://gohugo.io">Hugo</a> / Theme <a href="https://github.com/amazingrise/hugo-theme-diary" title="Author: Rise @ amazingrise.net">Diary</a>

    </div>

    
    <script src="https://tj.kirainmoe.com/cgi-bin/inject_script.cgi"></script>
    
</div><div ref="extraContainer" class="extra-container">
    
    <div class="toc animated-visibility" :class="{ invisible: scrollY <= 140 }">


	<div class="toc-content">
	
		
		
		
		<center>- CATALOG -</center>
			
				
				
					
						
						
							<ul>
						
						
								<li>
				 					<a href="#0x01-%e5%8c%85" v-on:click="closeDrawer" id="0x01-包-nav">
										 0x01 包
									</a>
								</li>
						
							</ul>
						
					
				
			
				
				
					
						
						
							<ul>
						
						
								<li>
				 					<a href="#0x02-%e5%87%bd%e6%95%b0" v-on:click="closeDrawer" id="0x02-函数-nav">
										 0x02 函数
									</a>
								</li>
						
							</ul>
						
					
				
			
				
				
					
						
						
							<ul>
						
						
								<li>
				 					<a href="#0x03-%e8%bf%94%e5%9b%9e%e5%80%bc" v-on:click="closeDrawer" id="0x03-返回值-nav">
										 0x03 返回值
									</a>
								</li>
						
							</ul>
						
					
				
			
				
				
					
						
						
							<ul>
						
						
								<li>
				 					<a href="#0x04-%e5%8f%98%e9%87%8f" v-on:click="closeDrawer" id="0x04-变量-nav">
										 0x04 变量
									</a>
								</li>
						
							</ul>
						
					
				
			
				
				
					
						
						
							<ul>
						
						
								<li>
				 					<a href="#0x05-%e5%8f%98%e9%87%8f%e7%b1%bb%e5%9e%8b" v-on:click="closeDrawer" id="0x05-变量类型-nav">
										 0x05 变量类型
									</a>
								</li>
						
							</ul>
						
					
				
			
				
				
					
						
						
							<ul>
						
						
								<li>
				 					<a href="#0x06-%e7%b1%bb%e5%9e%8b%e8%bd%ac%e6%8d%a2" v-on:click="closeDrawer" id="0x06-类型转换-nav">
										 0x06 类型转换
									</a>
								</li>
						
							</ul>
						
					
				
			
				
				
					
						
						
							<ul>
						
						
								<li>
				 					<a href="#0x07-%e5%b8%b8%e9%87%8f" v-on:click="closeDrawer" id="0x07-常量-nav">
										 0x07 常量
									</a>
								</li>
						
							</ul>
						
					
				
			
				
				
					
						
						
							<ul>
						
						
								<li>
				 					<a href="#0x08-%e5%be%aa%e7%8e%af" v-on:click="closeDrawer" id="0x08-循环-nav">
										 0x08 循环
									</a>
								</li>
						
							</ul>
						
					
				
			
				
				
					
						
						
							<ul>
						
						
								<li>
				 					<a href="#0x09-%e5%88%a4%e6%96%ad" v-on:click="closeDrawer" id="0x09-判断-nav">
										 0x09 判断
									</a>
								</li>
						
							</ul>
						
					
				
			
				
				
					
						
						
							<ul>
						
							<ul>
						
						
								<li>
				 					<a href="#if-else-%e7%bb%93%e6%9e%84" v-on:click="closeDrawer" id="if-else-结构-nav">
										 if else 结构
									</a>
								</li>
						
							</ul>
						
							</ul>
						
					
				
			
				
				
					
						
						
							<ul>
						
							<ul>
						
						
								<li>
				 					<a href="#switch-%e7%bb%93%e6%9e%84" v-on:click="closeDrawer" id="switch-结构-nav">
										 switch 结构
									</a>
								</li>
						
							</ul>
						
							</ul>
						
					
				
			
				
				
					
						
						
							<ul>
						
						
								<li>
				 					<a href="#0x10-defer" v-on:click="closeDrawer" id="0x10-defer-nav">
										 0x10 defer
									</a>
								</li>
						
							</ul>
						
					
				
			
				
				
					
						
						
							<ul>
						
						
								<li>
				 					<a href="#0x11-%e6%8c%87%e9%92%88" v-on:click="closeDrawer" id="0x11-指针-nav">
										 0x11 指针
									</a>
								</li>
						
							</ul>
						
					
				
			
				
				
					
						
						
							<ul>
						
						
								<li>
				 					<a href="#0x12-%e7%bb%93%e6%9e%84%e4%bd%93" v-on:click="closeDrawer" id="0x12-结构体-nav">
										 0x12 结构体
									</a>
								</li>
						
							</ul>
						
					
				
			
				
				
					
						
						
							<ul>
						
						
								<li>
				 					<a href="#0x13-%e6%95%b0%e7%bb%84" v-on:click="closeDrawer" id="0x13-数组-nav">
										 0x13 数组
									</a>
								</li>
						
							</ul>
						
					
				
			
				
				
					
						
						
							<ul>
						
						
								<li>
				 					<a href="#0x14-%e5%88%87%e7%89%87" v-on:click="closeDrawer" id="0x14-切片-nav">
										 0x14 切片
									</a>
								</li>
						
							</ul>
						
					
				
			
				
				
					
						
						
							<ul>
						
						
								<li>
				 					<a href="#0x15-make" v-on:click="closeDrawer" id="0x15-make-nav">
										 0x15 make
									</a>
								</li>
						
							</ul>
						
					
				
			
				
				
					
						
						
							<ul>
						
						
								<li>
				 					<a href="#0x16-range-%e9%81%8d%e5%8e%86" v-on:click="closeDrawer" id="0x16-range-遍历-nav">
										 0x16 range 遍历
									</a>
								</li>
						
							</ul>
						
					
				
			
				
				
					
						
						
							<ul>
						
						
								<li>
				 					<a href="#0x17-%e6%98%a0%e5%b0%84" v-on:click="closeDrawer" id="0x17-映射-nav">
										 0x17 映射
									</a>
								</li>
						
							</ul>
						
					
				
			
				
				
					
						
						
							<ul>
						
						
								<li>
				 					<a href="#0x18-%e5%87%bd%e6%95%b0%e5%80%bc%e5%92%8c%e5%87%bd%e6%95%b0%e7%9a%84%e9%97%ad%e5%8c%85" v-on:click="closeDrawer" id="0x18-函数值和函数的闭包-nav">
										 0x18 函数值和函数的闭包
									</a>
								</li>
						
							</ul>
						
					
				
			
	</div>

</div>
    
    <div class="pagination">
        <a id="globalBackToTop" class="pagination-action animated-visibility" href="#top" :class="{ invisible: scrollY == 0 }">
            <i class="material-icons pagination-action-icon">
                keyboard_arrow_up
            </i>
        </a>
        
    </div>
</div><div class="single-column-drawer-container" ref="drawer"
     v-bind:class="{ 'single-column-drawer-container-active': isDrawerOpen }">
    <div class="drawer-content">
        <div class="drawer-menu">
            
            
                
                    
                    
                    <a class="a-block drawer-menu-item false" href="/pages/guestbook">
                        留言板
                    </a>
            
                
                    
                    
                    <a class="a-block drawer-menu-item false" href="/pages/friends">
                        友情链接
                    </a>
            
                
                    
                    
                    <a class="a-block drawer-menu-item false" href="/tags">
                        标签
                    </a>
            
                
                    
                    
                    <a class="a-block drawer-menu-item false" href="/pages/about">
                        关于
                    </a>
            
            
            <div class="toc">


	<div class="toc-content">
	
		
		
		
		<center>- CATALOG -</center>
			
				
				
					
						
						
							<ul>
						
						
								<li>
				 					<a href="#0x01-%e5%8c%85" v-on:click="closeDrawer" id="0x01-包-nav">
										 0x01 包
									</a>
								</li>
						
							</ul>
						
					
				
			
				
				
					
						
						
							<ul>
						
						
								<li>
				 					<a href="#0x02-%e5%87%bd%e6%95%b0" v-on:click="closeDrawer" id="0x02-函数-nav">
										 0x02 函数
									</a>
								</li>
						
							</ul>
						
					
				
			
				
				
					
						
						
							<ul>
						
						
								<li>
				 					<a href="#0x03-%e8%bf%94%e5%9b%9e%e5%80%bc" v-on:click="closeDrawer" id="0x03-返回值-nav">
										 0x03 返回值
									</a>
								</li>
						
							</ul>
						
					
				
			
				
				
					
						
						
							<ul>
						
						
								<li>
				 					<a href="#0x04-%e5%8f%98%e9%87%8f" v-on:click="closeDrawer" id="0x04-变量-nav">
										 0x04 变量
									</a>
								</li>
						
							</ul>
						
					
				
			
				
				
					
						
						
							<ul>
						
						
								<li>
				 					<a href="#0x05-%e5%8f%98%e9%87%8f%e7%b1%bb%e5%9e%8b" v-on:click="closeDrawer" id="0x05-变量类型-nav">
										 0x05 变量类型
									</a>
								</li>
						
							</ul>
						
					
				
			
				
				
					
						
						
							<ul>
						
						
								<li>
				 					<a href="#0x06-%e7%b1%bb%e5%9e%8b%e8%bd%ac%e6%8d%a2" v-on:click="closeDrawer" id="0x06-类型转换-nav">
										 0x06 类型转换
									</a>
								</li>
						
							</ul>
						
					
				
			
				
				
					
						
						
							<ul>
						
						
								<li>
				 					<a href="#0x07-%e5%b8%b8%e9%87%8f" v-on:click="closeDrawer" id="0x07-常量-nav">
										 0x07 常量
									</a>
								</li>
						
							</ul>
						
					
				
			
				
				
					
						
						
							<ul>
						
						
								<li>
				 					<a href="#0x08-%e5%be%aa%e7%8e%af" v-on:click="closeDrawer" id="0x08-循环-nav">
										 0x08 循环
									</a>
								</li>
						
							</ul>
						
					
				
			
				
				
					
						
						
							<ul>
						
						
								<li>
				 					<a href="#0x09-%e5%88%a4%e6%96%ad" v-on:click="closeDrawer" id="0x09-判断-nav">
										 0x09 判断
									</a>
								</li>
						
							</ul>
						
					
				
			
				
				
					
						
						
							<ul>
						
							<ul>
						
						
								<li>
				 					<a href="#if-else-%e7%bb%93%e6%9e%84" v-on:click="closeDrawer" id="if-else-结构-nav">
										 if else 结构
									</a>
								</li>
						
							</ul>
						
							</ul>
						
					
				
			
				
				
					
						
						
							<ul>
						
							<ul>
						
						
								<li>
				 					<a href="#switch-%e7%bb%93%e6%9e%84" v-on:click="closeDrawer" id="switch-结构-nav">
										 switch 结构
									</a>
								</li>
						
							</ul>
						
							</ul>
						
					
				
			
				
				
					
						
						
							<ul>
						
						
								<li>
				 					<a href="#0x10-defer" v-on:click="closeDrawer" id="0x10-defer-nav">
										 0x10 defer
									</a>
								</li>
						
							</ul>
						
					
				
			
				
				
					
						
						
							<ul>
						
						
								<li>
				 					<a href="#0x11-%e6%8c%87%e9%92%88" v-on:click="closeDrawer" id="0x11-指针-nav">
										 0x11 指针
									</a>
								</li>
						
							</ul>
						
					
				
			
				
				
					
						
						
							<ul>
						
						
								<li>
				 					<a href="#0x12-%e7%bb%93%e6%9e%84%e4%bd%93" v-on:click="closeDrawer" id="0x12-结构体-nav">
										 0x12 结构体
									</a>
								</li>
						
							</ul>
						
					
				
			
				
				
					
						
						
							<ul>
						
						
								<li>
				 					<a href="#0x13-%e6%95%b0%e7%bb%84" v-on:click="closeDrawer" id="0x13-数组-nav">
										 0x13 数组
									</a>
								</li>
						
							</ul>
						
					
				
			
				
				
					
						
						
							<ul>
						
						
								<li>
				 					<a href="#0x14-%e5%88%87%e7%89%87" v-on:click="closeDrawer" id="0x14-切片-nav">
										 0x14 切片
									</a>
								</li>
						
							</ul>
						
					
				
			
				
				
					
						
						
							<ul>
						
						
								<li>
				 					<a href="#0x15-make" v-on:click="closeDrawer" id="0x15-make-nav">
										 0x15 make
									</a>
								</li>
						
							</ul>
						
					
				
			
				
				
					
						
						
							<ul>
						
						
								<li>
				 					<a href="#0x16-range-%e9%81%8d%e5%8e%86" v-on:click="closeDrawer" id="0x16-range-遍历-nav">
										 0x16 range 遍历
									</a>
								</li>
						
							</ul>
						
					
				
			
				
				
					
						
						
							<ul>
						
						
								<li>
				 					<a href="#0x17-%e6%98%a0%e5%b0%84" v-on:click="closeDrawer" id="0x17-映射-nav">
										 0x17 映射
									</a>
								</li>
						
							</ul>
						
					
				
			
				
				
					
						
						
							<ul>
						
						
								<li>
				 					<a href="#0x18-%e5%87%bd%e6%95%b0%e5%80%bc%e5%92%8c%e5%87%bd%e6%95%b0%e7%9a%84%e9%97%ad%e5%8c%85" v-on:click="closeDrawer" id="0x18-函数值和函数的闭包-nav">
										 0x18 函数值和函数的闭包
									</a>
								</li>
						
							</ul>
						
					
				
			
	</div>

</div>
            
        </div>
    </div>
</div>
<transition name="fade">
    <div v-bind:class="{ 'single-column-drawer-mask': mounted }" v-if="isDrawerOpen" v-on:click="toggleDrawer"></div>
</transition>
<nav ref="navBar" class="navbar sticky-top navbar-light single-column-nav-container">
    <div ref="navBackground" class="nav-background"></div>
    <div class="container container-narrow nav-content">
        <button id="nav_dropdown_btn" class="nav-dropdown-toggle" type="button" v-on:click="toggleDrawer">
            <i class="material-icons">
                menu
            </i>
        </button>
        <a ref="navTitle" class="navbar-brand" href="https://kirainmoe.com/">
            宇宙よりも遠い場所
        </a>
    </div>
</nav>
<div class="single-column-header-container" ref="pageHead"
     v-bind:style="{ transform: 'translateZ(0px) translateY('+.3*scrollY+'px)', opacity: 1-navOpacity }">
    <a href="https://kirainmoe.com/">
        <div class="single-column-header-title">宇宙よりも遠い場所</div>
        

    </a>
</div>
            <div id="content">
<div ref="streamContainer" class="stream-container">
    <div class="post-list-container post-list-container-shadow">
        <div class="post">
            
            
            

            <div class="post-head-wrapper-text-only"
                 style="background-image: url('/')">
                <div class="post-title">
                    Golang 学习笔记 （1）
                    <div class="post-meta">
                        <time itemprop="datePublished">
                            2018-07-28 09:51
                        </time>

                        

                        
                            <i class="material-icons" style="">label</i>
                            
                                <a href="/tags/note">note</a>
                                &nbsp;
                            
                                <a href="/tags/golang">golang</a>
                                &nbsp;
                            
                        
                    </div>
                </div>
            </div>
            
            <div class="post-body-wrapper">
                <div class="post-body">
                    <p>把 Hexo 换成了基于 Go 的 Hugo，所以有必要学一下 Golang 了（</p>

<p>之前也一直在想学个新的语言，一直在纠结选什么好，刚巧就是你了。</p>

<blockquote>
<p>Table of Content</p>
</blockquote>

<!-- TOC -->

<ul>
<li><a href="#0x01-包">0x01 包</a></li>
<li><a href="#0x02-函数">0x02 函数</a></li>
<li><a href="#0x03-返回值">0x03 返回值</a></li>
<li><a href="#0x04-变量">0x04 变量</a></li>
<li><a href="#0x05-变量类型">0x05 变量类型</a></li>
<li><a href="#0x06-类型转换">0x06 类型转换</a></li>
<li><a href="#0x07-常量">0x07 常量</a></li>
<li><a href="#0x08-循环">0x08 循环</a></li>
<li><a href="#0x09-判断">0x09 判断</a>

<ul>
<li><a href="#if-else-结构">if else 结构</a></li>
<li><a href="#switch-结构">switch 结构</a></li>
</ul></li>
<li><a href="#0x10-defer">0x10 defer</a></li>
<li><a href="#0x11-指针">0x11 指针</a></li>
<li><a href="#0x12-结构体">0x12 结构体</a></li>
<li><a href="#0x13-数组">0x13 数组</a></li>
<li><a href="#0x14-切片">0x14 切片</a></li>
<li><a href="#0x15-make">0x15 make</a></li>
<li><a href="#0x16-range-遍历">0x16 range 遍历</a></li>
<li><a href="#0x17-映射">0x17 映射</a></li>
<li><a href="#0x18-函数值和函数的闭包">0x18 函数值和函数的闭包</a></li>
</ul>

<!-- /TOC -->

<h1 id="0x01-包">0x01 包</h1>

<p>Go 程序类似 Java，由包构成，并且程序总是从 main 包开始运行。包名与导入路径的最后一个元素相同。</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#f92672">package</span> <span style="color:#a6e22e">main</span>    <span style="color:#75715e">// 声明当前文件所属的包，不需要引号
</span><span style="color:#75715e"></span><span style="color:#f92672">import</span> <span style="color:#e6db74">&#34;fmt&#34;</span>    <span style="color:#75715e">// 导入包，需要引号
</span><span style="color:#75715e"></span><span style="color:#f92672">import</span> (
    <span style="color:#e6db74">&#34;os&#34;</span>
    <span style="color:#e6db74">&#34;math/rand&#34;</span>
)   <span style="color:#f92672">/</span><span style="color:#f92672">/</span> <span style="color:#a6e22e">这样也可以</span></code></pre></div>
<p>导入却未被使用的包编译器会报错。</p>

<p>Go 中如果一个函数/方法/变量/常量名字以大写字母开头，表示它已经被导出。如：</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#f92672">package</span> <span style="color:#a6e22e">main</span>
<span style="color:#f92672">import</span> <span style="color:#e6db74">&#34;fmt&#34;</span>
<span style="color:#f92672">import</span> <span style="color:#e6db74">&#34;math&#34;</span>
<span style="color:#66d9ef">func</span> <span style="color:#a6e22e">main</span>() {
    <span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#a6e22e">math</span>.<span style="color:#a6e22e">Pi</span>)    <span style="color:#75715e">// 3.141592653589793
</span><span style="color:#75715e"></span>    <span style="color:#75715e">// fmt.Println(math.pi)  unexported, return undefined
</span><span style="color:#75715e"></span>}</code></pre></div>
<p>再如上述代码中，<code>Println</code> 是 <code>fmt</code> 包导出的一个方法。</p>

<h1 id="0x02-函数">0x02 函数</h1>

<p>定义函数格式如下：</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#66d9ef">func</span> [<span style="color:#a6e22e">functionName</span>] ([<span style="color:#a6e22e">param1</span> <span style="color:#a6e22e">paramType</span>], [<span style="color:#a6e22e">param2</span> <span style="color:#a6e22e">paramType</span>]<span style="color:#f92672">...</span>) [<span style="color:#a6e22e">returnValType</span>] {
    <span style="color:#75715e">// ...
</span><span style="color:#75715e"></span>    <span style="color:#66d9ef">return</span> <span style="color:#75715e">// ...
</span><span style="color:#75715e"></span>}</code></pre></div>
<p>与 C/C++/Java 的区别在于变量的类型在变量名之后而不是之前。另外，若有多个参数的类型相同，则可以简写：</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#66d9ef">func</span> <span style="color:#a6e22e">add</span>(<span style="color:#a6e22e">x</span> <span style="color:#66d9ef">int</span>, <span style="color:#a6e22e">y</span> <span style="color:#66d9ef">int</span>) <span style="color:#66d9ef">int</span> {
    <span style="color:#66d9ef">return</span> <span style="color:#a6e22e">x</span> <span style="color:#f92672">+</span> <span style="color:#a6e22e">y</span>
}

<span style="color:#66d9ef">func</span> <span style="color:#a6e22e">dec</span>(<span style="color:#a6e22e">x</span>, <span style="color:#a6e22e">y</span> <span style="color:#66d9ef">int</span>) <span style="color:#66d9ef">int</span> {
    <span style="color:#66d9ef">return</span> <span style="color:#a6e22e">x</span> <span style="color:#f92672">-</span> <span style="color:#a6e22e">y</span>
}</code></pre></div>
<h1 id="0x03-返回值">0x03 返回值</h1>

<p>Go 语言支持一个函数中返回多个值：</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#f92672">package</span> <span style="color:#a6e22e">main</span>
<span style="color:#f92672">import</span> <span style="color:#e6db74">&#34;fmt&#34;</span>
<span style="color:#66d9ef">func</span> <span style="color:#a6e22e">swap</span>(<span style="color:#a6e22e">x</span>, <span style="color:#a6e22e">y</span>: <span style="color:#66d9ef">string</span>) (<span style="color:#66d9ef">string</span>, <span style="color:#66d9ef">string</span>) {
    <span style="color:#66d9ef">return</span> <span style="color:#a6e22e">y</span>, <span style="color:#a6e22e">x</span>
}
<span style="color:#66d9ef">func</span> <span style="color:#a6e22e">main</span>() {
    <span style="color:#a6e22e">a</span>, <span style="color:#a6e22e">b</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">swap</span>(<span style="color:#e6db74">&#34;hello&#34;</span>, <span style="color:#e6db74">&#34;world&#34;</span>)
    <span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#a6e22e">a</span>, <span style="color:#a6e22e">b</span>)   <span style="color:#75715e">// world hello
</span><span style="color:#75715e"></span>}</code></pre></div>
<p>还有“返回值命名”这种操作。直接在声明返回值的时候写下返回值的变量名：</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#66d9ef">func</span> <span style="color:#a6e22e">split</span>(<span style="color:#a6e22e">sum</span> <span style="color:#66d9ef">int</span>) (<span style="color:#a6e22e">x</span>, <span style="color:#a6e22e">y</span> <span style="color:#66d9ef">int</span>) {
    <span style="color:#a6e22e">x</span> = <span style="color:#a6e22e">sum</span> <span style="color:#f92672">*</span> <span style="color:#ae81ff">4</span> <span style="color:#f92672">/</span> <span style="color:#ae81ff">9</span> <span style="color:#75715e">// 不需要再定义了
</span><span style="color:#75715e"></span>    <span style="color:#a6e22e">y</span> = <span style="color:#a6e22e">sum</span> <span style="color:#f92672">-</span> <span style="color:#a6e22e">x</span>
    <span style="color:#66d9ef">return</span>          <span style="color:#75715e">// 直接返回 x,y
</span><span style="color:#75715e"></span>}</code></pre></div>
<p>这样可以一定程度上省掉注释写文档（</p>

<p><code>:=</code> 运算符相当于定义变量后直接赋值：</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#66d9ef">var</span> <span style="color:#a6e22e">a</span> <span style="color:#66d9ef">int</span>
<span style="color:#a6e22e">a</span> = <span style="color:#ae81ff">233</span>
<span style="color:#75715e">// just the same as..
</span><span style="color:#75715e"></span><span style="color:#a6e22e">b</span> <span style="color:#f92672">:=</span> <span style="color:#ae81ff">233</span></code></pre></div>
<h1 id="0x04-变量">0x04 变量</h1>

<p>上文提到用 <code>var [variableName1], [variableName2] [variableType]</code> 声明一个变量.若想在声明变量时初始化值，可以这样：</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#66d9ef">var</span> <span style="color:#a6e22e">a</span> <span style="color:#66d9ef">bool</span> = <span style="color:#66d9ef">false</span>
<span style="color:#66d9ef">var</span> <span style="color:#a6e22e">x</span>, <span style="color:#a6e22e">y</span> <span style="color:#66d9ef">int</span> = <span style="color:#ae81ff">1</span>, <span style="color:#ae81ff">2</span>
<span style="color:#a6e22e">t</span> <span style="color:#f92672">:=</span> <span style="color:#e6db74">&#34;naive&#34;</span>            <span style="color:#75715e">// 如果有初始值，Go 可以进行类型推断
</span><span style="color:#75715e"></span>
<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#a6e22e">a</span>, <span style="color:#a6e22e">x</span>, <span style="color:#a6e22e">y</span>, <span style="color:#a6e22e">t</span>)</code></pre></div>
<p>声明完不用的变量同样会使编译器报错。需要注意 <code>:=</code> 不能在函数作用于外部使用。如：</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#f92672">package</span> <span style="color:#a6e22e">main</span>
<span style="color:#f92672">import</span> <span style="color:#e6db74">&#34;fmt&#34;</span>
<span style="color:#a6e22e">a</span> <span style="color:#f92672">:=</span> <span style="color:#ae81ff">233</span>        <span style="color:#75715e">// do not declare a variable like this
</span><span style="color:#75715e"></span><span style="color:#66d9ef">func</span> <span style="color:#a6e22e">main</span>() {
    <span style="color:#75715e">// ...
</span><span style="color:#75715e"></span>}</code></pre></div>
<h1 id="0x05-变量类型">0x05 变量类型</h1>

<p>Go 的基本类型……</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#66d9ef">bool</span>    <span style="color:#75715e">// 布尔
</span><span style="color:#75715e"></span>
<span style="color:#66d9ef">string</span>  <span style="color:#75715e">// 字符串
</span><span style="color:#75715e"></span>
<span style="color:#75715e">// 整型，其中 int, uint, uintptr 的位宽由操作系统位数决定
</span><span style="color:#75715e"></span><span style="color:#66d9ef">int</span>  <span style="color:#66d9ef">int8</span>  <span style="color:#66d9ef">int16</span>  <span style="color:#66d9ef">int32</span>  <span style="color:#66d9ef">int64</span>
<span style="color:#66d9ef">uint</span> <span style="color:#66d9ef">uint8</span> <span style="color:#66d9ef">uint16</span> <span style="color:#66d9ef">uint32</span> <span style="color:#66d9ef">uint64</span> <span style="color:#66d9ef">uintptr</span> <span style="color:#75715e">// unsigned
</span><span style="color:#75715e"></span>
<span style="color:#66d9ef">byte</span> <span style="color:#75715e">// uint8 的别名
</span><span style="color:#75715e"></span>
<span style="color:#66d9ef">rune</span> <span style="color:#75715e">// int32 的别名, 表示一个 Unicode 码点
</span><span style="color:#75715e"></span>
<span style="color:#66d9ef">float32</span> <span style="color:#66d9ef">float64</span> <span style="color:#75715e">// 浮点，Go 没有 double
</span><span style="color:#75715e"></span>
<span style="color:#66d9ef">complex64</span> <span style="color:#66d9ef">complex128</span>    <span style="color:#f92672">/</span><span style="color:#f92672">/</span> <span style="color:#a6e22e">复数</span></code></pre></div><div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#f92672">package</span> <span style="color:#a6e22e">main</span>

<span style="color:#f92672">import</span> (
    <span style="color:#e6db74">&#34;fmt&#34;</span>
    <span style="color:#e6db74">&#34;math/cmplx&#34;</span>
)

<span style="color:#75715e">// 定义多个变量也可以因式分解关键字
</span><span style="color:#75715e"></span><span style="color:#66d9ef">var</span> (
    <span style="color:#a6e22e">maxInt</span> <span style="color:#66d9ef">uint64</span> = <span style="color:#ae81ff">1</span> <span style="color:#f92672">&lt;&lt;</span> <span style="color:#ae81ff">64</span> <span style="color:#f92672">-</span> <span style="color:#ae81ff">1</span> <span style="color:#75715e">// 2^64-1
</span><span style="color:#75715e"></span>    <span style="color:#a6e22e">z</span>      <span style="color:#66d9ef">complex128</span> = <span style="color:#a6e22e">cmplx</span>.<span style="color:#a6e22e">Sqrt</span>(<span style="color:#f92672">-</span><span style="color:#ae81ff">5</span> <span style="color:#f92672">+</span> <span style="color:#ae81ff">12i</span>)
)

<span style="color:#66d9ef">func</span> <span style="color:#a6e22e">main</span>() {
    <span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#e6db74">&#34;Type: %t Value: %v\n&#34;</span>, <span style="color:#a6e22e">maxInt</span>, <span style="color:#a6e22e">maxInt</span>)
    <span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#e6db74">&#34;Type: %t Value: %v\n&#34;</span>, <span style="color:#a6e22e">z</span>, <span style="color:#a6e22e">z</span>)
}</code></pre></div>
<p>Println<code>中的占位符：</code>%t<code>表示变量类型，</code>%v<code>表示变量值. 当然你可以用</code>fmt.Printf()` 然后写那些格式占位符。</p>

<p>如果没有对已声明的变量赋值，那么他们的默认值为 0/false/空字符串。</p>

<h1 id="0x06-类型转换">0x06 类型转换</h1>

<p>可以用 <code>var a type = type(b)</code> 格式。</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#66d9ef">var</span> <span style="color:#a6e22e">i</span> <span style="color:#66d9ef">int</span> = <span style="color:#ae81ff">233</span>
<span style="color:#66d9ef">var</span> <span style="color:#a6e22e">f</span> <span style="color:#66d9ef">float64</span> = float64(<span style="color:#a6e22e">i</span>)
<span style="color:#a6e22e">u</span> <span style="color:#f92672">:=</span> uint(<span style="color:#a6e22e">f</span>)</code></pre></div>
<p>与 C 不同的是，Go 在不同类型的项之间赋值时需要显式转换。</p>

<h1 id="0x07-常量">0x07 常量</h1>

<p>声明常量在其前面加上关键字 <code>const</code>, 注意常量不能用 <code>:=</code> 语法声明：</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#66d9ef">const</span> <span style="color:#a6e22e">a</span> = <span style="color:#ae81ff">2333</span>
<span style="color:#66d9ef">const</span> <span style="color:#a6e22e">Pi</span> <span style="color:#66d9ef">float64</span> = <span style="color:#ae81ff">3.14</span>
<span style="color:#66d9ef">const</span> <span style="color:#a6e22e">World</span> = <span style="color:#e6db74">&#34;世界&#34;</span>
<span style="color:#66d9ef">const</span> <span style="color:#a6e22e">fake</span> <span style="color:#66d9ef">bool</span> = <span style="color:#66d9ef">false</span></code></pre></div>
<h1 id="0x08-循环">0x08 循环</h1>

<p>Go 只有 for 循环的结构……虽然 for 可以替代 while 但是有时候还是写 while 比较方便的呢。与 C/C++/JS 等语言的区别在于省略了把初始化语句、条件表达式、后置语句括起来的括号，但是仍然保留大括号。</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#f92672">package</span> <span style="color:#a6e22e">main</span>
<span style="color:#f92672">import</span> <span style="color:#e6db74">&#34;fmt&#34;</span>
<span style="color:#66d9ef">func</span> <span style="color:#a6e22e">main</span>() {
	<span style="color:#a6e22e">sum</span> <span style="color:#f92672">:=</span> <span style="color:#ae81ff">0</span>
	<span style="color:#66d9ef">for</span> <span style="color:#a6e22e">i</span> <span style="color:#f92672">:=</span> <span style="color:#ae81ff">0</span>; <span style="color:#a6e22e">i</span> &lt; <span style="color:#ae81ff">10</span>; <span style="color:#a6e22e">i</span><span style="color:#f92672">++</span> {
		<span style="color:#a6e22e">sum</span> <span style="color:#f92672">+=</span> <span style="color:#a6e22e">i</span>
	}
	<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#a6e22e">sum</span>)
}</code></pre></div>
<p>如果去掉初始化和后置语句就变成类似 while 了：</p>
<pre><code>for ; condition; {

}</code></pre>
<p>其实……C 的 while 就是 Go 中的 for（ 所以当初始化语句和后置语句没有的时候你甚至可以省略分号，这样 for 就成了 while 了：</p>
<pre><code>package main
import "fmt"
func main() {
	sum := 1
	for sum < 1000 {
		sum += sum
	}
	fmt.Println(sum)
}</code></pre>
<p>省略循环条件下的无限循环：</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#66d9ef">for</span> {
    <span style="color:#75715e">// do something infinity
</span><span style="color:#75715e"></span>}</code></pre></div>
<p>循环的控制语句和其他语言类似，使用 <code>break</code> 语句退出循环结构，使用 <code>continue</code> 语句继续下一个循环。</p>

<h1 id="0x09-判断">0x09 判断</h1>

<h2 id="if-else-结构">if else 结构</h2>

<p>Go 的 if 语句与 for 类似，条件表达式外不需要小括号，而逻辑部分需要大括号。</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#66d9ef">func</span> <span style="color:#a6e22e">sqrt</span>(<span style="color:#a6e22e">x</span> <span style="color:#66d9ef">float64</span>) <span style="color:#66d9ef">string</span> {
	<span style="color:#66d9ef">if</span> <span style="color:#a6e22e">x</span> &lt; <span style="color:#ae81ff">0</span> {
		<span style="color:#66d9ef">return</span> <span style="color:#a6e22e">sqrt</span>(<span style="color:#f92672">-</span><span style="color:#a6e22e">x</span>) <span style="color:#f92672">+</span> <span style="color:#e6db74">&#34;i&#34;</span>
	} <span style="color:#66d9ef">else</span> {
        <span style="color:#66d9ef">return</span> <span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Sprint</span>(<span style="color:#a6e22e">math</span>.<span style="color:#a6e22e">Sqrt</span>(<span style="color:#a6e22e">x</span>))
    }
}</code></pre></div>
<p>区别于其他语言，Go 允许你在执行 if 的判断前进行初始化，和 for 的初始化语句类似</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#66d9ef">func</span> <span style="color:#a6e22e">pow</span>(<span style="color:#a6e22e">x</span>, <span style="color:#a6e22e">n</span>, <span style="color:#a6e22e">lim</span> <span style="color:#66d9ef">float64</span>) <span style="color:#66d9ef">float64</span> {
	<span style="color:#66d9ef">if</span> <span style="color:#a6e22e">v</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">math</span>.<span style="color:#a6e22e">Pow</span>(<span style="color:#a6e22e">x</span>, <span style="color:#a6e22e">n</span>); <span style="color:#a6e22e">v</span> &lt; <span style="color:#a6e22e">lim</span> {
		<span style="color:#66d9ef">return</span> <span style="color:#a6e22e">v</span>
	}
	<span style="color:#66d9ef">return</span> <span style="color:#a6e22e">lim</span>  <span style="color:#75715e">// 注意，初始化语句的作用域仅限于大括号内，这里如果访问 v 就是 undefined
</span><span style="color:#75715e"></span>}</code></pre></div>
<h2 id="switch-结构">switch 结构</h2>

<p>与其他语言类似并继承<s>Go 特色</s>，条件部分不需要小括号，可以有初始化语句。但还有一点与其它语言的不同在于 Go 的 switch 中 case 结束后不需要 break，Go 会自动帮你添加而不会运行选定 case 之后的所有 case（除非你指定了 fallthrough）.</p>

<p>Go 的 case 不需要是常量，取值不用是整数。</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#f92672">package</span> <span style="color:#a6e22e">main</span>
<span style="color:#f92672">import</span> (
	<span style="color:#e6db74">&#34;fmt&#34;</span>
	<span style="color:#e6db74">&#34;runtime&#34;</span>
)
<span style="color:#66d9ef">func</span> <span style="color:#a6e22e">main</span>() {
	<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Print</span>(<span style="color:#e6db74">&#34;Go runs on &#34;</span>)
	<span style="color:#66d9ef">switch</span> <span style="color:#a6e22e">os</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">runtime</span>.<span style="color:#a6e22e">GOOS</span>; <span style="color:#a6e22e">os</span> {
	<span style="color:#66d9ef">case</span> <span style="color:#e6db74">&#34;darwin&#34;</span>:
		<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#e6db74">&#34;OS X.&#34;</span>)
	<span style="color:#66d9ef">case</span> <span style="color:#e6db74">&#34;linux&#34;</span>:
		<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#e6db74">&#34;Linux.&#34;</span>)
	<span style="color:#66d9ef">default</span>:
		<span style="color:#75715e">// freebsd, openbsd,
</span><span style="color:#75715e"></span>		<span style="color:#75715e">// plan9, windows...
</span><span style="color:#75715e"></span>		<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Printf</span>(<span style="color:#e6db74">&#34;%s.&#34;</span>, <span style="color:#a6e22e">os</span>)
	}
}</code></pre></div>
<h1 id="0x10-defer">0x10 defer</h1>

<p>defer 语句将函数推迟到外层函数返回后进行，如：</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#66d9ef">func</span> <span style="color:#a6e22e">main</span>() {
	<span style="color:#66d9ef">defer</span> <span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#e6db74">&#34;world&#34;</span>)
	<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#e6db74">&#34;hello&#34;</span>)
}</code></pre></div>
<p>程序先输出 hello, 等待 main 函数执行完返回后输出 world. 注意 defer 推迟的函数是压入栈（后进先出）中的，也就是说：</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#66d9ef">func</span> <span style="color:#a6e22e">main</span>() {
	<span style="color:#66d9ef">defer</span> <span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#e6db74">&#34;world&#34;</span>)
	<span style="color:#66d9ef">defer</span> <span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#e6db74">&#34;happy&#34;</span>)
	<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#e6db74">&#34;hello&#34;</span>)
}</code></pre></div>
<p>以上程序的输出顺序是 hello happy world 而不是 hello world happy.</p>

<h1 id="0x11-指针">0x11 指针</h1>

<p>定义一个指向 int 类型变量的指针：<code>var p *int</code>，定义方法和 C/C++ 类似。</p>

<p>同样地，<code>&amp;</code> 和 <code>*</code> 运算符的效果也是相同的。但是 Go 里没有指针运算（啥玩意啊.jpg）</p>

<p>&amp; 操作符会生成一个指向其操作数的指针。</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#a6e22e">i</span> <span style="color:#f92672">:=</span> <span style="color:#ae81ff">233</span>
<span style="color:#a6e22e">p</span> = <span style="color:#f92672">&amp;</span><span style="color:#a6e22e">i</span></code></pre></div>
<ul>
<li><p>操作符表示指针指向的底层值。</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#f92672">*</span><span style="color:#a6e22e">p</span>) <span style="color:#75715e">// 通过指针 p 读取 i
</span><span style="color:#75715e"></span><span style="color:#f92672">*</span><span style="color:#a6e22e">p</span> = <span style="color:#ae81ff">666</span>        <span style="color:#75715e">// 通过指针 p 设置 i
</span><span style="color:#75715e"></span><span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#a6e22e">i</span>)  <span style="color:#f92672">/</span><span style="color:#f92672">/</span> <span style="color:#ae81ff">666</span></code></pre></div></li>
</ul>

<h1 id="0x12-结构体">0x12 结构体</h1>

<p>结构体定义格式如下：</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#66d9ef">type</span> <span style="color:#a6e22e">StructName</span> <span style="color:#66d9ef">struct</span> {
    <span style="color:#a6e22e">member1</span> <span style="color:#a6e22e">type1</span>
    <span style="color:#a6e22e">member2</span> <span style="color:#a6e22e">type2</span>
    <span style="color:#75715e">// ...
</span><span style="color:#75715e"></span>}</code></pre></div>
<p>定义结构体及其类型的变量示意：</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#f92672">package</span> <span style="color:#a6e22e">main</span>
<span style="color:#f92672">import</span> <span style="color:#e6db74">&#34;fmt&#34;</span>
<span style="color:#66d9ef">type</span> <span style="color:#a6e22e">Vertex</span> <span style="color:#66d9ef">struct</span> {
	<span style="color:#a6e22e">X</span> <span style="color:#66d9ef">int</span>
	<span style="color:#a6e22e">Y</span> <span style="color:#66d9ef">int</span>
}
<span style="color:#66d9ef">func</span> <span style="color:#a6e22e">main</span>() {
	<span style="color:#a6e22e">t</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">Vertex</span>{<span style="color:#ae81ff">2</span>, <span style="color:#ae81ff">3</span>}
	<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#a6e22e">Vertex</span>{<span style="color:#ae81ff">1</span>, <span style="color:#ae81ff">2</span>})
	<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#a6e22e">t</span>)
}</code></pre></div>
<p>与 C/C++ 类似，结构体成员用 <code>.</code> 运算符访问；当拥有一个结构体指正的时候，那么……还是可以用 <code>.</code> 运算符访问。当然。你想用 <code>(*ptr).member</code> 访问也可以呀，只是 Go 允许我们使用隐式间接引用：</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#66d9ef">func</span> <span style="color:#a6e22e">main</span>() {
	<span style="color:#a6e22e">v</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">Vertex</span>{<span style="color:#ae81ff">1</span>, <span style="color:#ae81ff">2</span>}
	<span style="color:#a6e22e">p</span> <span style="color:#f92672">:=</span> <span style="color:#f92672">&amp;</span><span style="color:#a6e22e">v</span>
	<span style="color:#a6e22e">v</span>.<span style="color:#a6e22e">X</span> = <span style="color:#ae81ff">1e8</span>
	<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#a6e22e">v</span>)
	<span style="color:#a6e22e">p</span>.<span style="color:#a6e22e">X</span> = <span style="color:#ae81ff">1e9</span>
	<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#a6e22e">v</span>)
}</code></pre></div>
<p>上文的赋值法，默认是第一个值赋给 X，第二个赋给 Y；对结构体的具体字段赋值则类似 JS 中的语法：</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#66d9ef">var</span> (
	<span style="color:#a6e22e">v1</span> = <span style="color:#a6e22e">Vertex</span>{<span style="color:#ae81ff">1</span>, <span style="color:#ae81ff">2</span>}  <span style="color:#75715e">// has type Vertex
</span><span style="color:#75715e"></span>	<span style="color:#a6e22e">v2</span> = <span style="color:#a6e22e">Vertex</span>{<span style="color:#a6e22e">X</span>: <span style="color:#ae81ff">1</span>}  <span style="color:#75715e">// Y:0 is implicit
</span><span style="color:#75715e"></span>	<span style="color:#a6e22e">v3</span> = <span style="color:#a6e22e">Vertex</span>{}      <span style="color:#75715e">// X:0 and Y:0
</span><span style="color:#75715e"></span>	<span style="color:#a6e22e">p</span>  = <span style="color:#f92672">&amp;</span><span style="color:#a6e22e">Vertex</span>{<span style="color:#ae81ff">1</span>, <span style="color:#ae81ff">2</span>} <span style="color:#75715e">// has type *Vertex
</span><span style="color:#75715e"></span>)</code></pre></div>
<p>特殊的前缀 &amp; 返回一个指向结构体的指针。</p>

<h1 id="0x13-数组">0x13 数组</h1>

<p>定义一个数组的格式：<code>var arrayName [arrayLength]typeName</code>，注意是否空格。</p>

<p>如：<code>var a [10]int</code>，a 是一个长度为 10 的 int 型数组。这样定义的数组是静态的，也就是说你定义完之后，a 的长度只能是 10 不能再改了。</p>

<h1 id="0x14-切片">0x14 切片</h1>

<p>每个数组的大小都是固定的。而切片则为数组元素提供动态大小的、灵活的视角。在实践中，切片比数组更常用。类型 []T 表示一个元素类型为 T 的切片。</p>

<p>切片通过两个下标来界定，即一个上界和一个下界，二者以冒号分隔：<code>a[low : high]</code></p>

<p>它会选择一个半开区间，包括第一个元素，但排除最后一个元素：<code>[low, high)</code>。如切片 <code>a[1:4]</code>，它包含 a 中下标从 1 到 3 的元素。</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#f92672">package</span> <span style="color:#a6e22e">main</span>
<span style="color:#f92672">import</span> <span style="color:#e6db74">&#34;fmt&#34;</span>
<span style="color:#66d9ef">func</span> <span style="color:#a6e22e">main</span>() {
	<span style="color:#a6e22e">primes</span> <span style="color:#f92672">:=</span> [<span style="color:#ae81ff">6</span>]<span style="color:#66d9ef">int</span>{<span style="color:#ae81ff">2</span>, <span style="color:#ae81ff">3</span>, <span style="color:#ae81ff">5</span>, <span style="color:#ae81ff">7</span>, <span style="color:#ae81ff">11</span>, <span style="color:#ae81ff">13</span>}
	<span style="color:#66d9ef">var</span> <span style="color:#a6e22e">s</span> []<span style="color:#66d9ef">int</span> = <span style="color:#a6e22e">primes</span>[<span style="color:#ae81ff">1</span>:<span style="color:#ae81ff">4</span>]
	<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#a6e22e">s</span>)
}</code></pre></div>
<p>切片并不存储任何数据，只是描述了底层数组中的一段。更改切片的元素会修改其底层数组中对应的元素。与它共享底层数组的切片都会观测到这些修改（可以理解为切片是对一个数组的部分引用）：</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#f92672">package</span> <span style="color:#a6e22e">main</span>

<span style="color:#f92672">import</span> <span style="color:#e6db74">&#34;fmt&#34;</span>

<span style="color:#66d9ef">func</span> <span style="color:#a6e22e">main</span>() {
	<span style="color:#a6e22e">names</span> <span style="color:#f92672">:=</span> [<span style="color:#ae81ff">4</span>]<span style="color:#66d9ef">string</span>{
		<span style="color:#e6db74">&#34;John&#34;</span>,
		<span style="color:#e6db74">&#34;Paul&#34;</span>,
		<span style="color:#e6db74">&#34;George&#34;</span>,
		<span style="color:#e6db74">&#34;Ringo&#34;</span>,
	}
	<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#a6e22e">names</span>)

	<span style="color:#a6e22e">a</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">names</span>[<span style="color:#ae81ff">0</span>:<span style="color:#ae81ff">2</span>]
	<span style="color:#a6e22e">b</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">names</span>[<span style="color:#ae81ff">1</span>:<span style="color:#ae81ff">3</span>]
	<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#a6e22e">a</span>, <span style="color:#a6e22e">b</span>)

	<span style="color:#a6e22e">b</span>[<span style="color:#ae81ff">0</span>] = <span style="color:#e6db74">&#34;XXX&#34;</span>
	<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#a6e22e">a</span>, <span style="color:#a6e22e">b</span>)
	<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#a6e22e">names</span>)
}</code></pre></div>
<p>切片的默认下界为 0，上界为切片/数组的长度。</p>

<p>切片拥有 长度 和 容量 两个属性。切片的长度就是它实际包含的元素个数；切片的容量是从它的第一个元素开始数，到其底层数组元素末尾的个数（最多可以容纳的元素个数）。</p>

<p>切片 <code>s</code> 的长度和容量可通过表达式 <code>len(s)</code> 和 <code>cap(s)</code> 来获取。</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#f92672">package</span> <span style="color:#a6e22e">main</span>
<span style="color:#f92672">import</span> <span style="color:#e6db74">&#34;fmt&#34;</span>
<span style="color:#66d9ef">func</span> <span style="color:#a6e22e">main</span>() {
	<span style="color:#a6e22e">s</span> <span style="color:#f92672">:=</span> []<span style="color:#66d9ef">int</span>{<span style="color:#ae81ff">2</span>, <span style="color:#ae81ff">3</span>, <span style="color:#ae81ff">5</span>, <span style="color:#ae81ff">7</span>, <span style="color:#ae81ff">11</span>, <span style="color:#ae81ff">13</span>}
	<span style="color:#a6e22e">printSlice</span>(<span style="color:#a6e22e">s</span>)

	<span style="color:#75715e">// Slice the slice to give it zero length.
</span><span style="color:#75715e"></span>	<span style="color:#a6e22e">s</span> = <span style="color:#a6e22e">s</span>[:<span style="color:#ae81ff">0</span>]
	<span style="color:#a6e22e">printSlice</span>(<span style="color:#a6e22e">s</span>)

	<span style="color:#75715e">// Extend its length.
</span><span style="color:#75715e"></span>	<span style="color:#a6e22e">s</span> = <span style="color:#a6e22e">s</span>[:<span style="color:#ae81ff">4</span>]
	<span style="color:#a6e22e">printSlice</span>(<span style="color:#a6e22e">s</span>)

	<span style="color:#75715e">// Drop its first two values.
</span><span style="color:#75715e"></span>	<span style="color:#a6e22e">s</span> = <span style="color:#a6e22e">s</span>[<span style="color:#ae81ff">2</span>:]
	<span style="color:#a6e22e">printSlice</span>(<span style="color:#a6e22e">s</span>)
}
<span style="color:#66d9ef">func</span> <span style="color:#a6e22e">printSlice</span>(<span style="color:#a6e22e">s</span> []<span style="color:#66d9ef">int</span>) {
	<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Printf</span>(<span style="color:#e6db74">&#34;len=%d cap=%d %v\n&#34;</span>, len(<span style="color:#a6e22e">s</span>), cap(<span style="color:#a6e22e">s</span>), <span style="color:#a6e22e">s</span>)
}</code></pre></div>
<p>输出：</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-markdown" data-lang="markdown">len=6 cap=6 [2 3 5 7 11 13]
len=0 cap=6 []
len=4 cap=6 [2 3 5 7]
len=2 cap=4 [5 7]</code></pre></div>
<p>切片的零值是 <code>nil</code>，类似其他语言的 <code>null</code>。<code>nil</code> 切片的长度和容量为 0 且没有底层数组。</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#66d9ef">var</span> <span style="color:#a6e22e">a</span> [<span style="color:#ae81ff">10</span>]<span style="color:#66d9ef">int</span>       <span style="color:#75715e">// 声明的是数组
</span><span style="color:#75715e"></span><span style="color:#66d9ef">var</span> <span style="color:#a6e22e">b</span> []<span style="color:#66d9ef">int</span>         <span style="color:#f92672">/</span><span style="color:#f92672">/</span> <span style="color:#a6e22e">声明的是一个</span> <span style="color:#66d9ef">nil</span> <span style="color:#a6e22e">切片</span></code></pre></div>
<h1 id="0x15-make">0x15 make</h1>

<p>内建函数 <code>make()</code> 可以创建切片，也是创造动态数组的方式。make 函数会分配一个元素为零值的数组并返回一个引用了它的切片，格式如下：</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#66d9ef">var</span> <span style="color:#a6e22e">name</span> = make([]<span style="color:#66d9ef">type</span>, <span style="color:#a6e22e">length</span>)     <span style="color:#75715e">// len(name) = length
</span><span style="color:#75715e"></span>
<span style="color:#75715e">// e.g.
</span><span style="color:#75715e"></span><span style="color:#a6e22e">a</span> <span style="color:#f92672">:=</span> make([]<span style="color:#66d9ef">int</span>, <span style="color:#ae81ff">5</span>)     <span style="color:#f92672">/</span><span style="color:#f92672">/</span> len(<span style="color:#a6e22e">a</span>) = <span style="color:#ae81ff">5</span></code></pre></div>
<p>若要指定该切片的容量，则需要向 <code>make()</code> 传入多余的参数：</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#a6e22e">name</span> <span style="color:#f92672">:=</span> make([]<span style="color:#66d9ef">type</span>, <span style="color:#a6e22e">from</span>, <span style="color:#a6e22e">to</span>)      <span style="color:#f92672">/</span><span style="color:#f92672">/</span> len(<span style="color:#a6e22e">name</span>) = <span style="color:#ae81ff">0</span>, cap(<span style="color:#a6e22e">name</span>) = <span style="color:#a6e22e">to</span></code></pre></div>
<p>如：</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#a6e22e">b</span> <span style="color:#f92672">:=</span> make([]<span style="color:#66d9ef">int</span>, <span style="color:#ae81ff">0</span>, <span style="color:#ae81ff">5</span>) <span style="color:#75715e">// len(b)=0, cap(b)=5
</span><span style="color:#75715e"></span>
<span style="color:#a6e22e">b</span> = <span style="color:#a6e22e">b</span>[:cap(<span style="color:#a6e22e">b</span>)] <span style="color:#75715e">// len(b)=5, cap(b)=5  emmmm
</span><span style="color:#75715e"></span><span style="color:#a6e22e">b</span> = <span style="color:#a6e22e">b</span>[<span style="color:#ae81ff">1</span>:]      <span style="color:#f92672">/</span><span style="color:#f92672">/</span> len(<span style="color:#a6e22e">b</span>)=<span style="color:#ae81ff">4</span>, cap(<span style="color:#a6e22e">b</span>)=<span style="color:#ae81ff">4</span></code></pre></div>
<p>切片套切片就成了二位切(shu)片(zu)；切片可以包含任意类型。</p>

<p>既然是动态数(qie)组(pian)就要可以动态修改数据嘛，比如向切片里添加新元素。Go 内建的 <code>append(s []T, vs ... T) []T</code> 函数就可以做到。</p>

<p>从函数原型中我们知道，<code>append()</code> 函数第一个参数是一个任意类型 <code>T</code> 的切片 <code>s</code>(如果这里理解 C++ 的 template 就更容易理解了)，接下来的几个参数分别是要加入切片 <code>s</code> 的 <code>T</code> 型数据，最后返回一个新的 <code>T</code> 型切片。新添加的值会出现在切片末尾。</p>

<p>当 s 的底层数组太小，不足以容纳所有给定的值时，它就会分配一个更大的数组。返回的切片会指向这个新分配的数组。<a href="https://blog.go-zh.org/go-slices-usage-and-internals">参考</a>。</p>

<h1 id="0x16-range-遍历">0x16 range 遍历</h1>

<p>对标 foreach，在 Go 中的遍历仍然用的是 for，但是有一个新的辅助关键字 range：当使用 for 循环遍历切片或映射的时候格式如下：</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#66d9ef">var</span> <span style="color:#a6e22e">pow</span> = []<span style="color:#66d9ef">int</span>{<span style="color:#ae81ff">1</span>, <span style="color:#ae81ff">2</span>, <span style="color:#ae81ff">4</span>, <span style="color:#ae81ff">8</span>, <span style="color:#ae81ff">16</span>, <span style="color:#ae81ff">32</span>, <span style="color:#ae81ff">64</span>, <span style="color:#ae81ff">128</span>}
<span style="color:#66d9ef">func</span> <span style="color:#a6e22e">main</span>() {
	<span style="color:#66d9ef">for</span> <span style="color:#a6e22e">index</span>, <span style="color:#a6e22e">value</span> <span style="color:#f92672">:=</span> <span style="color:#66d9ef">range</span> <span style="color:#a6e22e">pow</span> {
		<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Printf</span>(<span style="color:#e6db74">&#34;2**%d = %d\n&#34;</span>, <span style="color:#a6e22e">index</span>, <span style="color:#a6e22e">value</span>)
	}
}</code></pre></div>
<p>注意 <code>range</code> 循环时每次迭代会返回两个值 <code>index</code> 和 <code>value</code>，第一个值是在切片中的下表，第二个值则是真正的值（但是是一个副本，而不是引用）。</p>

<p>如果我们只需要值不需要下标？你会说多写一个不会死，但是 Go 是不允许无用变量出现的；将 <code>index</code> 用 <code>_</code> 代替即可：</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#66d9ef">for</span> <span style="color:#a6e22e">_</span>, <span style="color:#a6e22e">value</span> <span style="color:#f92672">:=</span> <span style="color:#66d9ef">range</span> <span style="color:#a6e22e">pow</span> {
    <span style="color:#75715e">// ...
</span><span style="color:#75715e"></span>}</code></pre></div>
<p>如果不需要值只要下标，去掉 <code>, value</code> 即可：</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#66d9ef">for</span> <span style="color:#a6e22e">index</span> <span style="color:#f92672">:=</span> <span style="color:#66d9ef">range</span> <span style="color:#a6e22e">pow</span> {
    <span style="color:#75715e">// ...
</span><span style="color:#75715e"></span>}</code></pre></div>
<h1 id="0x17-映射">0x17 映射</h1>

<p>数组只能以数字做下标，有时候我想以一个字符串啥的做下表怎么办？可以用 <code>map</code> 映射，这个就类似 C++ STL 的 map 的应用，只不过方法不同而已（</p>

<p>创建一个映射并赋值（注意空格）</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#66d9ef">var</span> <span style="color:#a6e22e">mapName</span> <span style="color:#66d9ef">map</span>[<span style="color:#a6e22e">keyType</span>]<span style="color:#a6e22e">valueType</span>

<span style="color:#75715e">// e.g. -----------
</span><span style="color:#75715e"></span>
<span style="color:#66d9ef">var</span> <span style="color:#a6e22e">m</span> <span style="color:#66d9ef">map</span>[<span style="color:#66d9ef">string</span>]<span style="color:#66d9ef">int</span>
<span style="color:#66d9ef">func</span> <span style="color:#a6e22e">main</span>() {
	<span style="color:#a6e22e">m</span> = make(<span style="color:#66d9ef">map</span>[<span style="color:#66d9ef">string</span>]<span style="color:#66d9ef">int</span>)
	<span style="color:#a6e22e">m</span>[<span style="color:#e6db74">&#34;abc&#34;</span>] = <span style="color:#ae81ff">123</span>
	<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#a6e22e">m</span>[<span style="color:#e6db74">&#34;abc&#34;</span>])
}</code></pre></div>
<p>对 map 直接赋值：</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#f92672">package</span> <span style="color:#a6e22e">main</span>
<span style="color:#f92672">import</span> <span style="color:#e6db74">&#34;fmt&#34;</span>
<span style="color:#66d9ef">type</span> <span style="color:#a6e22e">Vertex</span> <span style="color:#66d9ef">struct</span> {
	<span style="color:#a6e22e">Lat</span>, <span style="color:#a6e22e">Long</span> <span style="color:#66d9ef">float64</span>
}
<span style="color:#66d9ef">var</span> <span style="color:#a6e22e">m</span> = <span style="color:#66d9ef">map</span>[<span style="color:#66d9ef">string</span>]<span style="color:#a6e22e">Vertex</span>{
	<span style="color:#e6db74">&#34;Bell Labs&#34;</span>: <span style="color:#a6e22e">Vertex</span>{
		<span style="color:#ae81ff">40.68433</span>, <span style="color:#f92672">-</span><span style="color:#ae81ff">74.39967</span>,
	},
	<span style="color:#e6db74">&#34;Google&#34;</span>: <span style="color:#a6e22e">Vertex</span>{
		<span style="color:#ae81ff">37.42202</span>, <span style="color:#f92672">-</span><span style="color:#ae81ff">122.08408</span>,
	},
}
<span style="color:#66d9ef">func</span> <span style="color:#a6e22e">main</span>() {
	<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(<span style="color:#a6e22e">m</span>)
}</code></pre></div>
<p>上面对 <code>m</code> 的赋值中，可以对成员省略类型名：</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#66d9ef">var</span> <span style="color:#a6e22e">m</span> = <span style="color:#66d9ef">map</span>[<span style="color:#66d9ef">string</span>]<span style="color:#a6e22e">Vertex</span>{
	<span style="color:#e6db74">&#34;Bell Labs&#34;</span>: {<span style="color:#ae81ff">40.68433</span>, <span style="color:#f92672">-</span><span style="color:#ae81ff">74.39967</span>},
	<span style="color:#e6db74">&#34;Google&#34;</span>: {<span style="color:#ae81ff">37.42202</span>, <span style="color:#f92672">-</span><span style="color:#ae81ff">122.08408</span>},
}</code></pre></div>
<p>注意到，数组和映射的最后一个成员末尾要留一个逗号，这是 Go 的规范。</p>

<p>一些对映射的基本操作：</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#a6e22e">m</span>[<span style="color:#a6e22e">key</span>] = <span style="color:#a6e22e">element</span>	<span style="color:#75715e">// 在映射 m 中插入元素
</span><span style="color:#75715e"></span><span style="color:#a6e22e">elem</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">m</span>[<span style="color:#a6e22e">key</span>]		<span style="color:#75715e">// 获取元素
</span><span style="color:#75715e"></span>delete(<span style="color:#a6e22e">mapInstance</span>, <span style="color:#a6e22e">key</span>)	<span style="color:#75715e">// 从 mapInstance 中删除键值为 key 的元素
</span><span style="color:#75715e"></span><span style="color:#a6e22e">elem</span>, <span style="color:#a6e22e">ok</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">m</span>[<span style="color:#a6e22e">key</span>]	<span style="color:#f92672">/</span><span style="color:#f92672">/</span> <span style="color:#a6e22e">检测元素是否存在</span><span style="color:#960050;background-color:#1e0010">，</span><span style="color:#a6e22e">若存在则</span> <span style="color:#a6e22e">ok</span> <span style="color:#a6e22e">为</span> <span style="color:#66d9ef">true</span><span style="color:#960050;background-color:#1e0010">（</span><span style="color:#a6e22e">还有这种操作</span><span style="color:#960050;background-color:#1e0010">？</span><span style="color:#960050;background-color:#1e0010">？</span><span style="color:#960050;background-color:#1e0010">）</span></code></pre></div>
<h1 id="0x18-函数值和函数的闭包">0x18 函数值和函数的闭包</h1>

<p>函数本身是一种数据类型。函数可以是一个闭包，引用其函数体外的变量。</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-go" data-lang="go"><span style="color:#f92672">package</span> <span style="color:#a6e22e">main</span>
<span style="color:#f92672">import</span> <span style="color:#e6db74">&#34;fmt&#34;</span>
<span style="color:#66d9ef">func</span> <span style="color:#a6e22e">adder</span>() <span style="color:#66d9ef">func</span>(<span style="color:#66d9ef">int</span>) <span style="color:#66d9ef">int</span> {
	<span style="color:#a6e22e">sum</span> <span style="color:#f92672">:=</span> <span style="color:#ae81ff">0</span>
	<span style="color:#75715e">// 返回的是一个函数闭包
</span><span style="color:#75715e"></span>	<span style="color:#66d9ef">return</span> <span style="color:#66d9ef">func</span>(<span style="color:#a6e22e">x</span> <span style="color:#66d9ef">int</span>) <span style="color:#66d9ef">int</span> {
		<span style="color:#a6e22e">sum</span> <span style="color:#f92672">+=</span> <span style="color:#a6e22e">x</span>		<span style="color:#75715e">// 用了外部变量 sum
</span><span style="color:#75715e"></span>		<span style="color:#66d9ef">return</span> <span style="color:#a6e22e">sum</span>
	}
}
<span style="color:#66d9ef">func</span> <span style="color:#a6e22e">main</span>() {
	<span style="color:#a6e22e">pos</span>, <span style="color:#a6e22e">neg</span> <span style="color:#f92672">:=</span> <span style="color:#a6e22e">adder</span>(), <span style="color:#a6e22e">adder</span>()
	<span style="color:#66d9ef">for</span> <span style="color:#a6e22e">i</span> <span style="color:#f92672">:=</span> <span style="color:#ae81ff">0</span>; <span style="color:#a6e22e">i</span> &lt; <span style="color:#ae81ff">10</span>; <span style="color:#a6e22e">i</span><span style="color:#f92672">++</span> {
		<span style="color:#a6e22e">fmt</span>.<span style="color:#a6e22e">Println</span>(
			<span style="color:#a6e22e">pos</span>(<span style="color:#a6e22e">i</span>),
			<span style="color:#a6e22e">neg</span>(<span style="color:#f92672">-</span><span style="color:#ae81ff">2</span><span style="color:#f92672">*</span><span style="color:#a6e22e">i</span>),
		)
	}
}</code></pre></div>
                    <HR width="100%" id="EOF">
                    <p style="color:#777;">Last modified on 2018-07-28</p>
                </div>
                
            </div>
            
            
            <nav class="post-pagination">

                
                <a class="newer-posts" href="https://kirainmoe.com/blog/post/xiamen-gdg-devfest-2018-repo/">
                    Next<br>Xiamen GDG DevFest 2018 repo
                </a>
                
                
                
                <a class="older-posts" href="https://kirainmoe.com/blog/post/exgcd-and-gauss/">
                    Previous<br>被迫学习之拓展欧几里得算法 &amp; 高斯消元
                </a>
                
            </nav>
            <div class="post-comment-wrapper">
                
<div class="post-comment-wrapper">
<div id="disqus_thread"></div>
<script type="application/javascript">
    var disqus_config = function () {
    
    
    
    };
    (function() {
        if (["localhost", "127.0.0.1"].indexOf(window.location.hostname) != -1) {
            document.getElementById('disqus_thread').innerHTML = 'Disqus comments not available by default when the website is previewed locally.';
            return;
        }
        var d = document, s = d.createElement('script'); s.async = true;
        s.src = '//' + "yume-diary" + '.disqus.com/embed.js';
        s.setAttribute('data-timestamp', +new Date());
        (d.head || d.body).appendChild(s);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="https://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
</div>




            </div>
        </div>
    </div>
</div>

            </div><div id="single-column-footer">&copy;
	
	2016-2020 宇宙よりも遠い場所
	

/

<a href="https://creativecommons.org/licenses/by-sa/4.0/deed.zh">CC-BY-SA 4.0</a>

<br>

Published with <a href="https://gohugo.io">Hugo</a> / Theme <a href="https://github.com/amazingrise/hugo-theme-diary" title="Author: Rise @ amazingrise.net">Diary</a>
</div>
    	</div>
    <script src="https://kirainmoe.com//js/journal.js"></script>
    </body>
</html>
