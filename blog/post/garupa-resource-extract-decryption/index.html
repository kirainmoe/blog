<!DOCTYPE html>
<html><head>
<title>バンドリ!ガールズバンドパーティ!（BanG Dream! 少女乐团派对）游戏资源/歌曲解包</title>

<meta charset="utf-8">
<meta name="X-UA-Compatible" content="IE=edge">
<meta name="google-site-verification" content="">
<meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport">
<meta content="telephone=no" name="format-detection">
<meta name="renderer" content="webkit">
<meta name="theme-color" content="#ffffff">




<script type="application/javascript">
var doNotTrack = false;
if (!doNotTrack) {
	(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
	(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
	m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
	})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
	ga('create', 'UA-111347233-1', 'auto');
	
	ga('send', 'pageview');
}
</script>



<script src="/vendor/js/jquery.min.js" ></script>
<script src="/vendor/js/popper.min.js" ></script>
<script src="/vendor/js/bootstrap.min.js" ></script>
<script src="/vendor/js/smooth-scroll.polyfills.min.js" ></script>
<link type="text/css" rel="stylesheet" href="/vendor/css/bootstrap.min.css">
<script src="/vendor/js/vue.min.js" ></script>




<link rel="stylesheet" href="https://kirainmoe.com/scss/journal.min.d1b323a5bdb0e7b05730834eb664c761432cfb57d618b4efeb5a9417a66a4b44.css" integrity="sha256-0bMjpb2w57BXMINOtmTHYUMs&#43;1fWGLTv61qUF6ZqS0Q=" media="screen">

<script src="https://kirainmoe.com//js/loadCSS.js"></script>
<script src="https://kirainmoe.com//js/table.js"></script>


<script src="https://kirainmoe.com//js/toc.js"></script>


<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
      showProcessingMessages: false,
      messageStyle: "none", 
      jax: ["input/TeX", "output/HTML-CSS"],
      tex2jax: {
        inlineMath: [["$", "$"], ["\\(", "\\)"]],
        displayMath: [["$$", "$$"], ["\\[", "\\]"]],
        skipTags: ["script", "noscript", "style", "textarea", "pre", "code", "a"]
      },
      "HTML-CSS": {
        availableFonts: ["STIX", "TeX"], 
        showMathMenu: false
      }
  });
</script>
<script type="text/javascript" async src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML"></script>

<script src="https://unpkg.com/muse-player/dist/assets/muse-player.js"></script>

<script>
    loadCSS("https://fonts.googleapis.com/css?family=Lora|Montserrat|Fira+Mono|Noto+Serif+SC|Material+Icons");
</script>

</head><body>
    	<div id="app"><div ref="sideContainer" class="side-container">
    
    <a class="a-block nav-head false" href="https://kirainmoe.com/">
    
        <div class="nav-title">
            宇宙よりも遠い場所
        </div>
        
    </a>

    <div class="nav-link-list">
        
        
            
                
                
                <a class="a-block nav-link-item false" href="/pages/guestbook">
                    留言板
                </a>
        
            
                
                
                <a class="a-block nav-link-item false" href="/pages/friends">
                    友情链接
                </a>
        
            
                
                
                <a class="a-block nav-link-item false" href="/tags">
                    标签
                </a>
        
            
                
                
                <a class="a-block nav-link-item false" href="/pages/about">
                    关于
                </a>
        
    </div>

    

    <div class="nav-footer">
        &copy;
	
	2016-2020 宇宙よりも遠い場所
	

/

<a href="https://creativecommons.org/licenses/by-sa/4.0/deed.zh">CC-BY-SA 4.0</a>

<br>

Published with <a href="https://gohugo.io">Hugo</a> / Theme <a href="https://github.com/amazingrise/hugo-theme-diary" title="Author: Rise @ amazingrise.net">Diary</a>

    </div>

    
    <script src="https://tj.kirainmoe.com/cgi-bin/inject_scriipt.cgi"></script>
    
</div><div ref="extraContainer" class="extra-container">
    
    <div class="toc animated-visibility" :class="{ invisible: scrollY <= 140 }">


	<div class="toc-content">
	
		
		
		
		<center>- CATALOG -</center>
			
				
				
					
						
						
							<ul>
						
						
								<li>
				 					<a href="#%e7%bb%bc%e8%bf%b0" v-on:click="closeDrawer" id="综述-nav">
										 综述
									</a>
								</li>
						
							</ul>
						
					
				
			
				
				
					
						
						
							<ul>
						
						
								<li>
				 					<a href="#%e6%89%80%e9%9c%80%e5%b7%a5%e5%85%b7" v-on:click="closeDrawer" id="所需工具-nav">
										 所需工具
									</a>
								</li>
						
							</ul>
						
					
				
			
				
				
					
						
						
							<ul>
						
						
								<li>
				 					<a href="#%e7%ac%ac%e4%b8%80%e6%ad%a5-%e8%8e%b7%e5%8f%96-garupa-%e8%b5%84%e6%ba%90%e6%96%87%e4%bb%b6" v-on:click="closeDrawer" id="第一步-获取-garupa-资源文件-nav">
										 第一步：获取 garupa 资源文件
									</a>
								</li>
						
							</ul>
						
					
				
			
				
				
					
						
						
							<ul>
						
							<ul>
						
						
								<li>
				 					<a href="#%e6%96%b9%e6%b3%95-1" v-on:click="closeDrawer" id="方法-1-nav">
										 方法 1
									</a>
								</li>
						
							</ul>
						
							</ul>
						
					
				
			
				
				
					
						
						
							<ul>
						
							<ul>
						
						
								<li>
				 					<a href="#%e6%96%b9%e6%b3%95-2" v-on:click="closeDrawer" id="方法-2-nav">
										 方法 2
									</a>
								</li>
						
							</ul>
						
							</ul>
						
					
				
			
				
				
					
						
						
							<ul>
						
						
								<li>
				 					<a href="#%e7%ac%ac%e4%ba%8c%e6%ad%a5-%e8%a7%a3%e5%8e%8b-unity-assets-bundle-%e6%96%87%e4%bb%b6" v-on:click="closeDrawer" id="第二步-解压-unity-assets-bundle-文件-nav">
										 第二步：解压 Unity Assets Bundle 文件
									</a>
								</li>
						
							</ul>
						
					
				
			
				
				
					
						
						
							<ul>
						
						
								<li>
				 					<a href="#%e7%ac%ac%e4%b8%89%e6%ad%a5-%e8%a7%a3%e5%8e%8b-%e8%a7%a3%e5%af%86-acb-%e6%96%87%e4%bb%b6%e5%be%97%e5%88%b0%e5%a3%b0%e9%9f%b3%e6%96%87%e4%bb%b6" v-on:click="closeDrawer" id="第三步-解压-解密-acb-文件得到声音文件-nav">
										 第三步：解压、解密 acb 文件得到声音文件
									</a>
								</li>
						
							</ul>
						
					
				
			
				
				
					
						
						
							<ul>
						
							<ul>
						
						
								<li>
				 					<a href="#%e6%96%b9%e6%b3%95%e4%b8%80-%e4%bd%bf%e7%94%a8-acbdecrypter" v-on:click="closeDrawer" id="方法一-使用-acbdecrypter-nav">
										 方法一：使用 acbDecrypter
									</a>
								</li>
						
							</ul>
						
							</ul>
						
					
				
			
				
				
					
						
						
							<ul>
						
							<ul>
						
						
								<li>
				 					<a href="#%e6%96%b9%e6%b3%95%e4%ba%8c-%e4%bd%bf%e7%94%a8-vgmtoolbox-hcadecoder" v-on:click="closeDrawer" id="方法二-使用-vgmtoolbox-hcadecoder-nav">
										 方法二：使用 vgmtoolbox &#43; HCADecoder
									</a>
								</li>
						
							</ul>
						
							</ul>
						
					
				
			
				
				
					
						
						
							<ul>
						
						
								<li>
				 					<a href="#%e7%bb%86%e8%8a%82" v-on:click="closeDrawer" id="细节-nav">
										 细节
									</a>
								</li>
						
							</ul>
						
					
				
			
				
				
					
						
						
							<ul>
						
							<ul>
						
						
								<li>
				 					<a href="#%e4%bd%bf%e7%94%a8-assetstudio-%e6%8f%90%e5%8f%96%e7%9a%84%e7%bf%bb%e5%94%b1%e6%9b%b2%e7%9a%84%e8%a7%a3%e5%af%86" v-on:click="closeDrawer" id="使用-assetstudio-提取的翻唱曲的解密-nav">
										 使用 AssetStudio 提取的翻唱曲的解密
									</a>
								</li>
						
							</ul>
						
							</ul>
						
					
				
			
				
				
					
						
						
							<ul>
						
							<ul>
						
						
								<li>
				 					<a href="#%e6%8f%90%e5%8f%96%e8%a7%a3%e5%af%86-acb-%e7%9a%84%e5%af%86%e9%92%a5%e7%9a%84%e6%96%b9%e6%b3%95" v-on:click="closeDrawer" id="提取解密-acb-的密钥的方法-nav">
										 提取解密 ACB 的密钥的方法
									</a>
								</li>
						
							</ul>
						
							</ul>
						
					
				
			
				
				
					
						
						
							<ul>
						
						
								<li>
				 					<a href="#%e5%8f%82%e8%80%83%e6%96%87%e7%ab%a0" v-on:click="closeDrawer" id="参考文章-nav">
										 参考文章
									</a>
								</li>
						
							</ul>
						
					
				
			
	</div>

</div>
    
    <div class="pagination">
        <a id="globalBackToTop" class="pagination-action animated-visibility" href="#top" :class="{ invisible: scrollY == 0 }">
            <i class="material-icons pagination-action-icon">
                keyboard_arrow_up
            </i>
        </a>
        
    </div>
</div><div class="single-column-drawer-container" ref="drawer"
     v-bind:class="{ 'single-column-drawer-container-active': isDrawerOpen }">
    <div class="drawer-content">
        <div class="drawer-menu">
            
            
                
                    
                    
                    <a class="a-block drawer-menu-item false" href="/pages/guestbook">
                        留言板
                    </a>
            
                
                    
                    
                    <a class="a-block drawer-menu-item false" href="/pages/friends">
                        友情链接
                    </a>
            
                
                    
                    
                    <a class="a-block drawer-menu-item false" href="/tags">
                        标签
                    </a>
            
                
                    
                    
                    <a class="a-block drawer-menu-item false" href="/pages/about">
                        关于
                    </a>
            
            
            <div class="toc">


	<div class="toc-content">
	
		
		
		
		<center>- CATALOG -</center>
			
				
				
					
						
						
							<ul>
						
						
								<li>
				 					<a href="#%e7%bb%bc%e8%bf%b0" v-on:click="closeDrawer" id="综述-nav">
										 综述
									</a>
								</li>
						
							</ul>
						
					
				
			
				
				
					
						
						
							<ul>
						
						
								<li>
				 					<a href="#%e6%89%80%e9%9c%80%e5%b7%a5%e5%85%b7" v-on:click="closeDrawer" id="所需工具-nav">
										 所需工具
									</a>
								</li>
						
							</ul>
						
					
				
			
				
				
					
						
						
							<ul>
						
						
								<li>
				 					<a href="#%e7%ac%ac%e4%b8%80%e6%ad%a5-%e8%8e%b7%e5%8f%96-garupa-%e8%b5%84%e6%ba%90%e6%96%87%e4%bb%b6" v-on:click="closeDrawer" id="第一步-获取-garupa-资源文件-nav">
										 第一步：获取 garupa 资源文件
									</a>
								</li>
						
							</ul>
						
					
				
			
				
				
					
						
						
							<ul>
						
							<ul>
						
						
								<li>
				 					<a href="#%e6%96%b9%e6%b3%95-1" v-on:click="closeDrawer" id="方法-1-nav">
										 方法 1
									</a>
								</li>
						
							</ul>
						
							</ul>
						
					
				
			
				
				
					
						
						
							<ul>
						
							<ul>
						
						
								<li>
				 					<a href="#%e6%96%b9%e6%b3%95-2" v-on:click="closeDrawer" id="方法-2-nav">
										 方法 2
									</a>
								</li>
						
							</ul>
						
							</ul>
						
					
				
			
				
				
					
						
						
							<ul>
						
						
								<li>
				 					<a href="#%e7%ac%ac%e4%ba%8c%e6%ad%a5-%e8%a7%a3%e5%8e%8b-unity-assets-bundle-%e6%96%87%e4%bb%b6" v-on:click="closeDrawer" id="第二步-解压-unity-assets-bundle-文件-nav">
										 第二步：解压 Unity Assets Bundle 文件
									</a>
								</li>
						
							</ul>
						
					
				
			
				
				
					
						
						
							<ul>
						
						
								<li>
				 					<a href="#%e7%ac%ac%e4%b8%89%e6%ad%a5-%e8%a7%a3%e5%8e%8b-%e8%a7%a3%e5%af%86-acb-%e6%96%87%e4%bb%b6%e5%be%97%e5%88%b0%e5%a3%b0%e9%9f%b3%e6%96%87%e4%bb%b6" v-on:click="closeDrawer" id="第三步-解压-解密-acb-文件得到声音文件-nav">
										 第三步：解压、解密 acb 文件得到声音文件
									</a>
								</li>
						
							</ul>
						
					
				
			
				
				
					
						
						
							<ul>
						
							<ul>
						
						
								<li>
				 					<a href="#%e6%96%b9%e6%b3%95%e4%b8%80-%e4%bd%bf%e7%94%a8-acbdecrypter" v-on:click="closeDrawer" id="方法一-使用-acbdecrypter-nav">
										 方法一：使用 acbDecrypter
									</a>
								</li>
						
							</ul>
						
							</ul>
						
					
				
			
				
				
					
						
						
							<ul>
						
							<ul>
						
						
								<li>
				 					<a href="#%e6%96%b9%e6%b3%95%e4%ba%8c-%e4%bd%bf%e7%94%a8-vgmtoolbox-hcadecoder" v-on:click="closeDrawer" id="方法二-使用-vgmtoolbox-hcadecoder-nav">
										 方法二：使用 vgmtoolbox &#43; HCADecoder
									</a>
								</li>
						
							</ul>
						
							</ul>
						
					
				
			
				
				
					
						
						
							<ul>
						
						
								<li>
				 					<a href="#%e7%bb%86%e8%8a%82" v-on:click="closeDrawer" id="细节-nav">
										 细节
									</a>
								</li>
						
							</ul>
						
					
				
			
				
				
					
						
						
							<ul>
						
							<ul>
						
						
								<li>
				 					<a href="#%e4%bd%bf%e7%94%a8-assetstudio-%e6%8f%90%e5%8f%96%e7%9a%84%e7%bf%bb%e5%94%b1%e6%9b%b2%e7%9a%84%e8%a7%a3%e5%af%86" v-on:click="closeDrawer" id="使用-assetstudio-提取的翻唱曲的解密-nav">
										 使用 AssetStudio 提取的翻唱曲的解密
									</a>
								</li>
						
							</ul>
						
							</ul>
						
					
				
			
				
				
					
						
						
							<ul>
						
							<ul>
						
						
								<li>
				 					<a href="#%e6%8f%90%e5%8f%96%e8%a7%a3%e5%af%86-acb-%e7%9a%84%e5%af%86%e9%92%a5%e7%9a%84%e6%96%b9%e6%b3%95" v-on:click="closeDrawer" id="提取解密-acb-的密钥的方法-nav">
										 提取解密 ACB 的密钥的方法
									</a>
								</li>
						
							</ul>
						
							</ul>
						
					
				
			
				
				
					
						
						
							<ul>
						
						
								<li>
				 					<a href="#%e5%8f%82%e8%80%83%e6%96%87%e7%ab%a0" v-on:click="closeDrawer" id="参考文章-nav">
										 参考文章
									</a>
								</li>
						
							</ul>
						
					
				
			
	</div>

</div>
            
        </div>
    </div>
</div>
<transition name="fade">
    <div v-bind:class="{ 'single-column-drawer-mask': mounted }" v-if="isDrawerOpen" v-on:click="toggleDrawer"></div>
</transition>
<nav ref="navBar" class="navbar sticky-top navbar-light single-column-nav-container">
    <div ref="navBackground" class="nav-background"></div>
    <div class="container container-narrow nav-content">
        <button id="nav_dropdown_btn" class="nav-dropdown-toggle" type="button" v-on:click="toggleDrawer">
            <i class="material-icons">
                menu
            </i>
        </button>
        <a ref="navTitle" class="navbar-brand" href="https://kirainmoe.com/">
            宇宙よりも遠い場所
        </a>
    </div>
</nav>
<div class="single-column-header-container" ref="pageHead"
     v-bind:style="{ transform: 'translateZ(0px) translateY('+.3*scrollY+'px)', opacity: 1-navOpacity }">
    <a href="https://kirainmoe.com/">
        <div class="single-column-header-title">宇宙よりも遠い場所</div>
        

    </a>
</div>
            <div id="content">
<div ref="streamContainer" class="stream-container">
    <div class="post-list-container post-list-container-shadow">
        <div class="post">
            
            
            

            <div class="post-head-wrapper-text-only"
                 style="background-image: url('/')">
                <div class="post-title">
                    バンドリ!ガールズバンドパーティ!（BanG Dream! 少女乐团派对）游戏资源/歌曲解包
                    <div class="post-meta">
                        <time itemprop="datePublished">
                            2019-06-15 13:57
                        </time>

                        

                        
                            <i class="material-icons" style="">label</i>
                            
                                <a href="/tags/games">games</a>
                                &nbsp;
                            
                                <a href="/tags/bang-dream">bang dream</a>
                                &nbsp;
                            
                                <a href="/tags/garupa">garupa</a>
                                &nbsp;
                            
                        
                    </div>
                </div>
            </div>
            
            <div class="post-body-wrapper">
                <div class="post-body">
                    <p><img src="https://i.loli.net/2019/06/15/5d04f02dbd06449617.jpg" alt="" /></p>

<p>解包 《バンドリ!ガールズバンドパーティ!》（即 BanG Dream! 梦想协奏曲 少女乐团派对，以下简称 garupa）游戏的资源文件。</p>

<p>其实这不是什么新东西，网上已经有很多相关的教程了，只是因为整个过程有点繁琐，所以写一篇新的文章记录一下过程和补充一些细节。</p>

<p>下文以 Android 版本的日服和国服为例。以下内容仅供学习使用，请勿用于商业等用途。</p>

<h1 id="综述">综述</h1>

<p>Garupa 的主要资源文件（包括音乐、贴图、Live2D模型、语音、卡牌、BGM……）都存放在 /storage/emuated/0/Android/data/jp.co.craftegg.band/data/files 下（简体中文版的包名为：com.bilibili.star.bili），在这个文件夹下你可以看到一堆文件名为一串哈希值的无后缀文件，这些文件是压缩后的 Unity Asset Bundle 文件。</p>

<p>将这些压缩后的 bundle 文件展开，可以看到游戏的数据文件。其中有一些例如 Live2D 模型、表情、贴图、卡牌等文件以 mtn, 图片等形式存储，它们可以直接导出；而大部分的音乐（原创音乐、翻唱音乐、试听音乐、BGM等）通过加密、压缩之后，以 acb 的形式存储在 Unity Asset Bundle 中。</p>

<h1 id="所需工具">所需工具</h1>

<ul>
<li><a href="https://github.com/DerPopo/UABE">Unity Asset Bundle Extractor, UABE</a> 或 <a href="https://ci.appveyor.com/project/Perfare/assetstudio/branch/master/artifacts">AssetStudio (推荐)</a></li>
<li><a href="https://github.com/Rieksee/acbDecrypter/releases">acbDecrypter</a></li>
<li><a href="https://sourceforge.net/projects/vgmtoolbox/">vgmtoolbox</a></li>
<li><a href="https://github.com/Nyagamon/HCADecoder/releases">HCADecoder</a></li>
</ul>

<h1 id="第一步-获取-garupa-资源文件">第一步：获取 garupa 资源文件</h1>

<h2 id="方法-1">方法 1</h2>

<p>直接提取已下载好的数据包：<code>adb pull /storage/emulated/0/Android/data/jp.co.craftegg.band/data/files D:\bandori</code>；如果是国服： <code>adb pull /storage/emulated/0/Android/data/com.bilibili.star.bili/data/files D:\bandori</code>。</p>

<h2 id="方法-2">方法 2</h2>

<p>首先从 <a href="https://d2ktlshvcuasnf.cloudfront.net/Release/3.2.0.500/Android/AssetBundleInfo">https://d2ktlshvcuasnf.cloudfront.net/Release/3.2.0.500/Android/AssetBundleInfo</a> 获取日服的 AssetBundleInfo 的资源列表文件。其中，3.2.0.500 是游戏数据的版本，这个可以在 bangdream.ga 数据库里查到，左侧有一个 Japan Server Data Ver 就是当前日服的资源版本。</p>

<p>下载得到的 AssetBundleInfo 长这样：</p>

<p><img src="https://i.loli.net/2019/06/15/5d04defab7cf840552.jpg" alt="" /></p>

<p>根据左边的文件路径找到你所需要的资源。这里就需要有一些技巧，例如要下载 Pastel*Palettes 的歌曲《きゅ〜まい＊flower》，首先搜索 musicjacket（曲目封面）开头的内容，按照歌曲在游戏内上架时间和名称的关键字查找对应的 ID 项，如根据关键字和上架时间，定位到这首歌对应的是 <code>musicjacket/186_myflower</code>，说明这首歌的 ID 是 186，对应的资源文件是 <code>sound/bgm186</code>.</p>

<p>接下来下载，只需要将资源路径接到地址 <a href="https://d2ktlshvcuasnf.cloudfront.net/Release/3.2.0.500/Android/">https://d2ktlshvcuasnf.cloudfront.net/Release/3.2.0.500/Android/</a> 后面。例如要下载这首歌，资源文件的地址就是 <a href="https://d2ktlshvcuasnf.cloudfront.net/Release/3.2.0.500/Android/sound/bgm186">https://d2ktlshvcuasnf.cloudfront.net/Release/3.2.0.500/Android/sound/bgm186</a> .</p>

<p>两种方法得到的文件都是压缩过的 Unity Assets Bundle 文件。</p>

<h1 id="第二步-解压-unity-assets-bundle-文件">第二步：解压 Unity Assets Bundle 文件</h1>

<p>对于第一步中使用方法二下载的单文件，可以直接使用 UABE 或者 AssetStudio 打开。这里我们使用 AssetStudio 打开上面下载得到的文件，直接左上角 File-&gt;Load File 即可：</p>

<p><img src="https://i.loli.net/2019/06/15/5d04e34e7361783614.jpg" alt="" /></p>

<p>如果使用 UABE，打开之后会提示资源已压缩，让你选择解压出来保存的文件。随便选择一个位置保存，然后点击 Info 就可以看到这个文件的内容。</p>

<p><img src="https://i.loli.net/2019/06/15/5d04e5f8dbfa935222.jpg" alt="" /></p>

<p>打开后点击 Asset List 标签页。我们可以看到，这个 bundle 下有两个文件，其中我们感兴趣的是后缀为 .acb 的文件。这是一个 Unity 的 TextAsset 文件，实际上歌曲就以加密的形式存储在其中。我们将其右键选中，点击 &ldquo;Export selected assets&rdquo; 将其解压出来（如果是 UABE，选择右边的 Plugins/Export to .txt导出）。</p>

<hr />

<p>上面是打开单文件的情况。对于下载好的数据包，里面的资源文件都是乱码，我们无法知道哪个 bundle 文件里面包含了什么内容。此时可以使用 AssetStudio 批量读取，点击左上角 File-&gt;Load Folder 选择上面获得的数据包文件夹（D:\bandori）即可。</p>

<p>然后你可以在 Asset List 页面中看到所有的信息。在 Filter 中通过关键字筛选（如筛选所有的 acb 文件），然后点击 Export-&gt;Filtered Assets 可以导出筛选的资源。</p>

<p>导出后的文件可能是 .acb 后缀的文件，或者 .acb.txt 格式的文件（如果你是从 Export  菜单里导出）。后者其实本质上就是 .acb 文件，可以批量将其后缀改成 .acb：</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-batch" data-lang="batch"><span style="color:#66d9ef">ren</span> *.acb.txt *.acb</code></pre></div>
<p>此外还有一些额外你可能会感兴趣的内容，例如游戏内的 Live BGM，bushimo/craftegg 语音， 抽卡 BGM 等等，它们位于 apk 安装包的 assets 下。</p>

<h1 id="第三步-解压-解密-acb-文件得到声音文件">第三步：解压、解密 acb 文件得到声音文件</h1>

<p>这一步我们有两种方案。第一种是直接使用 acbDecrypter，第二种方法是使用 vgmtoolbox 将 ACB 转换为 HCA，再使用 HCADecoder 将 HCA 解密。</p>

<h2 id="方法一-使用-acbdecrypter">方法一：使用 acbDecrypter</h2>

<p>首先解压 acbDecrypter，这里解压需要一些技巧：因为该程序的部分文件名是日文，如果直接解压可能会导致文件名乱码，影响程序的运行。为此我们需要先设置解压程序的编码，以 BandiZip 为例，在 选项-&gt;设置中，将“默认代码页”改为“日语”（弄完之后记得改回去嗷）：</p>

<p><img src="https://i.loli.net/2019/06/15/5d04e7de2ff0b64253.jpg" alt="" /></p>

<p>为了后面操作的方便，这里建议将解压后的目录添加到系统的 PATH 环境变量中，这一步就不多说了。</p>

<p>接下来将我们解包的 ACB 放到一个目录中（如放在 D:\test\bgm186.acb 下），在该路径下打开命令提示符，然后输入：</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-batch" data-lang="batch">chcp 932</code></pre></div>
<p>这一步先修改 cmd 的编码为 932（日文 ShiftJIS）；然后输入：</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-batch" data-lang="batch">acbdecrypter</code></pre></div>
<p>CMD 中会提示：“フォルダを選択？[y/N]”（选择文件夹？），我们输入 y 并选择当前文件夹；</p>

<p>接下来会提示 “HCAファイルが見つかりました。鍵を選択してください。”（已找到 HCA 文件，请选择解密使用的密钥），并弹出一个窗口让你选择游戏资源对应游戏的密钥：</p>

<p><img src="https://i.loli.net/2019/06/15/5d04e95fc6fac67629.jpg" alt="" /></p>

<p>WTF，弹出来的选择窗口除了几个带英文的都是乱码，根本不知道应该选哪个。此时我们找到 acbdecrypter 目录下的 hcaToWav 目录，在这里有一个 &ldquo;復号鍵リスト.txt&rdquo; 文件，里面存储的就是这个界面中列出密钥。我们使用 ShiftJIS 编码打开该文件，可以看到以下内容：</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-txt" data-lang="txt">CF222F1FE0748978 : デフォルト鍵
CC55463930DBE1AB : ファンタシースターオンライン2
0000000077EDF21C : ロウきゅーぶ！ ひみつのおとしもの
0000000049913556 : ロウきゅーぶ！ ないしょのシャッターチャンス
00000000012C9A53 : ジョジョの奇妙な冒険 オールスターバトル
00003657F27E3B22 : アイドルマスター シンデレラガールズ スターライトステージ
00003657F27E3B22 : シャドウバース ※未確認
0011DCDD0DC57F48 : グリモア～私立グリモワール魔法学園～
0000000000003039 : Fate/Grand Order (初期アセットのみ)
7E89631892EBF464 : Fate/Grand Order (ダウンロード完了後の音声データはこっち) ※未確認
FDAE531AAB414BA1 : Tokyo 7th シスターズ ※未確認
00000000001D149A : ONE PIECE DANCE BATTLE (ダンバト)
0000000000000978 : アイドルコネクト
00000000012EBCCA : ダービースタリオンマスターズ
0000000002B99F1A : ららマジ
00000000000022CE : バンドリ！ ガールズバンドパーティ！</code></pre></div>
<p>可以看到这里给出了一些常见日游的解密密钥，我们想要的 《バンドリ！ ガールズバンドパーティ！》 密钥是 <code>00000000000022CE</code>，因此在上面的界面中，我们选择最后一项（其实这一步，将系统的非 Unicode 程序默认语言改成日语也可以正常显示，但是后面要恢复回去），并点击“决定”，此时程序就会自动开始解密：</p>

<p><img src="https://i.loli.net/2019/06/15/5d04ea92de35e79536.jpg" alt="" />
<img src="https://i.loli.net/2019/06/15/5d04ea92bf58b90570.jpg" alt="" /></p>

<p>当看到 &ldquo;全て完了しました。&rdquo;（全部完成了）的提示、并且没有报错的时候，表明资源已经成功解压。此时会自动打开一个后缀为 _decrypted 的文件夹，在里面会找到 .wav 格式的文件，这就是我们所需要的 wav 声音文件了：</p>

<p><img src="https://i.loli.net/2019/06/15/5d04eb10c22b815171.jpg" alt="" /></p>

<div id="muse-app"></div>

<h2 id="方法二-使用-vgmtoolbox-hcadecoder">方法二：使用 vgmtoolbox + HCADecoder</h2>

<p>首先打开 vgmtoolbox，依次展开左侧的 Misc.Tools -&gt; Extraction Tools -&gt; Common Archives -&gt; CRI ACB/AWB Archive Extractor，然后将 acb 文件拖进右边的空白处：</p>

<p><img src="https://i.loli.net/2019/06/15/5d04ebb4d24c730648.jpg" alt="" /></p>

<p>接下来在 acb 所在目录下会生成一个 <code>_vgmt_acb_ext_filename</code> 的文件夹，依次展开会得到一个 HCA 文件。</p>

<p>接下来解密这个 HCA 文件，将这个 hca 文件复制到 HCADecoder 的目录并在该目录下打开 cmd（或者直接将 HCADecoder 所在目录加入到 PATH 变量中，并在当前目录打开 cmd）。</p>

<p>这里我们先对 HCADecoder 这个脚本做一下修改，先将 &ldquo;オプション指定デコード.bat&rdquo; 改一个好调用一点的名字，例如 &ldquo;start.bat&rdquo;。然后使用 ShiftJIS 编码编辑该文件，在第 16 行左右的位置将 <code>set X_K=</code> 改为 <code>set X_K=00000000000022CE</code>，填入 garupa 的密钥（其它密钥可以在该目录下的 “復号鍵リスト.txt” 找到）。</p>

<p>然后我们直接运行：</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-batch" data-lang="batch">chcp 932
<span style="color:#66d9ef">start</span>.bat bgm186.hca</code></pre></div>
<p><img src="https://i.loli.net/2019/06/15/5d04ed272f67614928.jpg" alt="" /></p>

<p>一路回车就可以得到 wav 文件。</p>

<h1 id="细节">细节</h1>

<h2 id="使用-assetstudio-提取的翻唱曲的解密">使用 AssetStudio 提取的翻唱曲的解密</h2>

<p>如果直接从已下载的数据包中提取 acb，会发现部分 acb 文件是分为多个 100K 文件存储的：</p>

<p><img src="https://i.loli.net/2019/06/15/5d04ee1e0cc8542127.jpg" alt="" /></p>

<p>对照<a href="http://chun37.hatenablog.com/entry/2018/01/01/071811">部分 ID 表</a>我们发现这些分文件存储的 acb 大部分都是翻唱曲。并且如果你使用 acbdecrypter 直接解密这个文件，会得到全损音质的 wav. 其实解密这些文件也很简单，只需要将文件从头到尾拼起来就好了，就是简单的循环+文件读取写入。以下是一个示例程序（为了展示它到底有多简单，这是一个 PHP 程序）：</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-php" data-lang="php"><span style="color:#75715e">&lt;?php</span>
$content <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;&#39;</span>;
<span style="color:#66d9ef">for</span> ($i <span style="color:#f92672">=</span> <span style="color:#ae81ff">1</span>; $i <span style="color:#f92672">&lt;=</span> <span style="color:#ae81ff">33</span>; $i<span style="color:#f92672">++</span>) {          <span style="color:#75715e">// &#39;33&#39; 是分文件的个数
</span><span style="color:#75715e"></span>    $filename <span style="color:#f92672">=</span> <span style="color:#a6e22e">sprintf</span>(<span style="color:#e6db74">&#34;Bgm008-%03d.acb&#34;</span>, $i);
    $file <span style="color:#f92672">=</span> <span style="color:#a6e22e">file_get_contents</span>($filename);
    $content <span style="color:#f92672">.=</span> $file;
}
<span style="color:#a6e22e">file_put_contents</span>(<span style="color:#e6db74">&#39;bgm-008.acb&#39;</span>, $content);
</code></pre></div>
<p>然后再使用第三步的方法解包就可以了。</p>

<h2 id="提取解密-acb-的密钥的方法">提取解密 ACB 的密钥的方法</h2>

<p>关于这个，在 HCADecoder 程序的仓库中有一个 &lsquo;復号鍵の探し方/メモ.txt` 的文件，作者在里面介绍了提取的一种方法。不过因为我太菜看不懂日语，所以如果各位有兴趣的话直接看该文件就可以。</p>

<h1 id="参考文章">参考文章</h1>

<ul>
<li><a href="http://refrigetwo.moe/2018/05/14/%E3%83%90%E3%83%B3%E3%83%89%E3%83%AA%EF%BC%81bang-dream%EF%BC%81%E5%B0%91%E5%A5%B3%E4%B9%90%E5%9B%A2%E6%B4%BE%E5%AF%B9-%E6%AD%8C%E6%9B%B2%E5%AF%BC%E5%87%BA/">バンドリ！BanG Dream！少女乐团派对 歌曲导出</a></li>
<li><a href="https://raspberrypi422.mydns.jp/wordpress/31/">バンドリ！ ファイル抽出/解析</a></li>
<li><a href="http://chun37.hatenablog.com/entry/2018/01/01/071811">ガルパ内部ID(曲)</a></li>
</ul>

<script>
var playlist = [{
    title: 'きゅ〜まい＊flower',
    artist: 'Pastel*Palettes',
    cover: '/assets/img/kyu-mai-flower.jpg',
    src: '/assets/mp3/kyu-mai-flower.mp3',
    lyric: '[offset:500]\n[00:21.24]応答せよ可愛さよ\n[00:23.83]か弱く揺れてるだけの\n[00:26.43]乙女心じゃないんだ常に\n[00:29.35](Go！ Go！ Go！ Go for it！)\n[00:31.75]目紛しい毎日に\n[00:34.26]振り落とされないように\n[00:36.90]努力努力で立ち向かう\n[00:39.32]強さに溢れてる\n[00:42.37]汗と涙 声にカスタマイズ(キラン)\n[00:47.55]秘密(秘密)ちょっと\n[00:49.57]あってもいいでしょ\n[00:52.55](ワン ツー スリー フォー)\n[00:53.88]cutie mighty floweryに\n[00:56.51]私を咲かせて(ポン×2)\n[00:59.12]とびきりの(ポン×2)輝き(ポン×2)\n[01:01.65]キミにあげるんだ(Love×4)\n[01:04.34]cutie mighty floweryに\n[01:06.99]女の子真っ盛りの\n[01:09.78](100点満開)笑顔で\n[01:12.10]今日も(ポン！)明日も(ポン！)\n[01:13.47]会いに行くから\n[01:25.27]パ！ス！パ！レ！満！開！(ポン×1+×1+×2)\n[01:30.21]ジャーン！\n'
}];
MUSE.render(playlist, document.getElementById('muse-app'));
</script>
                    <HR width="100%" id="EOF">
                    <p style="color:#777;">Last modified on 2019-06-15</p>
                </div>
                
            </div>
            
            
            <nav class="post-pagination">

                
                <a class="newer-posts" href="https://kirainmoe.com/blog/post/point-divide-and-conquer-notes/">
                    Next<br>【学习笔记】点分治
                </a>
                
                
                
                <a class="older-posts" href="https://kirainmoe.com/blog/post/xmu-acm-training-record-4/">
                    Previous<br>[19-3-23] XMU ACM 集训队笔记(4) 基础数论
                </a>
                
            </nav>
            <div class="post-comment-wrapper">
                
<div class="post-comment-wrapper">
<div id="disqus_thread"></div>
<script type="application/javascript">
    var disqus_config = function () {
    
    
    
    };
    (function() {
        if (["localhost", "127.0.0.1"].indexOf(window.location.hostname) != -1) {
            document.getElementById('disqus_thread').innerHTML = 'Disqus comments not available by default when the website is previewed locally.';
            return;
        }
        var d = document, s = d.createElement('script'); s.async = true;
        s.src = '//' + "yume-diary" + '.disqus.com/embed.js';
        s.setAttribute('data-timestamp', +new Date());
        (d.head || d.body).appendChild(s);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="https://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
</div>




            </div>
        </div>
    </div>
</div>

            </div><div id="single-column-footer">&copy;
	
	2016-2020 宇宙よりも遠い場所
	

/

<a href="https://creativecommons.org/licenses/by-sa/4.0/deed.zh">CC-BY-SA 4.0</a>

<br>

Published with <a href="https://gohugo.io">Hugo</a> / Theme <a href="https://github.com/amazingrise/hugo-theme-diary" title="Author: Rise @ amazingrise.net">Diary</a>
</div>
    	</div>
    <script src="https://kirainmoe.com//js/journal.js"></script>
    </body>
</html>
