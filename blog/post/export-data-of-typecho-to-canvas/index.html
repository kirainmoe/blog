<body>
  <!DOCTYPE html>
<html lang="en-us">
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta content="" name="keywords">
<meta content="导出 Typecho 的数据到 Canvas：typecho-to-canvas - 宇宙よりも遠い場所" property="og:title">
<title>导出 Typecho 的数据到 Canvas：typecho-to-canvas | 宇宙よりも遠い場所</title>
<script src="https://unpkg.com/muse-player/dist/assets/muse-player.js"></script>
<link href="https://fonts.googleapis.com/css?family=Poppins" rel="stylesheet">
<link rel="stylesheet" href="https://kirainmoe.com//css/style.css">
<link rel="stylesheet" href="https://kirainmoe.com//css/custom.css">
<link href="//maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-wvfXpqpZZVQGK6TAh5PVlGOfQNHSoD2xbE+QkPxCAFlNEevoEH3Sl0sibVcOQVnN" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.10.0-beta/dist/katex.min.css" integrity="sha384-9tPv11A+glH/on/wEu99NVwDPwkMQESOocs/ZGXPoIiLE8MU/qkqUcZ3zzL+6DuH" crossorigin="anonymous">
<script type="text/javascript" async src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML">
</script>
<link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/github.min.css">

<style type="text/css">
	.nav-left {	display: block; text-align: left; }
	.nav-link { display: inline-block; margin: 0px 20px 0px 0px;  }
	.nav-item { justify-content: flex-start;  }
	.nav-title { margin: 0px; font-size: 28px; font-weight: bold;  }
	.nav-title a { padding: 10px 0px;  }
	@media screen and (max-width: 700px) {
		.nav { display: block; text-align: center;  }
		.nav-title > .nav-item { display: block;  text-align: center; }
		.nav-left { text-align: center;  }
	}
</style>
  <section class="section navigator">
  <div class="navigator-background"></div>
  <div class="container">
    <nav class="nav">
      <div class="nav-left">
        <h1 class="nav-title"><a class="nav-item" href="https://kirainmoe.com/">宇宙よりも遠い場所</a></h1>
        <div class="nav-links">
          <a class="nav-link" href="/pages/guestbook/">Guestbook</a>
          <a class="nav-link" href="/pages/friends/">Friends</a>        
          <a class="nav-link" href="https://about.me/kirainmoe">About</a>
        </div>
      </div>
      <div class="nav-right">
        <nav class="nav-item level is-mobile">
          
          <a class="level-item" href="https://github.com/kirainmoe">
            <span class="icon">
              <i class="fa fa-github"></i>
            </span>
          </a>
          
          <a class="level-item" href="https://twitter.com/yume_kankawa">
            <span class="icon">
              <i class="fa fa-twitter"></i>
            </span>
          </a>
          
          <a class="level-item" href="https://weibo.com/returnnnn">
            <span class="icon">
              <i class="fa fa-weibo"></i>
            </span>
          </a>
          
          <a class="level-item" href="https://acm.kirainmoe.com">
            <span class="icon">
              <i class="fa fa-tumblr"></i>
            </span>
          </a>
          
          <a class="level-item" href="/index.xml">
            <span class="icon">
              <i class="fa fa-rss"></i>
            </span>
          </a>
          
        </nav>
      </div>
    </nav>
  </div>
</section>

<div class="return-top">
  <i class="fa fa-angle-up"></i>
</div>

<div class="loading-progress"></div>
  <section class="section content-container">
    <div class="container article-here">
      <h2 class="subtitle is-6">April 9, 2017</h2>
      <h1 class="title">导出 Typecho 的数据到 Canvas：typecho-to-canvas</h1>
      
      <div class="content">
        <p>通过简单几步，将 Typecho 博客程序的数据（文章，标签一类）轻松转换到由 Laravel 驱动的 Canvas 博客平台。

有关 <a href="canvas.toddaustin.io">Canvas</a> 什么的我就不说了吧，大概知道这是个比较新的 PHP 博客程序，由 Laravel 框架驱动就可以了。</p>

<p>至于为什么为突发奇想写这样一个东西，首先主要是这是个比较新鲜的东西，相关的东西都还很少，我在 GitHub 上找到了 <em>wordpress-to-canvas</em> 的东西，于是便觉得为何不搞一个 <em>typecho-to-canvas</em> 呢～其次呢，因为我之前用过一段时间的 Typecho，也想借这个东西把之前的一些数据导回来（虽然我找不到我把 DB 的 备份扔到哪了……qwq），以及……其他的一些原因……所以就花了一些时间造这个轮子啦。</p>

<p>GitHub: <a href="https://github.com/kirainmoe/typecho-to-canvas">typecho-to-canvas: easily converting your data from Typecho to Canvas</a></p>

<p>Packagist(Composer): <a href="https://packagist.org/packages/kirainmoe/typecho-to-canvas">typecho-to-canvas</a></p>

<h2 id="功能特色"># 功能特色</h2>

<ul>
<li>Typecho 下的第一个 &ldquo;Switch to Canvas&rdquo; 工具</li>
<li>支持转换 Typecho 的文章、标签和关系树，兼容性约 95%</li>
<li>自动加载和解析配置数据，你甚至可以全程 Enter</li>
<li>在 CLI 模式下运行</li>
<li><s>作者这么萌</s></li>
</ul>

<h2 id="环境需求"># 环境需求</h2>

<ul>
<li>确保 Typecho 和 Canvas 在转换环境下分别已正确安装</li>
<li>拥有转换环境的操作权限</li>
<li>PHP 5.6.4 以上的版本（Canvas 的版本要求）</li>
<li>已正确安装 composer 依赖管理工具</li>
<li>PHP 已加载对应 Typecho 和 Canvas 安装类型的数据库的 PDO 拓展</li>
<li>数据库正常运行<s>（废话）</s></li>
<li>耐心，Patient</li>
</ul>

<h2 id="使用方法"># 使用方法</h2>

<h4 id="数据无价-在进行以下操作之前-强烈建议手动备份-typecho-和-canvas-的数据库">数据无价，在进行以下操作之前，强烈建议手动备份 Typecho 和 Canvas 的数据库。</h4>

<h4 id="数据无价-在进行以下操作之前-强烈建议手动备份-typecho-和-canvas-的数据库-1">数据无价，在进行以下操作之前，强烈建议手动备份 Typecho 和 Canvas 的数据库。</h4>

<h4 id="数据无价-在进行以下操作之前-强烈建议手动备份-typecho-和-canvas-的数据库-2">数据无价，在进行以下操作之前，强烈建议手动备份 Typecho 和 Canvas 的数据库。</h4>

<p>重要的事情说三遍。
再次确保你的环境工作正常，Typecho 和 Canvas 的数据库可以访问～然后接着往下看吧～</p>

<h4 id="准备-安装-te2cn">准备：安装 te2cn</h4>

<p>安装教程可以在 GitHub 的 README 找到：<a href="https://github.com/kirainmoe/typecho-to-canvas">https://github.com/kirainmoe/typecho-to-canvas</a></p>

<p>这里提供通过 Git 的安装方法，简单快捷～如果你没有安装 Git，请自行搜索当前系统的安装方式。</p>

<pre><code class="language-shell"># 首先将项目仓库拉下来
$ git clone https://github.com/kirainmoe/typecho-to-canvas
$ cd typecho-to-canvas

# 然后用 composer 安装依赖
$ composer install

# 运行 te2cn，按照提示转换数据就行啦
$ chmod -R 755 ./te2cn
$ ./te2cn
</code></pre>

<hr />

<h4 id="填写数据库配置信息">填写数据库配置信息</h4>

<p>运行程序首先是一贯的套路 welcome，然后 <strong>te2cn</strong> 会先后向你询问 <em>Typecho</em> 和 <em>Canvas</em> 的数据库配置信息。首先会询问 Typecho 的数据库配置信息，请按顺序依次输入：数据库主机、用户、密码、数据库名称、端口、以及数据库的种类。程序会给出默认值，如果你不需要修改默认值，可以直接敲回车。
（小技巧：直接将 Typecho 的配置文件 <strong>config.inc.php</strong> 复制到程序目录下，<strong>te2cn</strong> 会自动解析数据库配置，无需人工填写）</p>

<p>接下来会询问 Canvas 数据库的配置信息。首先会问你 Canvas 和 Typecho 是否安装在同一数据库主机中，如果是的话直接回车，程序会问你 Canvas 安装的数据库名称；如果不是的话，会收集 Canvas 安装数据库的配置。
（目前暂时不支持解析 Laravel .ENV 的说 qwq）</p>

<p>接下来会列出所收集或解析的数据库的配置信息，请检查是否有误，如果无误可以直接敲回车。</p>

<h4 id="开始转换进程">开始转换进程</h4>

<p>如果信息填写正确，程序就会自动开始数据导出进程。不过在这之前会先询问你是否保留 Canvas 的现有数据，如果你需要保留直接回车，不保留的话需要确认两次，以防误操作丢失数据。</p>

<p>然后，程序就会自动启动转换进程。取决于 Typecho 数据量的大小以及服务器 IO 性能，这个过程可能需要一些时间，请耐心等待，在依次导出了 tags, posts, relationships 之后，就完成了操作。</p>

<h4 id="enjoy">Enjoy～</h4>

<p>当看到转换完成的提示之后，Typecho 的数据就成功地被导出到 Canvas 了。你可以试一试运行 Canvas 看看效果：</p>

<pre><code class="language-shell">$ cd /path/to/your/canvas
$ php artisan serve
</code></pre>

<h2 id="问题解决"># 问题解决</h2>

<p>目前由于 Canvas 暂时不支持本地评论以及其他一些 Typecho 的 features，所以只做了文章、标签和关系树的单向转换。如果有时间会更新逆向转换功能（canvas-to-typecho）。</p>

<p>有任何问题或者建议，都可以到 GitHub 的项目主页提 issues 或者 Pull request 告诉我们。</p>

<p>嘛。希望这个轮子能对你们有帮助～</p>
      </div>
    </div>
  
<section class="section">
  <div class="container">
    <aside><div id="disqus_thread"></div></aside>
    <script type="text/javascript">
      var disqus_shortname = 'yume-diary';
      (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
      })();
    </script>
    <noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a></noscript>
  </div>
</section>


  </section>
  <section class="section footblock">
  <img src="https://secure.gravatar.com/avatar/c47187d311099868de825697fa419654?s=200&r=G" width="70px" height="70px" class="avatar">
  <div class="container has-text-centered">
    <p>&copy;2018 YumeのDiary / Published with <a href="https://gohugo.io">Hugo</a></p>
  </div>
</section>
<script src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/highlight.min.js" integrity="sha256-/BfiIkHlHoVihZdc6TFuj7MmJ0TWcWsMXkeDFwhi0zw=" crossorigin="anonymous"></script>

<script type="text/javascript" src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/languages/go.min.js"></script>


<script type="text/javascript" src="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/languages/dockerfile.min.js"></script>


<script>hljs.initHighlightingOnLoad();</script>
<script src="https://cdn.jsdelivr.net/npm/pjax/pjax.min.js"></script>
<script src="https://kirainmoe.com//index.js"></script>


<script>
var doNotTrack = false;
if (!doNotTrack) {
	window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
	ga('create', 'UA-111347233-1', 'auto');
	
	ga('send', 'pageview');
}
</script>
<script async src='https://www.google-analytics.com/analytics.js'></script>



</body>
