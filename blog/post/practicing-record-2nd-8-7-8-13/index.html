<!DOCTYPE html>
<html><head>
<title>每周解题报告 (2nd, 8/7~8/13)</title>

<meta charset="utf-8">
<meta name="X-UA-Compatible" content="IE=edge">
<meta name="google-site-verification" content="">
<meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport">
<meta content="telephone=no" name="format-detection">
<meta name="renderer" content="webkit">
<meta name="theme-color" content="#ffffff">




<script type="application/javascript">
var doNotTrack = false;
if (!doNotTrack) {
	(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
	(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
	m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
	})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
	ga('create', 'UA-111347233-1', 'auto');
	
	ga('send', 'pageview');
}
</script>



<script src="/vendor/js/jquery.min.js" ></script>
<script src="/vendor/js/popper.min.js" ></script>
<script src="/vendor/js/bootstrap.min.js" ></script>
<script src="/vendor/js/smooth-scroll.polyfills.min.js" ></script>
<link type="text/css" rel="stylesheet" href="/vendor/css/bootstrap.min.css">
<script src="/vendor/js/vue.min.js" ></script>




<link rel="stylesheet" href="https://kirainmoe.com/scss/journal.min.75e350a979186b10ecf739a405199a5eaf37fd6bd3463a78ae5c70c634963fde.css" integrity="sha256-deNQqXkYaxDs9zmkBRmaXq83/WvTRjp4rlxwxjSWP94=" media="screen">

<script src="https://kirainmoe.com//js/loadCSS.js"></script>
<script src="https://kirainmoe.com//js/table.js"></script>


<script src="https://kirainmoe.com//js/toc.js"></script>


<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
      showProcessingMessages: false,
      messageStyle: "none", 
      jax: ["input/TeX", "output/HTML-CSS"],
      tex2jax: {
        inlineMath: [["$", "$"], ["\\(", "\\)"]],
        displayMath: [["$$", "$$"], ["\\[", "\\]"]],
        skipTags: ["script", "noscript", "style", "textarea", "pre", "code", "a"]
      },
      "HTML-CSS": {
        availableFonts: ["STIX", "TeX"], 
        showMathMenu: false
      }
  });
</script>
<script type="text/javascript" async src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML"></script>

<script src="https://unpkg.com/muse-player/dist/assets/muse-player.js"></script>

<script>
    loadCSS("https://fonts.googleapis.com/css?family=Lora|Montserrat|Fira+Mono|Noto+Serif+SC|Material+Icons");
</script>

</head><body>
    	<div id="app"><div ref="sideContainer" class="side-container">
    
    <a class="a-block nav-head false" href="https://kirainmoe.com/">
    
        <div class="nav-title">
            宇宙よりも遠い場所
        </div>
        
    </a>

    <div class="nav-link-list">
        
        
            
                
                
                <a class="a-block nav-link-item false" href="/pages/guestbook">
                    留言板
                </a>
        
            
                
                
                <a class="a-block nav-link-item false" href="/pages/friends">
                    友情链接
                </a>
        
            
                
                
                <a class="a-block nav-link-item false" href="/tags">
                    标签
                </a>
        
            
                
                
                <a class="a-block nav-link-item false" href="/pages/about">
                    关于
                </a>
        
    </div>

    

    <div class="nav-footer">
        &copy;
	
	2016-2020 宇宙よりも遠い場所
	

/

<a href="https://creativecommons.org/licenses/by-sa/4.0/deed.zh">CC-BY-SA 4.0</a>

<br>

Published with <a href="https://gohugo.io">Hugo</a> / Theme <a href="https://github.com/amazingrise/hugo-theme-diary" title="Author: Rise @ amazingrise.net">Diary</a>

    </div>
    
</div><div ref="extraContainer" class="extra-container">
    
    <div class="toc animated-visibility" :class="{ invisible: scrollY <= 140 }">


	<div class="toc-content">
	
		
		
		
		<center>- CATALOG -</center>
			
				
				
					
						
						
							<ul>
						
						
								<li>
				 					<a href="#%e5%81%b6%e7%84%b6%e5%ad%a6%e5%88%b0%e7%9a%84%e9%bb%91%e7%a7%91%e6%8a%80" v-on:click="closeDrawer" id="偶然学到的黑科技-nav">
										 偶然学到的黑科技
									</a>
								</li>
						
							</ul>
						
					
				
			
				
				
					
						
						
							<ul>
						
							<ul>
						
						
								<li>
				 					<a href="#stl-%e7%9a%84-unique" v-on:click="closeDrawer" id="stl-的-unique-nav">
										 STL 的 unique()
									</a>
								</li>
						
							</ul>
						
							</ul>
						
					
				
			
				
				
					
						
						
							<ul>
						
							<ul>
						
						
								<li>
				 					<a href="#stl-lower_bound-%e5%92%8c-upper_bound" v-on:click="closeDrawer" id="stl-lower_bound-和-upper_bound-nav">
										 STL lower_bound() 和 upper_bound()
									</a>
								</li>
						
							</ul>
						
							</ul>
						
					
				
			
				
				
					
						
						
							<ul>
						
							<ul>
						
						
								<li>
				 					<a href="#%e5%9b%9b%e8%a1%8c%e5%86%99%e5%87%ba%e6%9c%80%e9%95%bf%e4%b8%8a%e5%8d%87%e5%ad%90%e5%ba%8f%e5%88%97-lis-%e7%9a%84-onlogn-%e8%a7%a3%e6%b3%95" v-on:click="closeDrawer" id="四行写出最长上升子序列-lis-的-onlogn-解法-nav">
										 四行写出最长上升子序列 (LIS) 的 O(nlogn) 解法
									</a>
								</li>
						
							</ul>
						
							</ul>
						
					
				
			
				
				
					
						
						
							<ul>
						
						
								<li>
				 					<a href="#4200-hdu1024-max-sum-plus-plus" v-on:click="closeDrawer" id="4200-hdu1024-max-sum-plus-plus-nav">
										 4/200, HDU1024, Max Sum Plus Plus
									</a>
								</li>
						
							</ul>
						
					
				
			
				
				
					
						
						
							<ul>
						
							<ul>
						
						
								<li>
				 					<a href="#%e9%a2%98%e6%84%8f--%e6%89%af%e6%b7%a1" v-on:click="closeDrawer" id="题意--扯淡-nav">
										 题意 &amp; 扯淡
									</a>
								</li>
						
							</ul>
						
							</ul>
						
					
				
			
				
				
					
						
						
							<ul>
						
							<ul>
						
						
								<li>
				 					<a href="#%e5%bc%80%e5%a7%8b%e6%ad%a3%e6%96%87" v-on:click="closeDrawer" id="开始正文-nav">
										 开始正文
									</a>
								</li>
						
							</ul>
						
							</ul>
						
					
				
			
				
				
					
						
						
							<ul>
						
							<ul>
						
						
								<li>
				 					<a href="#%e4%bb%a3%e7%a0%81" v-on:click="closeDrawer" id="代码-nav">
										 代码
									</a>
								</li>
						
							</ul>
						
							</ul>
						
					
				
			
				
				
					
						
						
							<ul>
						
						
								<li>
				 					<a href="#5200-hdu1028-ignatius-and-the-princess-iii" v-on:click="closeDrawer" id="5200-hdu1028-ignatius-and-the-princess-iii-nav">
										 5/200, HDU1028, Ignatius and the Princess III
									</a>
								</li>
						
							</ul>
						
					
				
			
				
				
					
						
						
							<ul>
						
							<ul>
						
						
								<li>
				 					<a href="#%e9%a2%98%e6%84%8f--%e6%89%af%e6%b7%a1-1" v-on:click="closeDrawer" id="题意--扯淡-1-nav">
										 题意 &amp; 扯淡
									</a>
								</li>
						
							</ul>
						
							</ul>
						
					
				
			
				
				
					
						
						
							<ul>
						
							<ul>
						
						
								<li>
				 					<a href="#%e6%ad%a3%e6%96%87" v-on:click="closeDrawer" id="正文-nav">
										 正文
									</a>
								</li>
						
							</ul>
						
							</ul>
						
					
				
			
				
				
					
						
						
							<ul>
						
							<ul>
						
						
								<li>
				 					<a href="#%e4%bb%a3%e7%a0%81-1" v-on:click="closeDrawer" id="代码-1-nav">
										 代码
									</a>
								</li>
						
							</ul>
						
							</ul>
						
					
				
			
				
				
					
						
						
							<ul>
						
						
								<li>
				 					<a href="#6200-hdu1025-constructing-roads-in-jgshinings-kingdom" v-on:click="closeDrawer" id="6200-hdu1025-constructing-roads-in-jgshinings-kingdom-nav">
										 6/200, HDU1025 Constructing Roads In JGShining’s Kingdom
									</a>
								</li>
						
							</ul>
						
					
				
			
				
				
					
						
						
							<ul>
						
						
								<li>
				 					<a href="#61-hdu1029-ignatius-and-the-princess-iv" v-on:click="closeDrawer" id="61-hdu1029-ignatius-and-the-princess-iv-nav">
										 6.1, HDU1029, Ignatius and the Princess IV
									</a>
								</li>
						
							</ul>
						
					
				
			
				
				
					
						
						
							<ul>
						
						
								<li>
				 					<a href="#65200-hdu1232-%e7%95%85%e9%80%9a%e5%b7%a5%e7%a8%8b" v-on:click="closeDrawer" id="65200-hdu1232-畅通工程-nav">
										 6.5/200, HDU1232, 畅通工程
									</a>
								</li>
						
							</ul>
						
					
				
			
	</div>

</div>
    
    <div class="pagination">
        <a id="globalBackToTop" class="pagination-action animated-visibility" href="#top" :class="{ invisible: scrollY == 0 }">
            <i class="material-icons pagination-action-icon">
                keyboard_arrow_up
            </i>
        </a>
        
    </div>
</div><div class="single-column-drawer-container" ref="drawer"
     v-bind:class="{ 'single-column-drawer-container-active': isDrawerOpen }">
    <div class="drawer-content">
        <div class="drawer-menu">
            
            
                
                    
                    
                    <a class="a-block drawer-menu-item false" href="/pages/guestbook">
                        留言板
                    </a>
            
                
                    
                    
                    <a class="a-block drawer-menu-item false" href="/pages/friends">
                        友情链接
                    </a>
            
                
                    
                    
                    <a class="a-block drawer-menu-item false" href="/tags">
                        标签
                    </a>
            
                
                    
                    
                    <a class="a-block drawer-menu-item false" href="/pages/about">
                        关于
                    </a>
            
            
            <div class="toc">


	<div class="toc-content">
	
		
		
		
		<center>- CATALOG -</center>
			
				
				
					
						
						
							<ul>
						
						
								<li>
				 					<a href="#%e5%81%b6%e7%84%b6%e5%ad%a6%e5%88%b0%e7%9a%84%e9%bb%91%e7%a7%91%e6%8a%80" v-on:click="closeDrawer" id="偶然学到的黑科技-nav">
										 偶然学到的黑科技
									</a>
								</li>
						
							</ul>
						
					
				
			
				
				
					
						
						
							<ul>
						
							<ul>
						
						
								<li>
				 					<a href="#stl-%e7%9a%84-unique" v-on:click="closeDrawer" id="stl-的-unique-nav">
										 STL 的 unique()
									</a>
								</li>
						
							</ul>
						
							</ul>
						
					
				
			
				
				
					
						
						
							<ul>
						
							<ul>
						
						
								<li>
				 					<a href="#stl-lower_bound-%e5%92%8c-upper_bound" v-on:click="closeDrawer" id="stl-lower_bound-和-upper_bound-nav">
										 STL lower_bound() 和 upper_bound()
									</a>
								</li>
						
							</ul>
						
							</ul>
						
					
				
			
				
				
					
						
						
							<ul>
						
							<ul>
						
						
								<li>
				 					<a href="#%e5%9b%9b%e8%a1%8c%e5%86%99%e5%87%ba%e6%9c%80%e9%95%bf%e4%b8%8a%e5%8d%87%e5%ad%90%e5%ba%8f%e5%88%97-lis-%e7%9a%84-onlogn-%e8%a7%a3%e6%b3%95" v-on:click="closeDrawer" id="四行写出最长上升子序列-lis-的-onlogn-解法-nav">
										 四行写出最长上升子序列 (LIS) 的 O(nlogn) 解法
									</a>
								</li>
						
							</ul>
						
							</ul>
						
					
				
			
				
				
					
						
						
							<ul>
						
						
								<li>
				 					<a href="#4200-hdu1024-max-sum-plus-plus" v-on:click="closeDrawer" id="4200-hdu1024-max-sum-plus-plus-nav">
										 4/200, HDU1024, Max Sum Plus Plus
									</a>
								</li>
						
							</ul>
						
					
				
			
				
				
					
						
						
							<ul>
						
							<ul>
						
						
								<li>
				 					<a href="#%e9%a2%98%e6%84%8f--%e6%89%af%e6%b7%a1" v-on:click="closeDrawer" id="题意--扯淡-nav">
										 题意 &amp; 扯淡
									</a>
								</li>
						
							</ul>
						
							</ul>
						
					
				
			
				
				
					
						
						
							<ul>
						
							<ul>
						
						
								<li>
				 					<a href="#%e5%bc%80%e5%a7%8b%e6%ad%a3%e6%96%87" v-on:click="closeDrawer" id="开始正文-nav">
										 开始正文
									</a>
								</li>
						
							</ul>
						
							</ul>
						
					
				
			
				
				
					
						
						
							<ul>
						
							<ul>
						
						
								<li>
				 					<a href="#%e4%bb%a3%e7%a0%81" v-on:click="closeDrawer" id="代码-nav">
										 代码
									</a>
								</li>
						
							</ul>
						
							</ul>
						
					
				
			
				
				
					
						
						
							<ul>
						
						
								<li>
				 					<a href="#5200-hdu1028-ignatius-and-the-princess-iii" v-on:click="closeDrawer" id="5200-hdu1028-ignatius-and-the-princess-iii-nav">
										 5/200, HDU1028, Ignatius and the Princess III
									</a>
								</li>
						
							</ul>
						
					
				
			
				
				
					
						
						
							<ul>
						
							<ul>
						
						
								<li>
				 					<a href="#%e9%a2%98%e6%84%8f--%e6%89%af%e6%b7%a1-1" v-on:click="closeDrawer" id="题意--扯淡-1-nav">
										 题意 &amp; 扯淡
									</a>
								</li>
						
							</ul>
						
							</ul>
						
					
				
			
				
				
					
						
						
							<ul>
						
							<ul>
						
						
								<li>
				 					<a href="#%e6%ad%a3%e6%96%87" v-on:click="closeDrawer" id="正文-nav">
										 正文
									</a>
								</li>
						
							</ul>
						
							</ul>
						
					
				
			
				
				
					
						
						
							<ul>
						
							<ul>
						
						
								<li>
				 					<a href="#%e4%bb%a3%e7%a0%81-1" v-on:click="closeDrawer" id="代码-1-nav">
										 代码
									</a>
								</li>
						
							</ul>
						
							</ul>
						
					
				
			
				
				
					
						
						
							<ul>
						
						
								<li>
				 					<a href="#6200-hdu1025-constructing-roads-in-jgshinings-kingdom" v-on:click="closeDrawer" id="6200-hdu1025-constructing-roads-in-jgshinings-kingdom-nav">
										 6/200, HDU1025 Constructing Roads In JGShining’s Kingdom
									</a>
								</li>
						
							</ul>
						
					
				
			
				
				
					
						
						
							<ul>
						
						
								<li>
				 					<a href="#61-hdu1029-ignatius-and-the-princess-iv" v-on:click="closeDrawer" id="61-hdu1029-ignatius-and-the-princess-iv-nav">
										 6.1, HDU1029, Ignatius and the Princess IV
									</a>
								</li>
						
							</ul>
						
					
				
			
				
				
					
						
						
							<ul>
						
						
								<li>
				 					<a href="#65200-hdu1232-%e7%95%85%e9%80%9a%e5%b7%a5%e7%a8%8b" v-on:click="closeDrawer" id="65200-hdu1232-畅通工程-nav">
										 6.5/200, HDU1232, 畅通工程
									</a>
								</li>
						
							</ul>
						
					
				
			
	</div>

</div>
            
        </div>
    </div>
</div>
<transition name="fade">
    <div v-bind:class="{ 'single-column-drawer-mask': mounted }" v-if="isDrawerOpen" v-on:click="toggleDrawer"></div>
</transition>
<nav ref="navBar" class="navbar sticky-top navbar-light single-column-nav-container">
    <div ref="navBackground" class="nav-background"></div>
    <div class="container container-narrow nav-content">
        <button id="nav_dropdown_btn" class="nav-dropdown-toggle" type="button" v-on:click="toggleDrawer">
            <i class="material-icons">
                menu
            </i>
        </button>
        <a ref="navTitle" class="navbar-brand" href="https://kirainmoe.com/">
            宇宙よりも遠い場所
        </a>
    </div>
</nav>
<div class="single-column-header-container" ref="pageHead"
     v-bind:style="{ transform: 'translateZ(0px) translateY('+.3*scrollY+'px)', opacity: 1-navOpacity }">
    <a href="https://kirainmoe.com/">
        <div class="single-column-header-title">宇宙よりも遠い場所</div>
        

    </a>
</div>
            <div id="content">
<div ref="streamContainer" class="stream-container">
    <div class="post-list-container post-list-container-shadow">
        <div class="post">
            
            
            

            <div class="post-head-wrapper-text-only"
                 style="background-image: url('/')">
                <div class="post-title">
                    每周解题报告 (2nd, 8/7~8/13)
                    <div class="post-meta">
                        <time itemprop="datePublished">
                            2017-08-13 16:46
                        </time>

                        

                        
                            <i class="material-icons" style="">label</i>
                            
                                <a href="/tags/oi">oi</a>
                                &nbsp;
                            
                                <a href="/tags/algorithm">algorithm</a>
                                &nbsp;
                            
                        
                    </div>
                </div>
            </div>
            
            <div class="post-body-wrapper">
                <div class="post-body">
                    <p>这一周主要在看 DP 的题目，嘛，都是一些我觉得很好<!-- raw HTML omitted -->但是我写不出来的<!-- raw HTML omitted -->题。本周的话做的都是 HDU 的题，虽然看了一下 Codeforces 上的一两道这样子。感觉收获还是蛮多的。</p>
<h1 id="偶然学到的黑科技">偶然学到的黑科技</h1>
<p>在开始正式的记题之前，想先记一下这周做题和看题解的时候新学到的东西。</p>
<h2 id="stl-的-unique">STL 的 unique()</h2>
<p>STL 中提供了一个很方便的去重函数 unique(), 其功能是去除相邻的重复元素（只保留一个），所以使用前需要对数组进行排序。用 unique 之后对于有序数组就不用手动循环去重了。</p>
<h2 id="stl-lower_bound-和-upper_bound">STL lower_bound() 和 upper_bound()</h2>
<p>lower_bound(arr, arr + n, val) 返回在有序数组 arr 的 [0, n) 区间中的第一个不小于 val 的值的地址。</p>
<p>相反的，upper_bound(arr, arr + n, val) 则返回第一个不小于 val 的值的地址。</p>
<p>所以，我们可以利用这个好东西：</p>
<h2 id="四行写出最长上升子序列-lis-的-onlogn-解法">四行写出最长上升子序列 (LIS) 的 O(nlogn) 解法</h2>
<p>LIS 的话，传统的写法是 O(n^2) 的，用二分优化过后可以降到 O(nlogn). 至于具体的原理我就不想详细在这里记录了，不然文章又要很长。</p>
<p>设 arr[] 为要求 LIS 的数列，lis[] 为保存 LIS 的数组。那么我们可以通过下面的代码来求 LIS：</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-cpp" data-lang="cpp">fill(lis, lis <span style="color:#f92672">+</span> n, INF);
<span style="color:#66d9ef">for</span> (<span style="color:#66d9ef">int</span> i <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>; i <span style="color:#f92672">&lt;</span> n; i<span style="color:#f92672">+</span><span style="color:#f92672">+</span>)
	<span style="color:#f92672">*</span>lower_bound(lis, lis <span style="color:#f92672">+</span> n, arr[i]) <span style="color:#f92672">=</span> arr[i];
<span style="color:#66d9ef">int</span> len <span style="color:#f92672">=</span> lower_bound(lis, lis <span style="color:#f92672">+</span> n, INF) <span style="color:#f92672">-</span> lis;			<span style="color:#75715e">// LIS 的长度
</span></code></pre></div><p>简单快捷。</p>
<h1 id="4200-hdu1024-max-sum-plus-plus">4/200, HDU1024, Max Sum Plus Plus</h1>
<h2 id="题意--扯淡">题意 &amp; 扯淡</h2>
<p>DP, 最大 m 子段和。没错题目很眼熟，是 P1003 的升级版，原题是最大连续子段和，这题是 n 子段和。是个挺不错的题目，之所以这么说是因为<!-- raw HTML omitted -->我不会<!-- raw HTML omitted -->它的时间和空间限制挺严格的，尤其是空间限制是 32M&hellip;.emmm&hellip;.</p>
<p>题意还是给你一个很长的数列 a1&hellip;.an，然后让你找出它的 m 个子序列使得这些子序列的总和最大，输出这个总和。1 &lt;= n &lt;= 1e6, m 的范围未知。注意就是求出的区间不能相交。</p>
<p>和上一题比一个比较人道的地方就是这一题不用输出位置了。但是反而比上一题更难了。看到 32M 的内存限制，反正你想到的不是正解的解法表示状态都需要二维，肯定就 GG 了。这道题的正解是用滚动数组优化，非常巧妙，<!-- raw HTML omitted -->以至于我到现在还不是很理解。<!-- raw HTML omitted --></p>
<p>说的不太清楚，如果没明白的可以看看别人写的。直接从 notepad 复制过来的，不想理通顺了，凑合着看吧。</p>
<h2 id="开始正文">开始正文</h2>
<p>虽然这道题的数据范围感人，n &lt;= 1e6, m 未知，内存 32M. 基本上告诉我们的信息就是二维的数组都开不下了，那么肯定要做一些黑科技的优化。但是这道题直接看正解是很难理解的，包括我现在看了正解还是有些地方不太明白，下面的解析是我按自己的理解 YY 的，可能有些地方并不一定对。</p>
<p>在正解之前，我们先来理解不做没优化的情况。如果抛开限制不谈，那么这道题的状态还是很好表示的。用 dp[i][j] 表示当子区间个数为 i，选取第 j 个数的时候的最大值。</p>
<p>对于 dp[i][j] 的值有两种决策：</p>
<p>1.将第 j 个数合并到第 i 个区间，区间个数不变，最大和为 dp[i][j-1]+a[j].
2.将第 j 个数单独划一个区间，此时区间个数由 i-1 变为 i，最大和为当区间长度为 i-1 的时候能取到的最大值 (也就是 dp[i-1][k]) 加上 a[j].</p>
<p>我们可以得到这样的状态转移方程：</p>
<pre><code>dp[i][j] = max(dp[i][j-1] + a[j], dp[i-1][k] + a[j]), 其中 k∈[i-1, j-1]
</code></pre><p>也即</p>
<pre><code>dp[i-1][k] = max(dp[i-1][i-1], dp[i-1][i], ....., dp[i-1][j-1]).
</code></pre><p>意思是，<strong>dp[i][j] 的取值只和 dp[i][j-1] 和 dp[i-1][k] 有关</strong>。由于 i = 1 =&gt; m，那么我们事实上可以将数组降成两个一维的，也就是运用滚动数组来解这道题目：</p>
<p>设 d[j] 表示第 j 个数一定取的时候的最大值(dp[i][j])，premax[j] 表示 max(dp[i][i], &hellip;, dp[i][j])。那么原方程就可以化为 <code>dp[j] = max(dp[j-1] + a[j], premax[j-1] + a[j]);</code></p>
<p>我们首先枚举区间的数量，用 curmax 表示当区间个数为 i 的时候能取得的最大值是多少，初始值为 -INF。</p>
<p>接着，我们枚举剩余的所有没有划分区间的数，每次枚举首先计算 dp[j]，然后再将 premax[j-1] 设为 curmax，然后更新 curmax 的值为 max(curmax, dp[j]). curmax 在这里的作用就相当于表示了 max(dp[i-1][i-1], &hellip;, dp[i-1][j-1])，我们可以利用滚动数组边 DP 边计算 curmax，然后把 curmax 更新给 premax 来保存. 全部计算完之后最后的结果就是最后一次更新后的 curmax 值了。</p>
<p>核心的伪代码如下：</p>
<pre><code>initialize curmax
for (i = 1 =&gt; m)
    let curmax = -infinity
    for (j = i =&gt; n)
        calculate dp[j] = max(dp[j-1] + a[j], premax[j-1] + a[j])
        update    premax[j-1] = curmax
        update    curmax = max(dp[j], curmax)
print curmax
</code></pre><h2 id="代码">代码</h2>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-cpp" data-lang="cpp"><span style="color:#75715e">/**
</span><span style="color:#75715e">* HDU1024 DP 最大连续 m 区间和 
</span><span style="color:#75715e">*/</span>
<span style="color:#75715e">#</span><span style="color:#75715e">include</span> <span style="color:#75715e">&lt;bits/stdc++.h&gt;</span><span style="color:#75715e">
</span><span style="color:#75715e"></span><span style="color:#66d9ef">using</span> <span style="color:#66d9ef">namespace</span> std;

<span style="color:#66d9ef">const</span> <span style="color:#66d9ef">int</span> MAXN <span style="color:#f92672">=</span> <span style="color:#ae81ff">1e6</span> <span style="color:#f92672">+</span> <span style="color:#ae81ff">10</span>;
<span style="color:#66d9ef">const</span> <span style="color:#66d9ef">int</span> INF <span style="color:#f92672">=</span> <span style="color:#ae81ff">1e9</span> <span style="color:#f92672">+</span> <span style="color:#ae81ff">7</span>;

<span style="color:#66d9ef">int</span> n, m;
<span style="color:#66d9ef">int</span> a[MAXN];
<span style="color:#66d9ef">int</span> dp[MAXN];
<span style="color:#66d9ef">int</span> premax[MAXN];

<span style="color:#66d9ef">int</span> <span style="color:#a6e22e">main</span>()
{
  <span style="color:#66d9ef">while</span> (scanf(<span style="color:#e6db74"></span><span style="color:#e6db74">&#34;</span><span style="color:#e6db74">%d%d</span><span style="color:#e6db74">&#34;</span>, <span style="color:#f92672">&amp;</span>m, <span style="color:#f92672">&amp;</span>n) <span style="color:#f92672">!</span><span style="color:#f92672">=</span> EOF)
  {
    <span style="color:#66d9ef">for</span> (<span style="color:#66d9ef">int</span> i <span style="color:#f92672">=</span> <span style="color:#ae81ff">1</span>; i <span style="color:#f92672">&lt;</span><span style="color:#f92672">=</span> n; i<span style="color:#f92672">+</span><span style="color:#f92672">+</span>)
    {
      scanf(<span style="color:#e6db74"></span><span style="color:#e6db74">&#34;</span><span style="color:#e6db74">%d</span><span style="color:#e6db74">&#34;</span>, <span style="color:#f92672">&amp;</span>a[i]);
    }
    
    <span style="color:#66d9ef">for</span> (<span style="color:#66d9ef">int</span> i <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>; i <span style="color:#f92672">&lt;</span><span style="color:#f92672">=</span> n; i<span style="color:#f92672">+</span><span style="color:#f92672">+</span>)
    {
      dp[i] <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>;
      premax[i] <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>;
    }
    
 		<span style="color:#75715e">// start solution
</span><span style="color:#75715e"></span>    <span style="color:#66d9ef">int</span> curmax;
    <span style="color:#66d9ef">for</span> (<span style="color:#66d9ef">int</span> i <span style="color:#f92672">=</span> <span style="color:#ae81ff">1</span>; i <span style="color:#f92672">&lt;</span><span style="color:#f92672">=</span> m; i<span style="color:#f92672">+</span><span style="color:#f92672">+</span>)
    {
      curmax <span style="color:#f92672">=</span> <span style="color:#f92672">-</span>INF;
      <span style="color:#66d9ef">for</span> (<span style="color:#66d9ef">int</span> j <span style="color:#f92672">=</span> i; j <span style="color:#f92672">&lt;</span><span style="color:#f92672">=</span> n; j<span style="color:#f92672">+</span><span style="color:#f92672">+</span>)
      {
        dp[j] <span style="color:#f92672">=</span> max(dp[j<span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>] <span style="color:#f92672">+</span> a[j], premax[j<span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>] <span style="color:#f92672">+</span> a[j]);
        premax[j<span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>] <span style="color:#f92672">=</span> curmax;
        curmax <span style="color:#f92672">=</span> max(curmax, dp[j]);
      }
    }
    
    printf(<span style="color:#e6db74"></span><span style="color:#e6db74">&#34;</span><span style="color:#e6db74">%d</span><span style="color:#ae81ff">\n</span><span style="color:#e6db74">&#34;</span>, curmax);
  }
  <span style="color:#66d9ef">return</span> <span style="color:#ae81ff">0</span>;
}
</code></pre></div><h1 id="5200-hdu1028-ignatius-and-the-princess-iii">5/200, HDU1028, Ignatius and the Princess III</h1>
<h2 id="题意--扯淡-1">题意 &amp; 扯淡</h2>
<p>依旧是 DP，虽然传闻有母函数的做法，但是本蒟蒻不知道也不会写什么母函数。题意大概就是给你一个整数 n，然后你看看这个整数 n 有多少种划分方法，例如说:</p>
<blockquote>
<p>4 = 4
= 3 + 1 
= 2 + 2 
= 2 + 1 + 1 
= 1 + 1 + 1 +1</p>
</blockquote>
<p>所以 4 有 5 种划分方法。</p>
<h2 id="正文">正文</h2>
<p>题意就是整数划分嘛，给定一个整数 n，求 n 有多少种分法，然后不能重复。</p>
<p>一开始都没想到是 DP 题……为什么可以用 DP 呢，一定是因为有重复计算的步骤啦。比如说我们要划分整数 4，把 4 划分到 3+1 的时候，显然 3 还能再往下划分，那么我们就可以直接利用之前已经计算过的结果了。</p>
<p>网上现成的 DP 题解大概有两种说法，但是状态转移方程是一样的。这个方程挺好写，但是不好想。</p>
<p>第一种解法是设 dp[i][j] 为将整数 i 划分为<strong>最多 j 个数的和</strong>的时候最多的方案数量。我觉得这种方案不太好理解，尤其是分类讨论的时候。所以以下分析以第二种解法为基础：设 dp[i][j] 为将整数 i 划分为<strong>不超过 j 的数的和</strong>的时候最多的方案数量。</p>
<ol>
<li>
<p>显然，当 i = 1 的时候，区间长度只能是 1，那么只有一种方法，也即 dp[1][1] = 1.</p>
</li>
<li>
<p>当 i &lt; j 的时候，由于不可能出现“目标数是 i，但是 j(j &gt; i) 是 i 的一个加数”的情况，所以我们让 dp[i][j] = dp[i][i].</p>
</li>
<li>
<p>当 i = j 的时候，dp[i][j] = dp[i][j-1] + 1</p>
</li>
</ol>
<p>(1) 用不超过 j 的整数划分的时候，我们考虑是否要分出 j 这个数，如果要分的话由于 n = m 那么只有一种方案，就是 m 本身（对应状态转移方程中的 1），如果不分，那么就是继承 dp[i][j-1] 的结果，即把 i 分成最大加数不超过 j-1 的多少份。</p>
<p>(2) 如果我们用第一种解法来理解这个式子，那么 dp[i][j] = 将 i 分成 j-1 段的方案数最大值 + 将 i 分成 j 段的方案数，由于 i = j，那么将 i 分成 j 段只有一种方案，就是有 j 个 1 的情况。</p>
<ol start="4">
<li>当 i &gt; j 的时候，也是最不好理解的一个部分。这个时候我们可以发现一个包含 i 个数的集合 U={1, 2, 3, &hellip;, i} 可以被 j 划分为两部分：一个是 A={j}，一个是 CU(A). 那么这个时候我们可以考虑是否要分出 j 这个数：如果要分出 j，那么我们只要计算剩下来的数的分离方案数，就是 dp[i-j][j]；如果不分，那么答案还是把 i 分成不超过 j-1 的结果，也就是 dp[i][j-1]. 将两种方案相加，我们得到了 dp[i][j] = dp[i-j][j] + dp[i][j-1];</li>
</ol>
<p>&ldquo;这样我们就完美地解决了这个问题。&rdquo;</p>
<h2 id="代码-1">代码</h2>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-cpp" data-lang="cpp"><span style="color:#75715e">#</span><span style="color:#75715e">include</span> <span style="color:#75715e">&lt;bits/stdc++.h&gt;</span><span style="color:#75715e">
</span><span style="color:#75715e"></span><span style="color:#66d9ef">const</span> <span style="color:#66d9ef">int</span> MAXN <span style="color:#f92672">=</span> <span style="color:#ae81ff">120</span> <span style="color:#f92672">+</span> <span style="color:#ae81ff">5</span>;
<span style="color:#66d9ef">int</span> n;
<span style="color:#66d9ef">int</span> dp[MAXN][MAXN];

<span style="color:#66d9ef">int</span> <span style="color:#a6e22e">main</span>()
{
  <span style="color:#66d9ef">while</span> (scanf(<span style="color:#e6db74"></span><span style="color:#e6db74">&#34;</span><span style="color:#e6db74">%d</span><span style="color:#e6db74">&#34;</span>, <span style="color:#f92672">&amp;</span>n) <span style="color:#f92672">!</span><span style="color:#f92672">=</span> EOF)
  {
    memset(dp, <span style="color:#ae81ff">0</span>, <span style="color:#66d9ef">sizeof</span>(dp));
    <span style="color:#66d9ef">for</span> (<span style="color:#66d9ef">int</span> i <span style="color:#f92672">=</span> <span style="color:#ae81ff">1</span>; i <span style="color:#f92672">&lt;</span><span style="color:#f92672">=</span> n; i<span style="color:#f92672">+</span><span style="color:#f92672">+</span>)
    {
      <span style="color:#66d9ef">for</span> (<span style="color:#66d9ef">int</span> j <span style="color:#f92672">=</span> <span style="color:#ae81ff">1</span>; j <span style="color:#f92672">&lt;</span><span style="color:#f92672">=</span> n; j<span style="color:#f92672">+</span><span style="color:#f92672">+</span>)
      {
        <span style="color:#66d9ef">if</span> (i <span style="color:#f92672">&lt;</span> j)
        {
          dp[i][j] <span style="color:#f92672">=</span> dp[i][i];
        }
        <span style="color:#66d9ef">if</span> (i <span style="color:#f92672">=</span><span style="color:#f92672">=</span> j)
        {
          dp[i][j] <span style="color:#f92672">=</span> dp[i][j<span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>] <span style="color:#f92672">+</span> <span style="color:#ae81ff">1</span>;
        }
        <span style="color:#66d9ef">if</span> (i <span style="color:#f92672">&gt;</span> j)
        {
          dp[i][j] <span style="color:#f92672">=</span> dp[i][j<span style="color:#f92672">-</span><span style="color:#ae81ff">1</span>] <span style="color:#f92672">+</span> dp[i<span style="color:#f92672">-</span>j][j];
        }
      }
    }
    printf(<span style="color:#e6db74"></span><span style="color:#e6db74">&#34;</span><span style="color:#e6db74">%d</span><span style="color:#ae81ff">\n</span><span style="color:#e6db74">&#34;</span>, dp[n][n]);
  }
  <span style="color:#66d9ef">return</span> <span style="color:#ae81ff">0</span>;
}

</code></pre></div><h1 id="6200-hdu1025-constructing-roads-in-jgshinings-kingdom">6/200, HDU1025 Constructing Roads In JGShining&rsquo;s Kingdom</h1>
<p>还是 DP。懒得翻题意了，自己戳原链接看好了QAQ：http://acm.hdu.edu.cn/showproblem.php?pid=1025</p>
<p>也就是在上文提到的最长上升子序列了，但是这一题的话用 O(n^2) 的解法是会 T 的。有两组数嘛，首先对一组排序（当然要保持和另外一组的对应关系），然后对另一组数做 LIS 就可以了。为什么是 LIS 自己画个图就知道了。</p>
<p>甚至可以，不用排序：在输入的时候只保存一组数据，而把另一组数作为数组的 key 即可，因为两组数是一一对应的，没有一对多的情况。</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-cpp" data-lang="cpp"><span style="color:#75715e">#</span><span style="color:#75715e">include</span> <span style="color:#75715e">&lt;bits/stdc++.h&gt;</span><span style="color:#75715e">
</span><span style="color:#75715e"></span><span style="color:#66d9ef">using</span> <span style="color:#66d9ef">namespace</span> std;

<span style="color:#66d9ef">const</span> <span style="color:#66d9ef">int</span> MAXN <span style="color:#f92672">=</span> <span style="color:#ae81ff">5</span> <span style="color:#f92672">*</span> <span style="color:#ae81ff">1e5</span> <span style="color:#f92672">+</span> <span style="color:#ae81ff">10</span>;
<span style="color:#66d9ef">const</span> <span style="color:#66d9ef">int</span> INF <span style="color:#f92672">=</span> <span style="color:#ae81ff">1e9</span> <span style="color:#f92672">+</span> <span style="color:#ae81ff">10</span>;

<span style="color:#66d9ef">int</span> n;
<span style="color:#66d9ef">int</span> ans <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>, kases <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>;
<span style="color:#66d9ef">int</span> maps[MAXN];
<span style="color:#66d9ef">int</span> dp[MAXN];
<span style="color:#66d9ef">int</span> LIS[MAXN];
<span style="color:#66d9ef">int</span> <span style="color:#a6e22e">main</span>()
{
  <span style="color:#66d9ef">while</span> (scanf(<span style="color:#e6db74"></span><span style="color:#e6db74">&#34;</span><span style="color:#e6db74">%d</span><span style="color:#e6db74">&#34;</span>, <span style="color:#f92672">&amp;</span>n) <span style="color:#f92672">=</span><span style="color:#f92672">=</span> <span style="color:#ae81ff">1</span>)
  {
    kases<span style="color:#f92672">+</span><span style="color:#f92672">+</span>;
    
    <span style="color:#75715e">// read data
</span><span style="color:#75715e"></span>    <span style="color:#66d9ef">for</span> (<span style="color:#66d9ef">int</span> i <span style="color:#f92672">=</span> <span style="color:#ae81ff">1</span>; i <span style="color:#f92672">&lt;</span><span style="color:#f92672">=</span> n; i<span style="color:#f92672">+</span><span style="color:#f92672">+</span>)
    {
      <span style="color:#66d9ef">int</span> x, y;
      scanf(<span style="color:#e6db74"></span><span style="color:#e6db74">&#34;</span><span style="color:#e6db74">%d%d</span><span style="color:#e6db74">&#34;</span>, <span style="color:#f92672">&amp;</span>x, <span style="color:#f92672">&amp;</span>y);
      maps[x] <span style="color:#f92672">=</span> y;
    }
    
    <span style="color:#75715e">// initialize
</span><span style="color:#75715e"></span>    <span style="color:#66d9ef">for</span> (<span style="color:#66d9ef">int</span> i <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>; i <span style="color:#f92672">&lt;</span><span style="color:#f92672">=</span> n; i<span style="color:#f92672">+</span><span style="color:#f92672">+</span>)
    {
      dp[i] <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>;
      LIS[i] <span style="color:#f92672">=</span> INF;
    }
    dp[<span style="color:#ae81ff">0</span>] <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>;
    
    <span style="color:#75715e">// LIS
</span><span style="color:#75715e"></span>    <span style="color:#66d9ef">for</span> (<span style="color:#66d9ef">int</span> i <span style="color:#f92672">=</span> <span style="color:#ae81ff">1</span>; i <span style="color:#f92672">&lt;</span><span style="color:#f92672">=</span> n; i<span style="color:#f92672">+</span><span style="color:#f92672">+</span>)
    {
      <span style="color:#f92672">*</span>lower_bound(LIS <span style="color:#f92672">+</span> <span style="color:#ae81ff">1</span>, LIS <span style="color:#f92672">+</span> <span style="color:#ae81ff">1</span> <span style="color:#f92672">+</span> n, maps[i]) <span style="color:#f92672">=</span> maps[i];
    }
    ans <span style="color:#f92672">=</span> lower_bound(LIS <span style="color:#f92672">+</span> <span style="color:#ae81ff">1</span>, LIS <span style="color:#f92672">+</span> <span style="color:#ae81ff">1</span> <span style="color:#f92672">+</span> n, INF) <span style="color:#f92672">-</span> LIS <span style="color:#f92672">-</span> <span style="color:#ae81ff">1</span>;
    
    printf(<span style="color:#e6db74"></span><span style="color:#e6db74">&#34;</span><span style="color:#e6db74">Case %d:</span><span style="color:#ae81ff">\n</span><span style="color:#e6db74">&#34;</span>, kases);
    printf(<span style="color:#e6db74"></span><span style="color:#e6db74">&#34;</span><span style="color:#e6db74">My king, at most %d </span><span style="color:#e6db74">&#34;</span>, ans);
    <span style="color:#66d9ef">if</span> (ans <span style="color:#f92672">=</span><span style="color:#f92672">=</span> <span style="color:#ae81ff">1</span>)
    {
      printf(<span style="color:#e6db74"></span><span style="color:#e6db74">&#34;</span><span style="color:#e6db74">road can be built.</span><span style="color:#ae81ff">\n</span><span style="color:#e6db74">&#34;</span>);
    }
    <span style="color:#66d9ef">else</span>
    {
      printf(<span style="color:#e6db74"></span><span style="color:#e6db74">&#34;</span><span style="color:#e6db74">roads can be built.</span><span style="color:#ae81ff">\n</span><span style="color:#e6db74">&#34;</span>);
    }
    printf(<span style="color:#e6db74"></span><span style="color:#e6db74">&#34;</span><span style="color:#ae81ff">\n</span><span style="color:#e6db74">&#34;</span>);
  }
  
  <span style="color:#66d9ef">return</span> <span style="color:#ae81ff">0</span>;
}

</code></pre></div><p>以下是自己写的时候顺手 YY 的注释:</p>
<blockquote>
<p>/**</p>
</blockquote>
<ul>
<li>附 nlogn 版的 LIS 写法：</li>
<li>设 LIS[MAXN] 为此数列的取得 LIS 最大值时的 LIS 一种可能的情况；</li>
<li>首先把 LIS 数组设为 INF：fill(LIS + 1， LIS + 1 + n, INF) ;</li>
<li>然后遍历数列，利用 lower_bound 函数二分查找到 LIS 中第一个不大于 a[i] 的值的位置 pos，</li>
<li>然后把 LIS[pos] 设为 a[i]. 也即 *lower_bound(LIS + 1, LIS + 1 , n, a[i]) = a[i];</li>
<li>最后统计 LIS 中不是 INF 的值的个数就可以了，即 ans = lower_bound(LIS + 1, LIS + 1 + n, INF); 
*/</li>
</ul>
<h1 id="61-hdu1029-ignatius-and-the-princess-iv">6.1, HDU1029, Ignatius and the Princess IV</h1>
<p>之所以是 6.1 是因为这题实在是太。水。了。不是一般的水。要不是某个题目分类的帖子里说这题是 DP，我才不会做呢（</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-cpp" data-lang="cpp"><span style="color:#75715e">/**
</span><span style="color:#75715e">* HDU1029 水题，谁说是 DP 的给我出来我保证打不死你 
</span><span style="color:#75715e">* 明明是这么简单的计数题！！ 
</span><span style="color:#75715e">*/</span>
<span style="color:#75715e">#</span><span style="color:#75715e">include</span> <span style="color:#75715e">&lt;bits/stdc++.h&gt; </span><span style="color:#75715e">
</span><span style="color:#75715e"></span><span style="color:#66d9ef">const</span> <span style="color:#66d9ef">int</span> MAXN <span style="color:#f92672">=</span> <span style="color:#ae81ff">1e6</span> <span style="color:#f92672">+</span> <span style="color:#ae81ff">5</span>;
<span style="color:#66d9ef">int</span> data[MAXN];
<span style="color:#66d9ef">int</span> <span style="color:#a6e22e">main</span>()
{
  <span style="color:#66d9ef">int</span> n, flag;
  <span style="color:#66d9ef">while</span> (scanf(<span style="color:#e6db74"></span><span style="color:#e6db74">&#34;</span><span style="color:#e6db74">%d</span><span style="color:#e6db74">&#34;</span>, <span style="color:#f92672">&amp;</span>n) <span style="color:#f92672">!</span><span style="color:#f92672">=</span> EOF)
  {
    <span style="color:#66d9ef">bool</span> state <span style="color:#f92672">=</span> true;
    flag <span style="color:#f92672">=</span> (n <span style="color:#f92672">+</span> <span style="color:#ae81ff">1</span>) <span style="color:#f92672">/</span> <span style="color:#ae81ff">2</span>;
    
    memset(data, <span style="color:#ae81ff">0</span>, <span style="color:#66d9ef">sizeof</span>(data));
    
    <span style="color:#66d9ef">for</span> (<span style="color:#66d9ef">int</span> i <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>; i <span style="color:#f92672">&lt;</span> n; i<span style="color:#f92672">+</span><span style="color:#f92672">+</span>)
    {
      <span style="color:#66d9ef">int</span> x;
      scanf(<span style="color:#e6db74"></span><span style="color:#e6db74">&#34;</span><span style="color:#e6db74">%d</span><span style="color:#e6db74">&#34;</span>, <span style="color:#f92672">&amp;</span>x);
      data[x]<span style="color:#f92672">+</span><span style="color:#f92672">+</span>;
      <span style="color:#66d9ef">if</span> (data[x] <span style="color:#f92672">&gt;</span><span style="color:#f92672">=</span> flag <span style="color:#f92672">&amp;</span><span style="color:#f92672">&amp;</span> state)
      {
        printf(<span style="color:#e6db74"></span><span style="color:#e6db74">&#34;</span><span style="color:#e6db74">%d</span><span style="color:#ae81ff">\n</span><span style="color:#e6db74">&#34;</span>, x);
        state <span style="color:#f92672">=</span> false;
      }
    }
  }
  <span style="color:#66d9ef">return</span> <span style="color:#ae81ff">0</span>;
}

</code></pre></div><h1 id="65200-hdu1232-畅通工程">6.5/200, HDU1232, 畅通工程</h1>
<p>畅通工程系列的第一题，这是一道裸的并查集 OvO. 只要理解并查集的都会写啦。题目有个“温馨提示”，但是并不影响我们做题，管他什么多条道路连接的输入合不合法呢。</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-cpp" data-lang="cpp"><span style="color:#75715e">#</span><span style="color:#75715e">include</span> <span style="color:#75715e">&lt;bits/stdc++.h&gt; </span><span style="color:#75715e">
</span><span style="color:#75715e"></span>
<span style="color:#66d9ef">const</span> <span style="color:#66d9ef">int</span> MAXN <span style="color:#f92672">=</span> <span style="color:#ae81ff">1e3</span> <span style="color:#f92672">+</span> <span style="color:#ae81ff">10</span>;
<span style="color:#66d9ef">int</span> p[MAXN];
<span style="color:#66d9ef">int</span> n, m;
<span style="color:#66d9ef">int</span> cnt <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>;

<span style="color:#66d9ef">void</span> <span style="color:#a6e22e">init</span>()
{
  cnt <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>;
  <span style="color:#66d9ef">for</span> (<span style="color:#66d9ef">int</span> i <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>; i <span style="color:#f92672">&lt;</span> MAXN; i<span style="color:#f92672">+</span><span style="color:#f92672">+</span>)
  {
    p[i] <span style="color:#f92672">=</span> i;
  }
}

<span style="color:#66d9ef">int</span> <span style="color:#a6e22e">find</span>(<span style="color:#66d9ef">int</span> x)
{
  <span style="color:#66d9ef">return</span> x <span style="color:#f92672">=</span><span style="color:#f92672">=</span> p[x] <span style="color:#f92672">?</span> x : p[x] <span style="color:#f92672">=</span> find(p[x]);
}

<span style="color:#66d9ef">void</span> <span style="color:#a6e22e">unions</span>(<span style="color:#66d9ef">int</span> x, <span style="color:#66d9ef">int</span> y)
{
  <span style="color:#66d9ef">int</span> px <span style="color:#f92672">=</span> find(x),
      py <span style="color:#f92672">=</span> find(y);
  <span style="color:#66d9ef">if</span> (px <span style="color:#f92672">=</span><span style="color:#f92672">=</span> py)
  {
    <span style="color:#66d9ef">return</span>;
  }
  <span style="color:#66d9ef">else</span>
  {
    p[px] <span style="color:#f92672">=</span> py;
    cnt<span style="color:#f92672">+</span><span style="color:#f92672">+</span>;
  }
}

<span style="color:#66d9ef">int</span> <span style="color:#a6e22e">main</span>()
{
  <span style="color:#66d9ef">while</span> (scanf(<span style="color:#e6db74"></span><span style="color:#e6db74">&#34;</span><span style="color:#e6db74">%d</span><span style="color:#e6db74">&#34;</span>, <span style="color:#f92672">&amp;</span>n) <span style="color:#f92672">!</span><span style="color:#f92672">=</span> EOF <span style="color:#f92672">&amp;</span><span style="color:#f92672">&amp;</span> n <span style="color:#f92672">!</span><span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>)
  {
    init(); 
    scanf(<span style="color:#e6db74"></span><span style="color:#e6db74">&#34;</span><span style="color:#e6db74">%d</span><span style="color:#e6db74">&#34;</span>, <span style="color:#f92672">&amp;</span>m);
    <span style="color:#66d9ef">for</span> (<span style="color:#66d9ef">int</span> i <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>; i <span style="color:#f92672">&lt;</span> m; i<span style="color:#f92672">+</span><span style="color:#f92672">+</span>)
    {
      <span style="color:#66d9ef">int</span> x, y;
      scanf(<span style="color:#e6db74"></span><span style="color:#e6db74">&#34;</span><span style="color:#e6db74">%d%d</span><span style="color:#e6db74">&#34;</span>, <span style="color:#f92672">&amp;</span>x, <span style="color:#f92672">&amp;</span>y);
      unions(x, y);
    }
    printf(<span style="color:#e6db74"></span><span style="color:#e6db74">&#34;</span><span style="color:#e6db74">%d</span><span style="color:#ae81ff">\n</span><span style="color:#e6db74">&#34;</span>, (n <span style="color:#f92672">-</span> <span style="color:#ae81ff">1</span> <span style="color:#f92672">-</span> cnt));
  }
  <span style="color:#66d9ef">return</span> <span style="color:#ae81ff">0</span>;
}

</code></pre></div><p>剩下的是一些旧题重做的，然后就不贴上来了。</p>
                    <HR width="100%" id="EOF">
                    <p style="color:#777;">Last modified on 2017-08-13</p>
                </div>
                
            </div>
            
            
            <nav class="post-pagination">

                
                <a class="newer-posts" href="https://kirainmoe.com/blog/post/practicing-record-3rd-8-14-8-20/">
                    Next<br>每周解题报告 (3rd, 8/14~8/20)
                </a>
                
                
                
                <a class="older-posts" href="https://kirainmoe.com/blog/post/practicing-record-1st-8-3-8-6/">
                    Previous<br>每周解题报告 (1st, 8/3~8/6)
                </a>
                
            </nav>
            <div class="post-comment-wrapper">
                
<div class="post-comment-wrapper">
<div id="disqus_thread"></div>
<script type="application/javascript">
    var disqus_config = function () {
    
    
    
    };
    (function() {
        if (["localhost", "127.0.0.1"].indexOf(window.location.hostname) != -1) {
            document.getElementById('disqus_thread').innerHTML = 'Disqus comments not available by default when the website is previewed locally.';
            return;
        }
        var d = document, s = d.createElement('script'); s.async = true;
        s.src = '//' + "yume-diary" + '.disqus.com/embed.js';
        s.setAttribute('data-timestamp', +new Date());
        (d.head || d.body).appendChild(s);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="https://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
</div>




            </div>
        </div>
    </div>
</div>

            </div><div id="single-column-footer">&copy;
	
	2016-2020 宇宙よりも遠い場所
	

/

<a href="https://creativecommons.org/licenses/by-sa/4.0/deed.zh">CC-BY-SA 4.0</a>

<br>

Published with <a href="https://gohugo.io">Hugo</a> / Theme <a href="https://github.com/amazingrise/hugo-theme-diary" title="Author: Rise @ amazingrise.net">Diary</a>
</div>
    	</div>
    <script src="https://kirainmoe.com//js/journal.js"></script>
    </body>
</html>
