<!DOCTYPE html>
<html><head>
<title>记自己的第一次差点翻车的出题经历</title>

<meta charset="utf-8">
<meta name="X-UA-Compatible" content="IE=edge">
<meta name="google-site-verification" content="">
<meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport">
<meta content="telephone=no" name="format-detection">
<meta name="renderer" content="webkit">
<meta name="theme-color" content="#ffffff">




<script type="application/javascript">
var doNotTrack = false;
if (!doNotTrack) {
	(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
	(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
	m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
	})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
	ga('create', 'UA-111347233-1', 'auto');
	
	ga('send', 'pageview');
}
</script>



<script src="/vendor/js/jquery.min.js" ></script>
<script src="/vendor/js/popper.min.js" ></script>
<script src="/vendor/js/bootstrap.min.js" ></script>
<script src="/vendor/js/smooth-scroll.polyfills.min.js" ></script>
<link type="text/css" rel="stylesheet" href="/vendor/css/bootstrap.min.css">
<script src="/vendor/js/vue.min.js" ></script>




<link rel="stylesheet" href="https://kirainmoe.com/scss/journal.min.75e350a979186b10ecf739a405199a5eaf37fd6bd3463a78ae5c70c634963fde.css" integrity="sha256-deNQqXkYaxDs9zmkBRmaXq83/WvTRjp4rlxwxjSWP94=" media="screen">

<script src="https://kirainmoe.com//js/loadCSS.js"></script>
<script src="https://kirainmoe.com//js/table.js"></script>


<script src="https://kirainmoe.com//js/toc.js"></script>


<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
      showProcessingMessages: false,
      messageStyle: "none", 
      jax: ["input/TeX", "output/HTML-CSS"],
      tex2jax: {
        inlineMath: [["$", "$"], ["\\(", "\\)"]],
        displayMath: [["$$", "$$"], ["\\[", "\\]"]],
        skipTags: ["script", "noscript", "style", "textarea", "pre", "code", "a"]
      },
      "HTML-CSS": {
        availableFonts: ["STIX", "TeX"], 
        showMathMenu: false
      }
  });
</script>
<script type="text/javascript" async src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-MML-AM_CHTML"></script>

<script src="https://unpkg.com/muse-player/dist/assets/muse-player.js"></script>

<script>
    loadCSS("https://fonts.googleapis.com/css?family=Lora|Montserrat|Fira+Mono|Noto+Serif+SC|Material+Icons");
</script>

</head><body>
    	<div id="app"><div ref="sideContainer" class="side-container">
    
    <a class="a-block nav-head false" href="https://kirainmoe.com/">
    
        <div class="nav-title">
            宇宙よりも遠い場所
        </div>
        
    </a>

    <div class="nav-link-list">
        
        
            
                
                
                <a class="a-block nav-link-item false" href="/pages/guestbook">
                    留言板
                </a>
        
            
                
                
                <a class="a-block nav-link-item false" href="/pages/friends">
                    友情链接
                </a>
        
            
                
                
                <a class="a-block nav-link-item false" href="/tags">
                    标签
                </a>
        
            
                
                
                <a class="a-block nav-link-item false" href="/pages/about">
                    关于
                </a>
        
    </div>

    

    <div class="nav-footer">
        &copy;
	
	2016-2020 宇宙よりも遠い場所
	

/

<a href="https://creativecommons.org/licenses/by-sa/4.0/deed.zh">CC-BY-SA 4.0</a>

<br>

Published with <a href="https://gohugo.io">Hugo</a> / Theme <a href="https://github.com/amazingrise/hugo-theme-diary" title="Author: Rise @ amazingrise.net">Diary</a>

    </div>
    
</div><div ref="extraContainer" class="extra-container">
    
    <div class="toc animated-visibility" :class="{ invisible: scrollY <= 140 }">


	<div class="toc-content">
	
		
		
		
		<center>- CATALOG -</center>
			
				
				
					
						
						
							<ul>
						
						
								<li>
				 					<a href="#%e6%84%9f%e5%8f%97" v-on:click="closeDrawer" id="感受-nav">
										 感受
									</a>
								</li>
						
							</ul>
						
					
				
			
				
				
					
						
						
							<ul>
						
						
								<li>
				 					<a href="#%e8%82%9d%e6%b4%bb%e5%8a%a8-eventpasccpp" v-on:click="closeDrawer" id="肝活动-eventpasccpp-nav">
										 肝活动 (event.pas/.c/.cpp)
									</a>
								</li>
						
							</ul>
						
					
				
			
				
				
					
						
						
							<ul>
						
							<ul>
						
						
								<li>
				 					<a href="#%e9%a2%98%e7%9b%ae%e6%8f%8f%e8%bf%b0" v-on:click="closeDrawer" id="题目描述-nav">
										 题目描述
									</a>
								</li>
						
							</ul>
						
							</ul>
						
					
				
			
				
				
					
						
						
							<ul>
						
							<ul>
						
						
								<li>
				 					<a href="#%e8%be%93%e5%85%a5%e6%95%b0%e6%8d%ae" v-on:click="closeDrawer" id="输入数据-nav">
										 输入数据
									</a>
								</li>
						
							</ul>
						
							</ul>
						
					
				
			
				
				
					
						
						
							<ul>
						
							<ul>
						
						
								<li>
				 					<a href="#%e8%be%93%e5%87%ba%e6%95%b0%e6%8d%ae" v-on:click="closeDrawer" id="输出数据-nav">
										 输出数据
									</a>
								</li>
						
							</ul>
						
							</ul>
						
					
				
			
				
				
					
						
						
							<ul>
						
							<ul>
						
						
								<li>
				 					<a href="#%e8%be%93%e5%85%a5%e6%a0%b7%e4%be%8b" v-on:click="closeDrawer" id="输入样例-nav">
										 输入样例
									</a>
								</li>
						
							</ul>
						
							</ul>
						
					
				
			
				
				
					
						
						
							<ul>
						
							<ul>
						
						
								<li>
				 					<a href="#%e8%be%93%e5%87%ba%e6%a0%b7%e4%be%8b" v-on:click="closeDrawer" id="输出样例-nav">
										 输出样例
									</a>
								</li>
						
							</ul>
						
							</ul>
						
					
				
			
				
				
					
						
						
							<ul>
						
							<ul>
						
						
								<li>
				 					<a href="#%e6%95%b0%e6%8d%ae%e8%a7%84%e6%a8%a1" v-on:click="closeDrawer" id="数据规模-nav">
										 数据规模
									</a>
								</li>
						
							</ul>
						
							</ul>
						
					
				
			
				
				
					
						
						
							<ul>
						
						
								<li>
				 					<a href="#%e9%a2%98%e8%a7%a3" v-on:click="closeDrawer" id="题解-nav">
										 题解
									</a>
								</li>
						
							</ul>
						
					
				
			
				
				
					
						
						
							<ul>
						
						
								<li>
				 					<a href="#%e9%99%84%e4%b8%8a%e8%92%9f%e8%92%bb%e7%9a%84%e6%a0%87%e7%a8%8b" v-on:click="closeDrawer" id="附上蒟蒻的标程-nav">
										 附上蒟蒻的标程
									</a>
								</li>
						
							</ul>
						
					
				
			
	</div>

</div>
    
    <div class="pagination">
        <a id="globalBackToTop" class="pagination-action animated-visibility" href="#top" :class="{ invisible: scrollY == 0 }">
            <i class="material-icons pagination-action-icon">
                keyboard_arrow_up
            </i>
        </a>
        
    </div>
</div><div class="single-column-drawer-container" ref="drawer"
     v-bind:class="{ 'single-column-drawer-container-active': isDrawerOpen }">
    <div class="drawer-content">
        <div class="drawer-menu">
            
            
                
                    
                    
                    <a class="a-block drawer-menu-item false" href="/pages/guestbook">
                        留言板
                    </a>
            
                
                    
                    
                    <a class="a-block drawer-menu-item false" href="/pages/friends">
                        友情链接
                    </a>
            
                
                    
                    
                    <a class="a-block drawer-menu-item false" href="/tags">
                        标签
                    </a>
            
                
                    
                    
                    <a class="a-block drawer-menu-item false" href="/pages/about">
                        关于
                    </a>
            
            
            <div class="toc">


	<div class="toc-content">
	
		
		
		
		<center>- CATALOG -</center>
			
				
				
					
						
						
							<ul>
						
						
								<li>
				 					<a href="#%e6%84%9f%e5%8f%97" v-on:click="closeDrawer" id="感受-nav">
										 感受
									</a>
								</li>
						
							</ul>
						
					
				
			
				
				
					
						
						
							<ul>
						
						
								<li>
				 					<a href="#%e8%82%9d%e6%b4%bb%e5%8a%a8-eventpasccpp" v-on:click="closeDrawer" id="肝活动-eventpasccpp-nav">
										 肝活动 (event.pas/.c/.cpp)
									</a>
								</li>
						
							</ul>
						
					
				
			
				
				
					
						
						
							<ul>
						
							<ul>
						
						
								<li>
				 					<a href="#%e9%a2%98%e7%9b%ae%e6%8f%8f%e8%bf%b0" v-on:click="closeDrawer" id="题目描述-nav">
										 题目描述
									</a>
								</li>
						
							</ul>
						
							</ul>
						
					
				
			
				
				
					
						
						
							<ul>
						
							<ul>
						
						
								<li>
				 					<a href="#%e8%be%93%e5%85%a5%e6%95%b0%e6%8d%ae" v-on:click="closeDrawer" id="输入数据-nav">
										 输入数据
									</a>
								</li>
						
							</ul>
						
							</ul>
						
					
				
			
				
				
					
						
						
							<ul>
						
							<ul>
						
						
								<li>
				 					<a href="#%e8%be%93%e5%87%ba%e6%95%b0%e6%8d%ae" v-on:click="closeDrawer" id="输出数据-nav">
										 输出数据
									</a>
								</li>
						
							</ul>
						
							</ul>
						
					
				
			
				
				
					
						
						
							<ul>
						
							<ul>
						
						
								<li>
				 					<a href="#%e8%be%93%e5%85%a5%e6%a0%b7%e4%be%8b" v-on:click="closeDrawer" id="输入样例-nav">
										 输入样例
									</a>
								</li>
						
							</ul>
						
							</ul>
						
					
				
			
				
				
					
						
						
							<ul>
						
							<ul>
						
						
								<li>
				 					<a href="#%e8%be%93%e5%87%ba%e6%a0%b7%e4%be%8b" v-on:click="closeDrawer" id="输出样例-nav">
										 输出样例
									</a>
								</li>
						
							</ul>
						
							</ul>
						
					
				
			
				
				
					
						
						
							<ul>
						
							<ul>
						
						
								<li>
				 					<a href="#%e6%95%b0%e6%8d%ae%e8%a7%84%e6%a8%a1" v-on:click="closeDrawer" id="数据规模-nav">
										 数据规模
									</a>
								</li>
						
							</ul>
						
							</ul>
						
					
				
			
				
				
					
						
						
							<ul>
						
						
								<li>
				 					<a href="#%e9%a2%98%e8%a7%a3" v-on:click="closeDrawer" id="题解-nav">
										 题解
									</a>
								</li>
						
							</ul>
						
					
				
			
				
				
					
						
						
							<ul>
						
						
								<li>
				 					<a href="#%e9%99%84%e4%b8%8a%e8%92%9f%e8%92%bb%e7%9a%84%e6%a0%87%e7%a8%8b" v-on:click="closeDrawer" id="附上蒟蒻的标程-nav">
										 附上蒟蒻的标程
									</a>
								</li>
						
							</ul>
						
					
				
			
	</div>

</div>
            
        </div>
    </div>
</div>
<transition name="fade">
    <div v-bind:class="{ 'single-column-drawer-mask': mounted }" v-if="isDrawerOpen" v-on:click="toggleDrawer"></div>
</transition>
<nav ref="navBar" class="navbar sticky-top navbar-light single-column-nav-container">
    <div ref="navBackground" class="nav-background"></div>
    <div class="container container-narrow nav-content">
        <button id="nav_dropdown_btn" class="nav-dropdown-toggle" type="button" v-on:click="toggleDrawer">
            <i class="material-icons">
                menu
            </i>
        </button>
        <a ref="navTitle" class="navbar-brand" href="https://kirainmoe.com/">
            宇宙よりも遠い場所
        </a>
    </div>
</nav>
<div class="single-column-header-container" ref="pageHead"
     v-bind:style="{ transform: 'translateZ(0px) translateY('+.3*scrollY+'px)', opacity: 1-navOpacity }">
    <a href="https://kirainmoe.com/">
        <div class="single-column-header-title">宇宙よりも遠い場所</div>
        

    </a>
</div>
            <div id="content">
<div ref="streamContainer" class="stream-container">
    <div class="post-list-container post-list-container-shadow">
        <div class="post">
            
            
            

            <div class="post-head-wrapper-text-only"
                 style="background-image: url('/')">
                <div class="post-title">
                    记自己的第一次差点翻车的出题经历
                    <div class="post-meta">
                        <time itemprop="datePublished">
                            2017-10-29 21:01
                        </time>

                        

                        
                            <i class="material-icons" style="">label</i>
                            
                                <a href="/tags/oi">oi</a>
                                &nbsp;
                            
                                <a href="/tags/algorithm">algorithm</a>
                                &nbsp;
                            
                        
                    </div>
                </div>
            </div>
            
            <div class="post-body-wrapper">
                <div class="post-body">
                    <p>复赛在即，我们学校里面的四个撒币不知道是谁突发奇想，说要出一套模拟题。于是我们四个人分别出了一道要多恶心有多恶心的题= =本来嘛是要在学校内部自己测的，不过人太少，不好玩，于是就连夜 py 到洛谷上搞了公开赛。从早上 8 点到中午 12 点，虽然出了很多的锅，不过还是要记录一下我的第一次出题经历（</p>
<!-- raw HTML omitted -->
<h1 id="感受">感受</h1>
<p>各位有兴趣看题目的话地址在这里：
<a href="https://www.luogu.org/contest/show?tid=4291">https://www.luogu.org/contest/show?tid=4291</a>
<a href="https://www.luogu.org/problemnew/show/U14667">https://www.luogu.org/problemnew/show/U14667</a></p>
<p>安排给我的出题难度是压轴（也就是最难的那一题），不过被我活生生出成了水题= =……出了一道状压 DP 的模板题（大概），然后呢并没有人帮我验题（事实上他们三个人互相 A 不掉对方的题目总共前前后后调到比赛都开始了还在出锅）……</p>
<p>于是因此发生了一件很尴尬的事情，就是造数据的时候呢，因为 std 出了锅少写了一个等于号，然后造出了一堆错误的数据，把正解卡到了 30 分= =比赛完了之后写题解才发现，卧槽标程都出锅了，然后更新数据、重传数据，联系了 luogu 的管理员帮我们重测，然后还一个一个给可能写了正解的参赛者发私信道歉+让他们请求重新提交……</p>
<p>提交了 80 多个人有将近 90% 是输出 No Answer 骗分的233333早知道不设这个点了（</p>
<p>最后重新提交完有两个写出了正解的 julao，一个写了接近正解但是差一点的 dalao……嘛，看起来这题出得还是挺水的（不过话说回来，比同校人出的那些题良心多了2333</p>
<hr>
<p>接下来是题目：</p>
<h1 id="肝活动-eventpasccpp">肝活动 (event.pas/.c/.cpp)</h1>
<p>时间限制：1s / 空间限制：512MB / 测试点数目：20</p>
<h2 id="题目描述">题目描述</h2>
<p>Yume 最近在玩一个名为《LoveLive! School idol festival》的音乐游戏。他之所以喜欢上这个游戏，是因为这个游戏对非洲人十分友好，即便你脸黑到抽不出好卡，还可以通过在每个月举办的两次活动中达成一定的目标来获得奖励。
Yume 很喜欢这一期活动奖励卡的卡面，于是他决定要肝这一期的活动，拿到活动奖励。这一期的活动规则很特殊，玩家需要在活动规定的结束时间前，完成所有指定的歌曲**（每首歌只能打一次）**，并获得一定的分数，就可以拿到活动奖励。如果在规定的时间前没有完成所有的歌曲，或者分数不够奖励的分数线，则不能领取活动奖励。每首歌有一个限定的奖励开放时间，玩家如果在这段时间内完成了这首歌，便可以获得一定的分数**（获得的分数 = 开放时间 - 当前已用的总时间）**。如果超出了这段时间之后再完成这首歌，就不能获得分数了。
这样的规则对 Yume 这样的老玩家来说本应是轻而易举，但不巧的是 Yume 把活动的结束时间记成了活动的开始时间，以至于当他上线跃跃欲试的时候，惊恐地发现活动已经快要结束了。现在他想知道，在剩余的时间之内，他能否完成所有的歌、达成奖励的分数线拿到活动卡。为了节省时间，他把这个问题交给了你来解决。请你根据给定的数据，帮他计算出能否在剩余的时间内达成目标。如果能，请告诉他完成每首歌曲的顺序。</p>
<h2 id="输入数据">输入数据</h2>
<p>从文件 event.in 读取输入数据。
输入的第一行是三个整数 n, m, t，分别表示规定完成的歌曲数目、获得奖励需要达到的最低分数和距离活动结束剩余的时间。
接下来有 n 行，第 i 行有一个字符串 Si 和两个整数 Ti 和 Mi，表示第 i 首歌的歌名为 Si，完成第 i 首歌所需要的时间为 Ti，第 i 首歌的奖励开放时间剩余 Mi。保证 Ti ≤ Mi. 其中数据已按 Si 的字典序给出。</p>
<h2 id="输出数据">输出数据</h2>
<p>将答案输出到 event.out 中。
如果在活动结束前 Yume 可以完成指定的目标拿到奖励，则在第一行输出一个整数 C，表示在获得奖励的前提下，所能够获得的分数的最大值；接下来的 n 行中，按照完成歌曲的顺序输出第 i 首歌的歌名。如果有多种可能性，则输出字典序最小的情况。
如果在活动结束前 Yume 不能完成所有的歌曲，输出 No Answer .</p>
<h2 id="输入样例">输入样例</h2>
<blockquote>
<p>【样例1】
3 2 10
BokutachiwaHitotsunoHikari 3 8
Korekara 1 2
SnowHalation 2 5</p>
</blockquote>
<blockquote>
<p>【样例2】
2 1 2
AoizoraJumpingHeart 1 2
TimeLapse 2 4</p>
</blockquote>
<h2 id="输出样例">输出样例</h2>
<blockquote>
<p>【样例1】
6
SnowHalation
BokutachiwaHitotsunoHikari
Korekara</p>
</blockquote>
<blockquote>
<p>【样例2】
No Answer</p>
</blockquote>
<blockquote>
<p>样例1说明：
首先打第三首歌，用时 2，获得分数为 (5-2)=3；
接着打第一首歌，用时 3，获得分数为 (8-2-3)=3；
最后打第二首歌，用时 1，由于打完第二首歌之后总用时为 6，但第二首歌的奖励获得时间为 2，因此不能获得分数。
总用时为 6 &lt; 10，分数为 6 &gt; 2，完成目标。</p>
</blockquote>
<h2 id="数据规模">数据规模</h2>
<p>对于 0% 的数据，与测试数据完全相同。
对于 20% 的数据，满足 n ≤ 5。
对于 40% 的数据，满足 n ≤ 9。
对于 70% 的数据，满足 n ≤ 15。
对于 100% 的数据，满足 n ≤ 22，Si 的长度不超过 50. 保证 m, t 和 Ti, Mi 以及其相加的结果都在 int 的最大范围内。
另有 10% 的数据满足 Sigma(T1, T2, …, Tn) &lt; t.</p>
<h1 id="题解">题解</h1>
<p>没错，这是一道状态压缩 DP（而且事实上是道水题吧，感觉对不起提高+/省选-的评级 Orz）。很多人没写出来大概是因为被这个比赛发起人瞎 YY 的评级吓到了……不太明白状态压缩 DP 原理的= =嘛，建议先去理解一下，出题人太懒，不想在题解里写状压 DP 的原理（逃</p>
<p>首先要读懂题目的意思，找出关键的信息，这个不多说。注意一下分数的计算方式和获得奖励的条件即可。</p>
<p>先考虑无解的情况，第一种情况是当 <code>Sigma(T1, T2, T3, ..., Tn) &lt; t</code> 的时候，在剩余时间内无法完成所有的歌，很明显应该输出 <code>No Answer</code>.</p>
<p>还有一种情况是即便在规定时间内打完了所有的歌，仍然达不到规定的分数 m 的时候，也是 <code>No Answer</code>，这种情况我们只能找到最大值后才计算。可惜有一位离正解很近的 julao 忘记了这种情况被砍掉了 15 = =</p>
<p>再就是状态的设计。题目中规定要完成每首歌，并且每首歌都只能打一次，那么我们设 <code>dp[i]</code> 表示<strong>当前已完成的歌曲编号的二进制状态为 i 的情况下，能取得的分数的最大值</strong>。</p>
<p>那么转移方程就显然了：<code>dp[i] = max(dp[i], dp[i &amp; (~j)] + limit[j] - curTime[i])</code>，其中 <code>j</code> 是当前考虑的歌曲编号，那么 <code>i &amp; (~j)</code> 就是打第 j 首歌之前的状态，<code>limit[j]</code> 表示能获得奖励分数的规定时间，<code>curTime[i]</code> 就是打完第 j 首歌之后的总用时。</p>
<p>我们可以看到完成的歌曲的二进制状态为 i 时所用的时间 <code>curTime[i]</code> 与打歌的顺序无关，所以我们可以预处理计算出这个 <code>curTime</code> 数组:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-cpp" data-lang="cpp"><span style="color:#66d9ef">for</span> (<span style="color:#66d9ef">int</span> i <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>; i <span style="color:#f92672">&lt;</span> (<span style="color:#ae81ff">1</span> <span style="color:#f92672">&lt;</span><span style="color:#f92672">&lt;</span> <span style="color:#ae81ff">22</span>); i<span style="color:#f92672">+</span><span style="color:#f92672">+</span>)
{
  <span style="color:#66d9ef">for</span> (<span style="color:#66d9ef">int</span> j <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>; j <span style="color:#f92672">&lt;</span> n; j<span style="color:#f92672">+</span><span style="color:#f92672">+</span>)
  {
    <span style="color:#75715e">// 状态 i 已经包含了第 j 首歌
</span><span style="color:#75715e"></span>    <span style="color:#66d9ef">if</span> (i <span style="color:#f92672">&amp;</span> j) {
      <span style="color:#66d9ef">continue</span>;
    }
    curTime[i <span style="color:#f92672">|</span> j] <span style="color:#f92672">=</span> curTime[i] <span style="color:#f92672">+</span> cost[j];
  }
}
</code></pre></div><p>当然你也可以不做这一步，直接在 DP 的时候更新当前状态的时间也没有问题。</p>
<p>接下来我们就可以写出 DP 的主过程了。Wait, 在此之前，细心的各位想必已经注意到了题目中的一个需求，如果多种打歌顺序都可获得最大值的话，那么要输出字典序最小的方案。这个怎么解决呢？再细心看一下题目会发现每首歌在给出的时候已经强调按照字典序排好了，所以我们只需要把正序枚举 j from 1 to n 改成逆序枚举 j from n to 1，这样就可以保证在遇到字典序更小的最优解的时候替换掉当前解。</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-cpp" data-lang="cpp">    <span style="color:#66d9ef">for</span> (<span style="color:#66d9ef">int</span> i <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>; i <span style="color:#f92672">&lt;</span><span style="color:#f92672">=</span> (<span style="color:#ae81ff">1</span> <span style="color:#f92672">&lt;</span><span style="color:#f92672">&lt;</span> n); i<span style="color:#f92672">+</span><span style="color:#f92672">+</span>)
    {
        <span style="color:#66d9ef">for</span> (<span style="color:#66d9ef">int</span> j <span style="color:#f92672">=</span> n; j <span style="color:#f92672">&gt;</span><span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>; j<span style="color:#f92672">-</span><span style="color:#f92672">-</span>)
        {
            <span style="color:#66d9ef">int</span> cur <span style="color:#f92672">=</span> <span style="color:#ae81ff">1</span> <span style="color:#f92672">&lt;</span><span style="color:#f92672">&lt;</span> j;
            <span style="color:#66d9ef">if</span> (i <span style="color:#f92672">&amp;</span> cur) {
                <span style="color:#66d9ef">int</span> prev <span style="color:#f92672">=</span> i <span style="color:#f92672">&amp;</span> (<span style="color:#f92672">~</span>cur);
                <span style="color:#66d9ef">int</span> getscore <span style="color:#f92672">=</span> rest[j] <span style="color:#f92672">-</span> curTime[prev] <span style="color:#f92672">-</span> cost[j];
                <span style="color:#66d9ef">if</span> (getscore <span style="color:#f92672">&lt;</span> <span style="color:#ae81ff">0</span>) {
                    getscore <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>;     <span style="color:#75715e">// 记得把不能得到分数的情况修改掉
</span><span style="color:#75715e"></span>                }
                <span style="color:#75715e">// 注意这里的条件是 &lt;=，因为当得分相等的时候取字典序更小的更优
</span><span style="color:#75715e"></span>                <span style="color:#66d9ef">if</span> (dp[i].score <span style="color:#f92672">&lt;</span><span style="color:#f92672">=</span> dp[prev].score <span style="color:#f92672">+</span> getscore) {
                    dp[i].score <span style="color:#f92672">=</span> dp[prev].score <span style="color:#f92672">+</span> getscore;
                    dp[i].cur <span style="color:#f92672">=</span> j;
                    dp[i].prev <span style="color:#f92672">=</span> prev;
                }
            }
        }
    }
</code></pre></div><p>最后我们顺着 <code>dp[(1 &lt;&lt; n) - 1]</code> 的状态一路推回去输出方案。在此之前别忘了再判断一下 m 与 <code>dp[(1 &lt;&lt; n) - 1]</code> 的大小关系。还有一个要注意的地方是输出顺序的问题，因为是从最后一个推回去的，但是应该从第一个输出到最后一个，所以这个时候做一个 DFS 或者丢进栈里就完美啦。</p>
<h1 id="附上蒟蒻的标程">附上蒟蒻的标程</h1>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-cpp" data-lang="cpp"><span style="color:#75715e">#</span><span style="color:#75715e">include</span> <span style="color:#75715e">&lt;cstdio&gt; </span><span style="color:#75715e">
</span><span style="color:#75715e"></span><span style="color:#75715e">#</span><span style="color:#75715e">include</span> <span style="color:#75715e">&lt;cstring&gt;</span><span style="color:#75715e">
</span><span style="color:#75715e"></span><span style="color:#75715e">#</span><span style="color:#75715e">include</span> <span style="color:#75715e">&lt;stack&gt;</span><span style="color:#75715e">
</span><span style="color:#75715e"></span><span style="color:#75715e">#</span><span style="color:#75715e">include</span> <span style="color:#75715e">&lt;algorithm&gt;</span><span style="color:#75715e">
</span><span style="color:#75715e"></span><span style="color:#66d9ef">using</span> <span style="color:#66d9ef">namespace</span> std;

<span style="color:#66d9ef">const</span> <span style="color:#66d9ef">int</span> MAXS <span style="color:#f92672">=</span> (<span style="color:#ae81ff">1</span> <span style="color:#f92672">&lt;</span><span style="color:#f92672">&lt;</span> <span style="color:#ae81ff">24</span>);
<span style="color:#66d9ef">const</span> <span style="color:#66d9ef">int</span> MAXN <span style="color:#f92672">=</span> <span style="color:#ae81ff">25</span>;

<span style="color:#66d9ef">struct</span> <span style="color:#a6e22e">State</span> {
    <span style="color:#66d9ef">int</span> cur;
    <span style="color:#66d9ef">int</span> prev;
    <span style="color:#66d9ef">int</span> score;
};
State dp[MAXS <span style="color:#f92672">+</span> <span style="color:#ae81ff">20</span>];

<span style="color:#66d9ef">int</span> n, m, t;
<span style="color:#66d9ef">int</span> sum;
<span style="color:#66d9ef">int</span> cost[MAXN], rest[MAXN];
<span style="color:#66d9ef">int</span> curTime[MAXS <span style="color:#f92672">+</span> <span style="color:#ae81ff">20</span>];
<span style="color:#66d9ef">char</span> name[MAXN][<span style="color:#ae81ff">110</span>];

<span style="color:#66d9ef">int</span> <span style="color:#a6e22e">main</span>()
{
    memset(curTime, <span style="color:#ae81ff">0</span>, <span style="color:#66d9ef">sizeof</span> curTime);
    memset(dp, <span style="color:#ae81ff">0</span>, <span style="color:#66d9ef">sizeof</span> dp);
    
    scanf(<span style="color:#e6db74"></span><span style="color:#e6db74">&#34;</span><span style="color:#e6db74">%d%d%d</span><span style="color:#e6db74">&#34;</span>, <span style="color:#f92672">&amp;</span>n, <span style="color:#f92672">&amp;</span>m, <span style="color:#f92672">&amp;</span>t);
    <span style="color:#66d9ef">for</span> (<span style="color:#66d9ef">int</span> i <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>; i <span style="color:#f92672">&lt;</span> n; i<span style="color:#f92672">+</span><span style="color:#f92672">+</span>)
    {
        scanf(<span style="color:#e6db74"></span><span style="color:#e6db74">&#34;</span><span style="color:#e6db74">%s%d%d</span><span style="color:#e6db74">&#34;</span>, name[i], <span style="color:#f92672">&amp;</span>cost[i], <span style="color:#f92672">&amp;</span>rest[i]);
        sum <span style="color:#f92672">+</span><span style="color:#f92672">=</span> cost[i];
    }
    
    <span style="color:#66d9ef">if</span> (t <span style="color:#f92672">&lt;</span> sum) {
        printf(<span style="color:#e6db74"></span><span style="color:#e6db74">&#34;</span><span style="color:#e6db74">No Answer</span><span style="color:#e6db74">&#34;</span>);
        <span style="color:#66d9ef">return</span> <span style="color:#ae81ff">0</span>;
    }
    
    <span style="color:#66d9ef">for</span> (<span style="color:#66d9ef">int</span> i <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>; i <span style="color:#f92672">&lt;</span> (<span style="color:#ae81ff">1</span> <span style="color:#f92672">&lt;</span><span style="color:#f92672">&lt;</span> n); i<span style="color:#f92672">+</span><span style="color:#f92672">+</span>)
    {
        <span style="color:#66d9ef">for</span> (<span style="color:#66d9ef">int</span> j <span style="color:#f92672">=</span> n; j <span style="color:#f92672">&gt;</span><span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>; j<span style="color:#f92672">-</span><span style="color:#f92672">-</span>)
        {
            <span style="color:#66d9ef">if</span> (i <span style="color:#f92672">&amp;</span> (<span style="color:#ae81ff">1</span> <span style="color:#f92672">&lt;</span><span style="color:#f92672">&lt;</span> j)) {
                <span style="color:#66d9ef">continue</span>;
            }
            <span style="color:#66d9ef">int</span> next <span style="color:#f92672">=</span> i <span style="color:#f92672">|</span> (<span style="color:#ae81ff">1</span> <span style="color:#f92672">&lt;</span><span style="color:#f92672">&lt;</span> j);
            curTime[next] <span style="color:#f92672">=</span> curTime[i] <span style="color:#f92672">+</span> cost[j];
        }
    }

    <span style="color:#66d9ef">for</span> (<span style="color:#66d9ef">int</span> i <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>; i <span style="color:#f92672">&lt;</span><span style="color:#f92672">=</span> (<span style="color:#ae81ff">1</span> <span style="color:#f92672">&lt;</span><span style="color:#f92672">&lt;</span> n); i<span style="color:#f92672">+</span><span style="color:#f92672">+</span>)
    {
        <span style="color:#66d9ef">for</span> (<span style="color:#66d9ef">int</span> j <span style="color:#f92672">=</span> n; j <span style="color:#f92672">&gt;</span><span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>; j<span style="color:#f92672">-</span><span style="color:#f92672">-</span>)
        {
            <span style="color:#66d9ef">int</span> cur <span style="color:#f92672">=</span> <span style="color:#ae81ff">1</span> <span style="color:#f92672">&lt;</span><span style="color:#f92672">&lt;</span> j;
            <span style="color:#66d9ef">if</span> (i <span style="color:#f92672">&amp;</span> cur) {
                <span style="color:#66d9ef">int</span> prev <span style="color:#f92672">=</span> i <span style="color:#f92672">&amp;</span> (<span style="color:#f92672">~</span>cur);
                <span style="color:#66d9ef">int</span> getscore <span style="color:#f92672">=</span> rest[j] <span style="color:#f92672">-</span> curTime[prev] <span style="color:#f92672">-</span> cost[j];
                <span style="color:#66d9ef">if</span> (getscore <span style="color:#f92672">&lt;</span> <span style="color:#ae81ff">0</span>) {
                    getscore <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>;
                }
                <span style="color:#66d9ef">if</span> (dp[i].score <span style="color:#f92672">&lt;</span><span style="color:#f92672">=</span> dp[prev].score <span style="color:#f92672">+</span> getscore) {
                    dp[i].score <span style="color:#f92672">=</span> dp[prev].score <span style="color:#f92672">+</span> getscore;
                    dp[i].cur <span style="color:#f92672">=</span> j;
                    dp[i].prev <span style="color:#f92672">=</span> prev;
                }
            }
        }
    }
    
    <span style="color:#66d9ef">int</span> state <span style="color:#f92672">=</span> (<span style="color:#ae81ff">1</span> <span style="color:#f92672">&lt;</span><span style="color:#f92672">&lt;</span> n) <span style="color:#f92672">-</span> <span style="color:#ae81ff">1</span>;
    
    <span style="color:#66d9ef">if</span> (dp[state].score <span style="color:#f92672">&gt;</span><span style="color:#f92672">=</span> m) {
        printf(<span style="color:#e6db74"></span><span style="color:#e6db74">&#34;</span><span style="color:#e6db74">%d</span><span style="color:#ae81ff">\n</span><span style="color:#e6db74">&#34;</span>, dp[state].score);
    } <span style="color:#66d9ef">else</span> {
        printf(<span style="color:#e6db74"></span><span style="color:#e6db74">&#34;</span><span style="color:#e6db74">No Answer</span><span style="color:#e6db74">&#34;</span>);
        <span style="color:#66d9ef">return</span> <span style="color:#ae81ff">0</span>;
    }
    
    stack<span style="color:#f92672">&lt;</span><span style="color:#66d9ef">int</span><span style="color:#f92672">&gt;</span> S;
    <span style="color:#66d9ef">while</span> (state <span style="color:#f92672">!</span><span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>)
    {
        S.push(dp[state].cur);
        state <span style="color:#f92672">=</span> dp[state].prev;
    }
    
    <span style="color:#66d9ef">while</span> (<span style="color:#f92672">!</span>S.empty())
    {
        <span style="color:#66d9ef">int</span> id <span style="color:#f92672">=</span> S.top();
        S.pop();
        printf(<span style="color:#e6db74"></span><span style="color:#e6db74">&#34;</span><span style="color:#e6db74">%s</span><span style="color:#e6db74">&#34;</span>, name[id]);
        <span style="color:#66d9ef">if</span> (<span style="color:#f92672">!</span>S.empty()) {
            printf(<span style="color:#e6db74"></span><span style="color:#e6db74">&#34;</span><span style="color:#ae81ff">\n</span><span style="color:#e6db74">&#34;</span>);
        }
    }
    
    <span style="color:#66d9ef">return</span> <span style="color:#ae81ff">0</span>;
}

</code></pre></div>
                    <HR width="100%" id="EOF">
                    <p style="color:#777;">Last modified on 2017-10-29</p>
                </div>
                
            </div>
            
            
            <nav class="post-pagination">

                
                <a class="newer-posts" href="https://kirainmoe.com/blog/post/angry-birds-state-compressing/">
                    Next<br>愤怒的小鸟 (Review / NOIP2016 D2T3)
                </a>
                
                
                
                <a class="older-posts" href="https://kirainmoe.com/blog/post/kmp-algorithm-for-matching-string/">
                    Previous<br>浅谈 KMP 字符串匹配算法
                </a>
                
            </nav>
            <div class="post-comment-wrapper">
                
<div class="post-comment-wrapper">
<div id="disqus_thread"></div>
<script type="application/javascript">
    var disqus_config = function () {
    
    
    
    };
    (function() {
        if (["localhost", "127.0.0.1"].indexOf(window.location.hostname) != -1) {
            document.getElementById('disqus_thread').innerHTML = 'Disqus comments not available by default when the website is previewed locally.';
            return;
        }
        var d = document, s = d.createElement('script'); s.async = true;
        s.src = '//' + "yume-diary" + '.disqus.com/embed.js';
        s.setAttribute('data-timestamp', +new Date());
        (d.head || d.body).appendChild(s);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="https://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
</div>




            </div>
        </div>
    </div>
</div>

            </div><div id="single-column-footer">&copy;
	
	2016-2020 宇宙よりも遠い場所
	

/

<a href="https://creativecommons.org/licenses/by-sa/4.0/deed.zh">CC-BY-SA 4.0</a>

<br>

Published with <a href="https://gohugo.io">Hugo</a> / Theme <a href="https://github.com/amazingrise/hugo-theme-diary" title="Author: Rise @ amazingrise.net">Diary</a>
</div>
    	</div>
    <script src="https://kirainmoe.com//js/journal.js"></script>
    </body>
</html>
